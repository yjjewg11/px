var G_mygroup_choose=null;function title_info_init(a){var b=null;G_CallPhoneFN.isPhoneApp()||(b=[{link:"javascript:menu_queryMyTimely_fn()",customIcon:hostUrlCDN+"i/icon-msg-wu.png",title:"\u6d88\u606f"}]);React.render(React.createElement(AMUIReact.Header,{title:a,link:"#title-link",data:{left:[{link:"javascript:Queue.doBackFN();",icon:"chevron-left"},{link:"javascript:menu_dohome();",icon:"home"}],right:b}}),document.getElementById("div_header"))}function login_affter_init(){Vo.init();var a=[],b=null,b={link:"##",title:"\u6821\u52a1\u7ba1\u7406",fn:menu_group_myList_fn_byRight};G_user_hasRight("PX_group_m")&&a.push(b);b={link:"##",title:"\u5bf9\u5916\u53d1\u5e03",subMenu:[{fn:menu_group_myList_fn_byRight_px,link:"##",title:"\u673a\u6784\u4ecb\u7ecd"},{fn:menu_course_byRight,link:"##",title:"\u53d1\u5e03\u8bfe\u7a0b"},{fn:px_Preferential_list_fn,link:"##",title:"\u4f18\u60e0\u6d3b\u52a8"},{fn:menu_teacher_byRight,link:"##",title:"\u53d1\u5e03\u8001\u5e08\u4fe1\u606f"}]};G_user_hasRight("PX_course_m")&&a.push(b);b={link:"##",title:"\u4fe1\u606f\u7ba1\u7406",subMenu:[{fn:function(){menu_announce_list_fn_byRight(0,"\u6821\u56ed\u516c\u544a")},link:"##",title:"\u6821\u56ed\u516c\u544a"},{fn:function(){menu_announce_list_fn_byRight(1,"\u8001\u5e08\u516c\u544a")},link:"##",title:"\u8001\u5e08\u516c\u544a"},{link:"##",fn:function(){ajax_classnews_list_div_byRight(1)},title:"\u73ed\u7ea7\u4e92\u52a8"},{fn:function(){menu_announce_list_fn_byRight(3,"\u7cbe\u54c1\u6587\u7ae0")},link:"##",title:"\u7cbe\u54c1\u6587\u7ae0"}]};G_user_hasRight("PX_announce_m")&&a.push(b);b={link:"##",title:"\u8001\u5e08\u7ba1\u7406",subMenu:[{fn:menu_userinfo_list_fn_byRight,link:"##",title:"\u8001\u5e08\u7ba1\u7406"},{link:"##",title:"\u8001\u5e08\u6388\u6743",fn:menu_kd_roleUser_list_fn}]};G_user_hasRight("PX_teacher_m")&&a.push(b);b={link:"##",fn:menu_queryLeaderMsgByParents_message_fn_byRight,title:"\u56ed\u957f\u4fe1\u7bb1"};G_user_hasRight("PX_Leader_Msg_m")&&a.push(b);b={link:"##",fn:menu_class_list_fn_byRight,title:"\u73ed\u7ea7\u7ba1\u7406"};G_user_hasRight("PX_class_m")&&a.push(b);b={link:"##",title:"\u5b66\u751f\u5217\u8868",fn:menu_query_list_fn_byRight};G_user_hasRight("PX_student_allquery")&&a.push(b);b={link:"##",title:"\u7edf\u8ba1",fn:menu_statistics_list_fn_byRight};G_user_hasRight("PX_statistics_m")&&a.push(b);var c={link:"##",title:"\u6211",subCols:3,subMenu:[]},b={fn:menu_userinfo_update_fn,link:"##",title:"\u4fee\u6539\u8d44\u6599"};G_CallPhoneFN.isPhoneApp()||c.subMenu.push(b);b={fn:menu_userinfo_updatepassword_fn,link:"##",title:"\u4fee\u6539\u5bc6\u7801"};G_CallPhoneFN.isPhoneApp()||c.subMenu.push(b);b={link:"##",fn:menu_userinfo_logout_fn,title:"\u6ce8\u9500"};G_CallPhoneFN.isPhoneApp()||c.subMenu.push(b);b={link:"##",title:"\u5e2e\u52a9\u5217\u8868",fn:px_help_list_fn};a.push(b);G_CallPhoneFN.isPhoneApp()||a.push(c);$("#div_menu").html("");title_info_init("\u6559\u80b2\u673a\u6784-\u9996\u9875");React.render(React.createElement(AMUIReact.Menu,{cols:4,data:a,onSelect:div_menu_handleClick}),document.getElementById("div_menu"))}function body_show(){w_ch_user.hide();w_ch_cook.hide()}var div_menu_handleClick=function(a,b,c){a&&a.subMenu?("function"==typeof a.fn&&(body_show(),this.closeAll(),a.fn()),console.log("\u70b9\u51fb\u7684\u94fe\u63a5\u4e3a1\uff1a",a)):(c.preventDefault(),"function"==typeof a.fn&&(body_show(),this.closeAll(),a.fn()),console.log("\u70b9\u51fb\u7684\u94fe\u63a5\u4e3a2\uff1a",a))};function menu_dohome(){$("#div_body").show();$("#div_widget_chooseUser").html("");$("#div_widget_chooseCook").html("");Queue.push(menu_dohome,"\u4e3b\u9875");Store.getUserinfo();var a=[{img:hostUrlCDN+"i/banji.png",link:"javascript:menu_class_students_fn()",title:"\u6211\u7684\u73ed\u7ea7"},{img:hostUrlCDN+"i/hudong.png",link:"javascript:menu_classnewsbyMy_list_fn();",title:"\u73ed\u7ea7\u4e92\u52a8"},{img:hostUrlCDN+"i/kechengbiao.png",link:"javascript:menu_teachingplan_dayShow_fn();",title:"\u8bfe\u7a0b\u8868"},{img:hostUrlCDN+"i/sns.png",link:"javascript:PxSns.list_init()",title:"\u8bdd\u9898"},{img:hostUrlCDN+"i/xinxiang.png",link:"javascript:menu_queryCountMsgByParents_message_fn()",title:"\u6211\u7684\u4fe1\u7bb1"},{img:hostUrlCDN+"i/JZtongxunlu.png",link:"javascript:parentContactByMyStudent()",title:"\u5bb6\u957f\u901a\u8baf\u5f55"},{img:hostUrlCDN+"i/laoshitongxunlu.png",link:"javascript:menu_Teacher_tel_fn()",title:"\u8001\u5e08\u901a\u8baf\u5f55"},{img:hostUrlCDN+"i/gonggao.png",link:"javascript:menu_announce_mylist_fn();",title:"\u516c\u544a"},{img:hostUrlCDN+"i/jpwz.png",link:"javascript:menu_article_list_fn()",title:"\u7cbe\u54c1\u6587\u7ae0"},{img:hostUrlCDN+"i/shoucang.png",link:"javascript:menu_favorites_push_fn()",title:"\u6211\u7684\u6536\u85cf"}];G_user_status_normal()||(a=[{img:hostUrlCDN+"i/jpwz.png",link:"javascript:menu_article_list_fn()",title:"\u7cbe\u54c1\u6587\u7ae0"},{img:hostUrlCDN+"i/shoucang.png",link:"javascript:menu_favorites_push_fn()",title:"\u6211\u7684\u6536\u85cf"}]);React.render(React.createElement(Div_body_index,{sm:3,md:4,lg:6,themes:"bordered",data:a}),document.getElementById("div_body"))}function menu_kd_group_reg_fn(){Queue.push(menu_kd_group_reg_fn);React.render(React.createElement(Div_kd_group_reg,null),document.getElementById("div_login"));$("#div_seesion_body").hide()}function menu_queryMyTimely_fn(){Queue.push(menu_queryMyTimely_fn,"\u5373\u65f6\u6d88\u606f");ajax_queryMyTimely_myList()}function menu_userinfo_logout_fn(){ajax_userinfo_logout()}function menu_hellp_fn(){Queue.push(menu_hellp_fn,"\u5e2e\u52a9\u6587\u6863");React.render(React.createElement(Help_txt),document.getElementById("div_body"))}function px_help_list_fn(){Queue.push(px_help_list_fn,"\u5e2e\u52a9\u5217\u8868");ajax_px_help_div()}function px_Preferential_list_fn(){Queue.push(px_Preferential_list_fn,"\u4f18\u60e0\u6d3b\u52a8");ajax_px_Preferential_div()}function menu_classnewsbyMy_list_fn(){ajax_classnews_list_div(1)}function menu_announce_mylist_fn(){Queue.push(menu_announce_mylist_fn,"\u516c\u544a");ajax_announce_div()}var G_myCurClassuuid=null;function menu_teachingplan_dayShow_fn(a){var b=Store.getMyClassList();G_myClassList=b;!a&&b&&0<b.length&&(a=b[0].uuid);px_ajax_teachingplan_fn(a)}function parentContactByMyStudent(){ajax_parentContactByMyStudent()}function menu_article_list_fn(){Queue.push(menu_article_list_fn,"\u7cbe\u54c1\u6587\u7ae0");ajax_good_announce_div()}function menu_class_students_fn(){var a=Store.getMyClassList();react_ajax_class_students_manage(a&&0!=a.length?a[0].uuid:null)}function menu_Teacher_tel_fn(){Queue.push(menu_Teacher_tel_fn,"\u8001\u5e08\u901a\u8baf\u5f55");var a=Store.getGroupNoGroup_wjd();a&&0!=a.length?ajax_Teacher_tel_div(a[0].uuid):G_msg_pop("\u6ca1\u6709\u52a0\u5165\u5b66\u6821,\u6ca1\u6709\u6570\u636e.")}function menu_favorites_push_fn(){Queue.push(menu_favorites_push_fn,"\u6211\u7684\u6536\u85cf");ajax_favorites_div()}function menu_queryCountMsgByParents_message_fn(){ajax_queryCountMsgByParents_message()}function menu_teacherDailyTask_fn(){Queue.push(menu_teacherDailyTask_fn,"\u6bcf\u65e5\u4efb\u52a1");ajax_teacherDailyTask()}function menu_userinfo_reg_fn(){React.render(React.createElement(Div_userinfo_reg,null),document.getElementById("div_login"));$("#div_seesion_body").hide()}function menu_userinfo_login_fn(){Queue.push(menu_userinfo_login_fn);var a=getCookie("bs_loginname"),b=getCookie("bs_password"),c=getCookie("pw_checked");React.render(React.createElement(Div_login,{loginname:a,password:b,pw_checked:c}),document.getElementById("div_login"));$("#div_seesion_body").hide()}function menu_body_fn(){$("#div_seesion_body").show();$("#div_login").html(null);login_affter_init();menu_dohome()}function index_init(){G_CallPhoneFN.hideLoadingDialog();$.AMUI.fullscreen.enabled&&$.AMUI.fullscreen.request();ajax_getUserinfo(!0);MessageTimer.start()}window.onload=function(){index_init()};function menu_group_myList_fn_byRight(){Queue.push(menu_group_myList_fn_byRight,"\u6821\u52a1\u7ba1\u7406");ajax_group_myList_byRight()}var announce_types="";function menu_announce_list_fn_byRight(a,b){Queue.push(function(){menu_announce_list_fn_byRight(a,b)},b);announce_types=a;ajax_announce_listByGroup_byRight()}var g_uesrinfo_groupuuid="";function menu_userinfo_list_fn_byRight(){Queue.push(function(){menu_userinfo_list_fn_byRight()},"\u8001\u5e08\u7ba1\u7406");g_uesrinfo_groupuuid||(g_uesrinfo_groupuuid=Store.getCurGroupByRight("PX_teacher_m").uuid);ajax_uesrinfo_listByGroup_div(g_uesrinfo_groupuuid)}function menu_userTeacher_list_fn_byRight(){Queue.push(menu_userTeacher_list_fn_byRight,"\u8001\u5e08\u8d44\u6599\u7ba1\u7406");var a=Store.getGroup();a&&0!=a.length?userTeacher_div_byRight(a[0].uuid):G_msg_pop("\u6ca1\u6709\u52a0\u5165\u5b66\u6821,\u6ca1\u6709\u6570\u636e.")}var G_myClassList=G_myCurClassuuid=null;function menu_teachingplan_list_fn_byRight(){var a=Store.getGroupByRight("PX_teachingplan_m");a&&0!=a.length?((a=Store.getChooseClass(a[0].uuid))&&0<a.length&&(classuuid=a[0].uuid),G_myClassList=a,px_ajax_teachingplan_byRight(classuuid)):alert("\u6ca1\u6709\u6743\u9650\u3002")}function menu_queryLeaderMsgByParents_message_fn_byRight(){ajax_queryLeaderMsgByParents_message_byRight()}function menu_class_list_fn_byRight(){var a=Store.getGroupByRight("PX_class_m");a&&0!=a.length?(groupuuid=a[0].uuid,ajax_Class_div_byRight(groupuuid)):alert("\u6ca1\u6709\u73ed\u7ea7\u7ba1\u7406\u6743\u9650\u4e0d\u80fd\u8bbf\u95ee.")}function menu_accounts_list_fn_byRight(){ajax_accounts_listByGroup_byRight()}function menu_query_list_fn_byRight(){ajax_student_query_byRight()}function menu_statistics_list_fn_byRight(){Queue.push(menu_statistics_list_fn_byRight,"\u7edf\u8ba1");var a=Store.getGroupByRight("PX_statistics_m"),b=G_week.getDateStr(new Date,-7);React.render(React.createElement(ECharts_Div_byRight,{begDateStr:b,groupuuid:a&&0!=a.length?a[0].uuid:null,statistics_type_list:PXECharts_ajax.getStatisticsTypeList(),group_list:G_selected_dataModelArray_byArray(a,"uuid","brand_name")}),document.getElementById("div_body"))}function menu_teachingjudge_list_fn_byRight(){ajax_teachingjudge_query_byRight()}function menu_course_byRight(){px_ajax_course_byRight()}function menu_teacher_byRight(){G_mygroup_choose=Store.getGroup()[0].uuid;ajax_teacher_div_byRight()}function menu_group_myList_fn_byRight_px(){Queue.push(menu_group_myList_fn_byRight_px,"\u5bf9\u5916\u6821\u52a1\u7ba1\u7406");ajax_group_myList_byRight_px()}function ajax_userinfo_login(){var a=$("#btn_login");a.button("loading");$.AMUI.progress.start();var b=$("#loginname").val(),c=$("#password").val();32!=c.length&&(c=$.md5(c));$.ajax({type:"POST",url:hostUrl+"rest/userinfo/login.json",data:{loginname:b,password:c,grouptype:2},dataType:"json",success:function(d){a.button("reset");$.AMUI.progress.done();"success"==d.ResMsg.status?(Store.clear(),setCookie("bs_loginname",b),$("#pw_checked")[0].checked?(setCookie("bs_password",c),setCookie("pw_checked","checked")):(setCookie("bs_password",""),setCookie("pw_checked","")),Store.setUserinfo(d.userinfo),Store.setGroup(d.list),PxRight.setUserRights(d.S_User_rights),G_CallPhoneFN.jsessionToPhone(d.JSESSIONID),menu_body_fn()):alert(d.ResMsg.message)},error:function(b,c,e){a.button("reset");$.AMUI.progress.done();b.responseText&&b.responseText.indexOf("G_key_no_connect_server")?alert("\u6ca1\u8fde\u63a5\u4e0a\u4e92\u8054\u7f51."):alert(b.status+","+c+"\x3d"+e)}})}function ajax_getUserinfo(a){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/userinfo/getUserinfo.json?grouptype\x3d2",async:!1,dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?(b.userinfo&&Store.setUserinfo(b.userinfo),b.list&&Store.setGroup(b.list),PxRight.setUserRights(b.S_User_rights),G_CallPhoneFN.jsessionToPhone(b.JSESSIONID),menu_body_fn()):(a||alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn})};