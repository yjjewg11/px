var Store={map:{},clear:function(){$.AMUI.store.enabled||$.AMUI.store.clear();Store.map={};Store.setCurGroup(null)},isDisableAlet:!1,enabled:function(){return $.AMUI.store.enabled?!0:(Store.isDisableAlet||alert("\u4f60\u7684\u6d4f\u89c8\u5668\u7981\u7528 LocalStorage\uff0c\u90e8\u5206\u663e\u793a\u6709\u95ee\u9898\uff0c\u8bf7\u542f\u7528LocalStorage"),Store.isDisableAlet=!0,!1)},getAllGroup:function(){if(this.map.AllGroup)return this.map.AllGroup;Store_ajax_group_allList_toStroe();return this.map.AllGroup?this.map.AllGroup:[]},setAllGroup:function(a){this.map.AllGroup=a},setUser:function(a,b){this.map["User_"+a]=b},getUser:function(a){var b="User_"+a;if(this.map[b])return this.map[b];store_ajax_getUserForJsCache(a);return this.map[b]?this.map[b]:{uuid:"",name:"",tel:""}},setUserRights:function(a){this.map.UserRights=a},getUserRights:function(){var a=this.map.UserRights;a||(a="");return a},setRoleList:function(a,b){this.map["RoleList_"+a]=b},getRoleList:function(a){key="RoleList_"+a;if(this.map[key])return this.map[key];store_ajax_role_list_toStroe(a);return this.map[key]?this.map[key]:[]},getVo_map:function(){if(!Store.enabled())return null;$.AMUI.store.get("Vo_map")},getVo_md5:function(){if(!Store.enabled())return null;$.AMUI.store.get("Vo_md5")},setVo_map:function(a){Store.enabled()&&$.AMUI.store.set("Vo_map",a)},setVo_md5:function(a){Store.enabled()&&$.AMUI.store.set("Vo_md5",a)},getCurMyClass:function(){if(this.map.CurMyClass)return this.map.CurMyClass;var a=$.AMUI.store.get("CurMyClass");if(null==a){var b=Store.getMyClassList();0<b.length?(a=b[0],Store.setCurMyClass(a)):cur_group={}}return a},setClassStudentsList:function(a,b){this.map["ClassStudentsList"+a]=b},getClassStudentsList:function(a){var b="ClassStudentsList"+a;if(this.map[b])return this.map[b];store_ajax_student_getStudentByClassuuid_toStroe(a);return this.map[b]?this.map[b]:[]},setCurMyClass:function(a){this.map.CurMyClass=a},getMyClassList:function(){if(this.map.MyClass)return this.map.MyClass;store_ajax_MyClass_toStroe();return this.map.MyClass?this.map.MyClass:[]},getMyByClassList:function(a){var b,c=[];this.map.MyClass||store_ajax_MyClass_toStroe();b=this.map.MyClass;for(var d=0;d<b.length;d++)a==b[d].groupuuid&&c.push(b[d]);return c},getGroupBymyclassList:function(a){var b;this.map.MyClass||store_ajax_MyClass_toStroe();b=this.map.MyClass;for(var c=0;c<b.length;c++)if(a==b[c].uuid)return b[c].groupuuid},setMyClassList:function(a){this.map.MyClass=a},setChooseCook:function(a,b){this.map["ChooseCook"+a]=b},getChooseCook:function(a){return this.map["ChooseCook"+a]},setChooseClass:function(a,b){this.map["ChooseClass"+a]=b},clearChooseClass:function(){for(var a in this.map)-1<a.indexOf("ChooseClass")&&(console.log("clearChooseClass:key",a),this.map[a]=null)},getChooseClass:function(a){if(!a)return[];var b="ChooseClass"+a;if(this.map[b])return this.map[b];store_ajax_class_listByGroup(a);return this.map[b]?this.map[b]:[]},getClassNameByUuid:function(a){if(!a)return"";for(var b=this.getGroup(),c=0;c<b.length;c++)for(var d=this.getChooseClass(b[c].uuid),e=0;e<d.length;e++)if(a==d[e].uuid)return d[e].name;return""},getClassByUuid:function(a){if(!a)return{};for(var b=this.getGroup(),c=0;c<b.length;c++)for(var d=this.getChooseClass(b[c].uuid),e=0;e<d.length;e++)if(a==d[e].uuid)return d[e];return{name:"",uuid:""}},setChooseUer:function(a,b){this.map["ChooseUer_"+a]=b},getChooseUer:function(a){var b="ChooseUer_"+a;store_ajax_chooseUser_listByGroup(a);return this.map[b]?this.map[b]:[]},getGroupNameByUuid:function(a){for(var b=this.getAllGroup(),c=0;c<b.length;c++)if(a==b[c].uuid)return b[c].brand_name;return""},getCurGroupByRight:function(a){if(this.map.CurGroup)return this.map.CurGroup;a=$.AMUI.store.get("CurGroup");if(null==a){var b=Store.getGroup();0<b.length?(a=b[0],Store.setCurGroup(a)):cur_group={}}return a},getCurGroup:function(){if(this.map.CurGroup)return this.map.CurGroup;var a=$.AMUI.store.get("CurGroup");if(null==a){var b=Store.getGroup();0<b.length?(a=b[0],Store.setCurGroup(a)):cur_group={}}return a},setCurGroup:function(a){this.map.CurGroup=a;Store.enabled()&&$.AMUI.store.set("CurGroup",a)},getGroupByRight:function(a){console.log("getGroupByRight:pa",a);for(var b=this.getGroup(),c=[],d=0;d<b.length;d++)G_user_hasRightByGroupuuid(a,b[d].uuid)?(c.push(b[d]),console.log("getGroupByRight-add:",b[d].brand_name)):console.log("getGroupByRight-remove:",b[d].brand_name);return c},getCurGroupByRight:function(a){a=this.getGroupByRight(a);var b=Store.getCurGroup();if(!a||0==a.length)return{};if(!b||b.uuid)return a[0];for(var c=0;c<a.length;c++)if(b.uuid==a[c].uuid)return b;return a[0]},getGroupNoGroup_wjd:function(){for(var a=this.getGroup(),b=[],c=0;c<a.length;c++)a[c].uuid!=G_group_wjd&&b.push(a[c]);return b},getMyGroupByUuid:function(a){for(var b=this.getGroup(),c=0;c<b.length;c++)if(a==b[c].uuid)return b[c];return{}},getGroup:function(){if(this.map.Group)return this.map.Group;store_ajax_group_myList_toStroe();return this.map.Group?this.map.Group:[]},setGroup:function(a){this.map.Group=a},getUserinfo:function(){if(this.map.userinfo)return this.map.userinfo;store_ajax_getUserinfo();return this.map.userinfo?this.map.userinfo:{}},setUserinfo:function(a){var b=this.map.userinfo;this.map.userinfo=a;b&&a&&b.loginname==a.loginname||(Store.clear(),this.map.userinfo=a)}};function getCookie(a){if($.AMUI.store.enabled)return $.AMUI.store.get(a);var b=document.cookie,c=b.indexOf(a);if(-1!=c){cookie_pos_i=c+a.length;if("\x3d"!=b.substring(cookie_pos_i,cookie_pos_i+1))return"";c+=a.length+1;a=b.indexOf(";",c);-1==a&&(a=b.length);var d=unescape(b.substring(c,a))}return d}function setCookie(a,b){if($.AMUI.store.enabled)$.AMUI.store.set(a,b);else{var c="",c=new Date;c.setTime(c.getTime()+2592E6);c="; expires\x3d"+c.toGMTString();document.cookie=a+"\x3d"+escape(b)+c+"; path\x3d/"}}Date.prototype.Format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)(new RegExp("("+c+")")).test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};function store_ajax_group_myList_toStroe(){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/group/myList.json",data:"",dataType:"json",async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?Store.setGroup(a.list):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})}function store_ajax_class_listByGroup(a){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/class/list.json?groupuuid\x3d"+a,async:!1,data:"",dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?Store.setChooseClass(a,b.list):(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn})}function store_ajax_getUserinfo(){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/userinfo/getUserinfo.json",async:!1,dataType:"json",success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(a.userinfo&&Store.setUserinfo(a.userinfo),a.list&&Store.setGroup(a.list),Store.setUserRights(a.S_User_rights)):Store.setUserinfo({uuid:"",name:"\u6e38\u5ba2"})},error:G_ajax_error_fn})}function store_ajax_MyClass_toStroe(){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/class/queryClassByUseruuid.json",async:!1,dataType:"json",success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?Store.setMyClassList(a.list):alert(a.ResMsg.message)},error:G_ajax_error_fn})}function store_ajax_student_getStudentByClassuuid_toStroe(a){$.AMUI.progress.start();url=hostUrl+"rest/student/getStudentByClassuuid.json?classuuid\x3d"+a;$.ajax({type:"GET",url:url,async:!1,dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?Store.setClassStudentsList(a,b.list):alert(b.ResMsg.message)},error:G_ajax_error_fn})}function store_ajax_role_list_toStroe(a){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/role/list.json?type\x3d"+a,async:!1,dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?Store.setRoleList(a,b.list):alert(b.ResMsg.message)},error:G_ajax_error_fn})}function store_ajax_getUserForJsCache(a){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/userinfo/getUserForJsCache.json?uuid\x3d"+a,async:!1,dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?Store.setUser(a,b.data):alert(b.ResMsg.message)},error:G_ajax_error_fn})}function store_ajax_chooseUser_listByGroup(a){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/userinfo/listJsCache.json?groupuuid\x3d"+a,async:!1,data:"",dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?Store.setChooseUer(a,b.list):(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn})}function Store_ajax_group_allList_toStroe(){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/group/list.json",data:"",dataType:"json",async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?Store.setAllGroup(a.list):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})}function Store_ajax_groupHabits_getByKey(a,b){var c=null;$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/groupHabits/getByKey.json",data:{groupuuid:a,key:b},dataType:"json",async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?c=a.data.v:(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return c};