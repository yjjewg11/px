/**
 * 设置权限模块
 */var PxRight={map:{},setUserRights:function(a){this.map.UserRights=a},getUserRights:function(){var a=this.map.UserRights;a||(a="");return a}},PxLazyM=function(){function a(){window.__loadJS_count--;0==window.__loadJS_count&&($.AMUI.progress.done(),menu_body_fn())}return{loadJS_for:function(c){var b=null,b=2==c?PxConfig.group_type_2:PxConfig.group_type_1;(c=PxConfig.ver)||(c="1107");window.__loadJS_count=b.length;$.AMUI.progress.start();for(var d=0;d<b.length;d++)loadJS(b[d]+"?"+c,a)}}}();function index_init(){G_CallPhoneFN.hideLoadingDialog();$.AMUI.fullscreen.enabled&&$.AMUI.fullscreen.request();ajax_getUserinfo(!0)}window.onload=function(){index_init()};function login_init(){G_CallPhoneFN.hideLoadingDialog();$.AMUI.fullscreen.enabled&&$.AMUI.fullscreen.request();ajax_getUserinfo(!0)}window.onload=function(){login_init()};function ajax_getUserinfo(a){$.AMUI.progress.start();var c=getCookie("bs_grouptype");c||(c=1,setCookie("bs_grouptype",c));$.ajax({type:"GET",url:hostUrl+"rest/userinfo/getUserinfo.json?grouptype\x3d"+c,async:!1,dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?(b.userinfo&&Store.setUserinfo(b.userinfo),b.list&&Store.setGroup(b.list),PxRight.setUserRights(b.S_User_rights),G_CallPhoneFN.jsessionToPhone(b.JSESSIONID),setCookie("bs_grouptype",b.S_type),PxLazyM.loadJS_for(getCookie("bs_grouptype"))):(a||alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn})}function ajax_userinfo_login(){var a=$("#btn_login");a.button("loading");$.AMUI.progress.start();var c=$("#login_form").serializeJson();32!=c.password.length&&(c.password=$.md5(c.password));$.ajax({type:"POST",url:hostUrl+"rest/userinfo/login.json",data:c,dataType:"json",success:function(b){a.button("reset");$.AMUI.progress.done();"success"==b.ResMsg.status?(Store.clear(),setCookie("bs_loginname",c.loginname),setCookie("bs_grouptype",c.grouptype),$("#pw_checked")[0].checked?(setCookie("bs_password",c.password),setCookie("pw_checked","checked")):(setCookie("bs_password",""),setCookie("pw_checked","")),Store.setUserinfo(b.userinfo),Store.setGroup(b.list),PxRight.setUserRights(b.S_User_rights),G_CallPhoneFN.jsessionToPhone(b.JSESSIONID),setCookie("bs_grouptype",b.S_type),PxLazyM.loadJS_for(getCookie("bs_grouptype")),G_msg_pop(b.ResMsg.message)):alert(b.ResMsg.message)},error:function(b,c,e){a.button("reset");$.AMUI.progress.done();b.responseText&&b.responseText.indexOf("G_key_no_connect_server")?alert("\u6ca1\u8fde\u63a5\u4e0a\u4e92\u8054\u7f51."):alert(b.status+","+c+"\x3d"+e)}})}function ajax_kd_group_reg(){$.AMUI.progress.start();var a=$("#kd_group_reg_form").serializeJson();a.password!=a.password1&&alert("2\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u5339\u914d");delete a.password1;a.password=$.md5(a.password);a=JSON.stringify(a);$.ajax({type:"POST",url:hostUrl+"rest/group/reg.json",processData:!1,data:a,dataType:"json",contentType:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(G_msg_pop(a.ResMsg.message),menu_userinfo_login_fn()):alert(a.ResMsg.message)},error:G_ajax_error_fn})}function ajax_sms_sendCode(a,c){$.ajax({type:"GET",url:hostUrl+"rest/sms/sendCode.json",dataType:"json",data:{tel:$(a).val(),type:c},async:!0,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?G_msg_pop(a.ResMsg.message):alert("\u9a8c\u8bc1\u7801\u53d1\u9001\u5931\u8d25\uff1a"+a.ResMsg.message)},error:G_ajax_error_fn})}function menu_kd_group_reg_fn(){Queue.push(menu_kd_group_reg_fn);React.render(React.createElement(Div_kd_group_reg,null),document.getElementById("div_login"));$("#div_seesion_body").hide()}function menu_userinfo_reg_fn(){React.render(React.createElement(Div_userinfo_reg,null),document.getElementById("div_login"));$("#div_seesion_body").hide()}function menu_userinfo_updatePasswordBySms_fn(){Queue.push(menu_userinfo_updatePasswordBySms_fn);React.render(React.createElement(Div_userinfo_updatePasswordBySms,null),document.getElementById("div_login"))}function ajax_userinfo_updatePasswordBySms(){$.AMUI.progress.start();var a=$("#commonform").serializeJson();a.tel?a.smscode?a.password!=a.password1?alert("2\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u5339\u914d!"):(delete a.password1,a.password=$.md5(a.password),a=JSON.stringify(a),$.ajax({type:"POST",url:hostUrl+"rest/userinfo/updatePasswordBySms.json",processData:!1,data:a,dataType:"json",contentType:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(G_msg_pop(a.ResMsg.message),Queue.doBackFN()):alert(a.ResMsg.message)},error:G_ajax_error_fn})):alert("\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801!"):alert("\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801!")}function menu_userinfo_login_fn(){Queue.push(menu_userinfo_login_fn);var a=getCookie("bs_loginname"),c=getCookie("bs_password"),b=getCookie("bs_grouptype"),d=getCookie("pw_checked");React.render(React.createElement(Div_login,{loginname:a,password:c,grouptype:b,pw_checked:d}),document.getElementById("div_login"));$("#div_seesion_body").hide()}function ajax_userinfo_reg(){$.AMUI.progress.start();var a=$("#regform").serializeJson();a.password!=a.password1?alert("2\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u5339\u914d"):(delete a.password1,a.password=$.md5(a.password),a=JSON.stringify(a),$.ajax({type:"POST",url:hostUrl+"rest/userinfo/reg.json",processData:!1,data:a,dataType:"json",contentType:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(alert("\u6ce8\u518c\u6210\u529f\uff01"),menu_userinfo_login_fn()):alert(a.ResMsg.message)},error:G_ajax_error_fn}))};