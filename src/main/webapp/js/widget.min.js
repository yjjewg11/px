
/**
 * 
 * w:表示公共组件
 * ch：表示选择
 * 班级单击选择
 * w_ch_class.open(callbackFN,groupuuid)
 * 人员选择控件
 * w_ch_user.open(bind_inputid_uuid,bind_inputid_name,groupuuid);
 * 指定一个学校选择用户
 * w_ch_user.openTheGroup(useruuids,groupuuid,callback);
 * callback=function(useruuids,usernames,groupuuid){};
 * 
 * 
 * 剪切上传图片方法
 * w_uploadImg.open(callbackFN);
 * 
 * 选择菜谱控件
 * checkeduuids:选择图片uuid
 * type:类型
 * w_ch_cook.callbackFN(uuids,imgArr);
 * w_ch_cook.open(callbackFN,checkeduuids)
 * 选择菜谱控件-子控件,上传新菜谱
 * w_ch_cookAddImg.open(callbackFN,type);
 */

//cook add img


//uploadImg
/**
 * w_ch_cookAddImg.open(callbackFN,type)
 * w_ch_cookAddImg.base64='data:image/png;base64,iVBORw0KG...'
 */var w_ch_cookAddImg={div_id:"div_widget_chooseUser",div_body:"div_widget_chooseCook",cropper:null,callbackFN:null,base64:null,type:6,uuid:null,ajax_upload:function(){var a=null;if($("#cook_name").val()){w_ch_cookAddImg.uuid=null;$.AMUI.progress.start();var b=hostUrl+"rest/uploadFile/uploadBase64.json";$.ajax({type:"POST",url:b,timeout:0,dataType:"json",data:{type:2,base64:w_ch_cookAddImg.base64},async:!1,success:function(b){a=b},error:G_ajax_error_fn});if(null!=a)if("success"==a.ResMsg.status)if(w_ch_cookAddImg.uuid=a.data.uuid,w_ch_cookAddImg.uuid){var c={name:$("#cook_name").val(),img:w_ch_cookAddImg.uuid,type:w_ch_cookAddImg.type},d=JSON.stringify(c),b=hostUrl+"rest/cookbook/save.json";$.ajax({type:"POST",url:b,dataType:"json",contentType:!1,processData:!1,data:d,async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(Store.setChooseCook(c.type,null),w_ch_cookAddImg.callbackFN&&w_ch_cookAddImg.callbackFN(),w_ch_cookAddImg.hide()):alert(a.ResMsg.message)},error:G_ajax_error_fn})}else alert("error:w_ch_cookAddImg.uuid is null!");else $.AMUI.progress.done(),alert(a.ResMsg.message)}else alert("\u540d\u79f0\u5fc5\u586b")},handleClick:function(a){"cancel"==a?w_ch_cookAddImg.hide():"ok"==a&&(null==w_ch_cookAddImg.base64?alert("\u8bf7\u5148\u526a\u5207\u56fe\u7247\uff0c\u5728\u63d0\u4ea4\u3002"):w_ch_cookAddImg.ajax_upload())},open:function(a,b){w_ch_cookAddImg.type=b;w_ch_cookAddImg.base64=null;w_ch_cookAddImg.callbackFN=a;w_ch_cookAddImg.show()},show:function(){React.render(React.createElement(Upload_cookImg,{responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(w_ch_user.div_id));$("#"+this.div_body).hide();$("#"+this.div_id).show()},hide:function(a){$("#"+this.div_body).show();$("#"+this.div_id).html("")}},w_ch_cook={div_id:"div_widget_chooseCook",div_body:"div_body",groupuuid:null,callbackFN:null,checkedClassuuid:null,checkeduuids:null,handleClick:function(a,b){w_ch_cook.hide();"cancel"!=a&&(b&&6<b.length?G_msg_pop("\u6700\u591a\u9009\u62e96\u4e2a\u98df\u8c31!"):w_ch_cook.callbackFN&&w_ch_cook.callbackFN(b))},open:function(a,b){w_ch_cook.callbackFN=a;w_ch_cook.checkeduuids=b;w_ch_cook.show()},reshowBygroup:function(){w_ch_cook.show()},add_img_callbackFN:function(a){$("#"+this.div_id).html("");w_ch_cook.reshowBygroup()},add_img:function(a,b){null==b&&(b=w_ch_cook.add_img_callbackFN);w_ch_cookAddImg.open(b,a)},show:function(){React.render(React.createElement(ChooseCook_Widget,{handleClick:w_ch_cook.handleClick,checkeduuids:w_ch_cook.checkeduuids,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(w_ch_cook.div_id));$("#"+this.div_body).hide();$("#"+this.div_id).show()},hide:function(a){$("#"+this.div_body).show();$("#"+this.div_id).html("");$("#"+this.div_id).hide()}},w_ch_user={div_id:"div_widget_chooseUser",div_body:"div_body",bind_inputid_uuid:null,bind_inputid_name:null,checkedUseruuid:null,callback:null,useruuids:null,group_list:null,groupuuid:null,handleClick:function(a,b,c,d){w_ch_user.hide();"cancel"==a?(w_ch_user.callback=null,w_ch_user.bind_inputid_uuid=null,w_ch_user.bind_inputid_name=null):(w_ch_user.bind_inputid_uuid&&($("#"+w_ch_user.bind_inputid_uuid).val(c),w_ch_user.bind_inputid_uuid=null),w_ch_user.bind_inputid_name&&($("#"+w_ch_user.bind_inputid_name).val(d),w_ch_user.bind_inputid_name=null),w_ch_user.callback&&(w_ch_user.callback(c,d,b),w_ch_user.callback=null))},openTheGroup:function(a,b,c){this.callback=c;w_ch_user.checkedUseruuid=a;b?(w_ch_user.bind_inputid_uuid=null,w_ch_user.bind_inputid_name=null,w_ch_user.groupuuid=b,w_ch_user.useruuids=a,w_ch_user.group_list=G_selected_dataModelArray_byArray([{uuid:b,brand_name:Store.getGroupNameByUuid(b)}],"uuid","brand_name"),w_ch_user.show()):alert("\u53c2\u6570groupuuid\u4e0d\u80fd\u4e3anull")},open:function(a,b,c,d){w_ch_user.callback=d;w_ch_user.bind_inputid_uuid=a;w_ch_user.bind_inputid_name=b;w_ch_user.bind_inputid_uuid&&(w_ch_user.checkedUseruuid=$("#"+w_ch_user.bind_inputid_uuid).val());w_ch_user.checkedUseruuid||(w_ch_user.checkedUseruuid="");w_ch_user.groupuuid=c?c:Store.getCurGroup().uuid;w_ch_user.groupuuid||alert("w_ch_user.open groupuuid is null!");w_ch_user.group_list=G_selected_dataModelArray_byArray(Store.getGroup(),"uuid","brand_name");w_ch_user.show()},username:null,reshowBygroup:function(a,b){w_ch_user.groupuuid=a;w_ch_user.groupuuid||alert("w_ch_user.reshowBygroup groupuuid is null!");w_ch_user.username=b;w_ch_user.show()},show:function(){var a=Store.getChooseUer(w_ch_user.groupuuid);if(w_ch_user.username){for(var b=[],c=0;c<a.length;c++)-1<a[c].name.indexOf(w_ch_user.username)&&b.push(a[c]);a=b}React.render(React.createElement(ChooseUser_EventsTable,{group_uuid:w_ch_user.groupuuid,group_list:this.group_list,events:a,checkedUseruuid:w_ch_user.checkedUseruuid,handleClick:w_ch_user.handleClick,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(w_ch_user.div_id));$("#"+this.div_body).hide();$("#"+this.div_id).show()},hide:function(a){$("#"+this.div_body).show();$("#"+this.div_id).html("");$("#"+this.div_id).hide()}};