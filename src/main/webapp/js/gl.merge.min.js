
//jQuery.md5.min.js merge
(function(u){var m=function(a,c){var g,h,k,l,b;k=a&2147483648;l=c&2147483648;g=a&1073741824;h=c&1073741824;b=(a&1073741823)+(c&1073741823);return g&h?b^2147483648^k^l:g|h?b&1073741824?b^3221225472^k^l:b^1073741824^k^l:b^k^l},n=function(a,c,g,h,k,l,b){a=m(a,m(m(c&g|~c&h,k),b));return m(a<<l|a>>>32-l,c)},p=function(a,c,g,h,k,l,b){a=m(a,m(m(c&h|g&~h,k),b));return m(a<<l|a>>>32-l,c)},q=function(a,c,g,h,k,l,b){a=m(a,m(m(c^g^h,k),b));return m(a<<l|a>>>32-l,c)},r=function(a,c,g,h,k,l,b){a=m(a,m(m(g^(c|~h),k),b));return m(a<<l|a>>>32-l,c)},t=function(a){var c="",g="",h;for(h=0;3>=h;h++)g=a>>>8*h&255,g="0"+g.toString(16),c+=g.substr(g.length-2,2);return c};u.extend({md5:function(a){var c=[],g,h,k,l,b,d,e,f,c=a.replace(/\x0d\x0a/g,"\n");a="";for(g=0;g<c.length;g++)h=c.charCodeAt(g),128>h?a+=String.fromCharCode(h):(127<h&&2048>h?a+=String.fromCharCode(h>>6|192):(a+=String.fromCharCode(h>>12|224),a+=String.fromCharCode(h>>6&63|128)),a+=String.fromCharCode(h&63|128));c=a;a=c.length;g=a+8;h=16*((g-g%64)/64+1);k=Array(h-1);for(b=0;b<a;)g=(b-b%4)/4,l=b%4*8,k[g]|=c.charCodeAt(b)<<l,b++;g=(b-b%4)/4;k[g]|=128<<b%4*8;k[h-2]=a<<3;k[h-1]=a>>>29;c=k;b=1732584193;d=4023233417;e=2562383102;f=271733878;for(a=0;a<c.length;a+=16)g=b,h=d,k=e,l=f,b=n(b,d,e,f,c[a+0],7,3614090360),f=n(f,b,d,e,c[a+1],12,3905402710),e=n(e,f,b,d,c[a+2],17,606105819),d=n(d,e,f,b,c[a+3],22,3250441966),b=n(b,d,e,f,c[a+4],7,4118548399),f=n(f,b,d,e,c[a+5],12,1200080426),e=n(e,f,b,d,c[a+6],17,2821735955),d=n(d,e,f,b,c[a+7],22,4249261313),b=n(b,d,e,f,c[a+8],7,1770035416),f=n(f,b,d,e,c[a+9],12,2336552879),e=n(e,f,b,d,c[a+10],17,4294925233),d=n(d,e,f,b,c[a+11],22,2304563134),b=n(b,d,e,f,c[a+12],7,1804603682),f=n(f,b,d,e,c[a+13],12,4254626195),e=n(e,f,b,d,c[a+14],17,2792965006),d=n(d,e,f,b,c[a+15],22,1236535329),b=p(b,d,e,f,c[a+1],5,4129170786),f=p(f,b,d,e,c[a+6],9,3225465664),e=p(e,f,b,d,c[a+11],14,643717713),d=p(d,e,f,b,c[a+0],20,3921069994),b=p(b,d,e,f,c[a+5],5,3593408605),f=p(f,b,d,e,c[a+10],9,38016083),e=p(e,f,b,d,c[a+15],14,3634488961),d=p(d,e,f,b,c[a+4],20,3889429448),b=p(b,d,e,f,c[a+9],5,568446438),f=p(f,b,d,e,c[a+14],9,3275163606),e=p(e,f,b,d,c[a+3],14,4107603335),d=p(d,e,f,b,c[a+8],20,1163531501),b=p(b,d,e,f,c[a+13],5,2850285829),f=p(f,b,d,e,c[a+2],9,4243563512),e=p(e,f,b,d,c[a+7],14,1735328473),d=p(d,e,f,b,c[a+12],20,2368359562),b=q(b,d,e,f,c[a+5],4,4294588738),f=q(f,b,d,e,c[a+8],11,2272392833),e=q(e,f,b,d,c[a+11],16,1839030562),d=q(d,e,f,b,c[a+14],23,4259657740),b=q(b,d,e,f,c[a+1],4,2763975236),f=q(f,b,d,e,c[a+4],11,1272893353),e=q(e,f,b,d,c[a+7],16,4139469664),d=q(d,e,f,b,c[a+10],23,3200236656),b=q(b,d,e,f,c[a+13],4,681279174),f=q(f,b,d,e,c[a+0],11,3936430074),e=q(e,f,b,d,c[a+3],16,3572445317),d=q(d,e,f,b,c[a+6],23,76029189),b=q(b,d,e,f,c[a+9],4,3654602809),f=q(f,b,d,e,c[a+12],11,3873151461),e=q(e,f,b,d,c[a+15],16,530742520),d=q(d,e,f,b,c[a+2],23,3299628645),b=r(b,d,e,f,c[a+0],6,4096336452),f=r(f,b,d,e,c[a+7],10,1126891415),e=r(e,f,b,d,c[a+14],15,2878612391),d=r(d,e,f,b,c[a+5],21,4237533241),b=r(b,d,e,f,c[a+12],6,1700485571),f=r(f,b,d,e,c[a+3],10,2399980690),e=r(e,f,b,d,c[a+10],15,4293915773),d=r(d,e,f,b,c[a+1],21,2240044497),b=r(b,d,e,f,c[a+8],6,1873313359),f=r(f,b,d,e,c[a+15],10,4264355552),e=r(e,f,b,d,c[a+6],15,2734768916),d=r(d,e,f,b,c[a+13],21,1309151649),b=r(b,d,e,f,c[a+4],6,4149444226),f=r(f,b,d,e,c[a+11],10,3174756917),e=r(e,f,b,d,c[a+2],15,718787259),d=r(d,e,f,b,c[a+9],21,3951481745),b=m(b,g),d=m(d,h),e=m(e,k),f=m(f,l);return(t(b)+t(d)+t(e)+t(f)).toLowerCase()}})})(jQuery);
//w/cropbox/cropbox.min.js
(function(e){"function"===typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){var k=function(c,b){b=b||e(c.imageBox);var a={state:{},ratio:1,options:c,imageBox:b,thumbBox:b.find(c.thumbBox),spinner:b.find(c.spinner),image:new Image,getDataURL:function(){var a=this.thumbBox.width(),m=this.thumbBox.height(),d=document.createElement("canvas"),f=b.css("background-position").split(" "),c=b.css("background-size").split(" "),e=parseInt(f[0])-b.width()/2+a/2,f=parseInt(f[1])-b.height()/2+m/2,g=parseInt(c[0]),c=parseInt(c[1]),h=parseInt(this.image.height),k=parseInt(this.image.width);d.width=a;d.height=m;d.getContext("2d").drawImage(this.image,0,0,k,h,e,f,g,c);return d.toDataURL("image/png")},getBlob:function(){for(var a=this.getDataURL().replace("data:image/png;base64,",""),a=atob(a),b=[],d=0;d<a.length;d++)b.push(a.charCodeAt(d));return new Blob([new Uint8Array(b)],{type:"image/png"})},zoomIn:function(){this.ratio*=1.1;g()},zoomOut:function(){this.ratio*=.9;g()}},g=function(){var l=parseInt(a.image.width)*a.ratio,c=parseInt(a.image.height)*a.ratio,d=(b.width()-l)/2,f=(b.height()-c)/2;b.css({"background-image":"url("+a.image.src+")","background-size":l+"px "+c+"px","background-position":d+"px "+f+"px","background-repeat":"no-repeat"})},k=function(b){b.stopImmediatePropagation();a.state.dragable=!0;a.state.mouseX=b.clientX;a.state.mouseY=b.clientY},n=function(c){c.stopImmediatePropagation();if(a.state.dragable){var e=c.clientX-a.state.mouseX,d=c.clientY-a.state.mouseY,f=b.css("background-position").split(" "),e=e+parseInt(f[0]),d=d+parseInt(f[1]);b.css("background-position",e+"px "+d+"px");a.state.mouseX=c.clientX;a.state.mouseY=c.clientY}},h=function(b){b.stopImmediatePropagation();a.state.dragable=!1},p=function(b){0<b.originalEvent.wheelDelta||0>b.originalEvent.detail?a.ratio*=1.1:a.ratio*=.9;g()};a.spinner.show();a.image.onload=function(){a.spinner.hide();a.ratio=b.width()/parseInt(a.image.width);g();b.bind("mousedown",k);b.bind("mousemove",n);e(window).bind("mouseup",h);b.bind("mouseup",h);b.bind("mousewheel DOMMouseScroll",p)};a.image.src=c.imgSrc;b.on("remove",function(){e(window).unbind("mouseup",h)});return a};jQuery.fn.cropbox=function(c){return new k(c,this)}});

//mobileFix.mini.js
function JPEGEncoder(l){var o=this;var s=Math.round;var k=Math.floor;var O=new Array(64);var K=new Array(64);var d=new Array(64);var Z=new Array(64);var u;var h;var G;var T;var n=new Array(65535);var m=new Array(65535);var P=new Array(64);var S=new Array(64);var j=[];var t=0;var a=7;var A=new Array(64);var f=new Array(64);var U=new Array(64);var e=new Array(256);var C=new Array(2048);var x;var i=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];var g=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];var c=[0,1,2,3,4,5,6,7,8,9,10,11];var w=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125];var E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250];var v=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];var Y=[0,1,2,3,4,5,6,7,8,9,10,11];var J=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119];var B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(ag){var af=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];for(var ae=0;ae<64;ae++){var aj=k((af[ae]*ag+50)/100);if(aj<1){aj=1}else{if(aj>255){aj=255}}O[i[ae]]=aj}var ah=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(var ad=0;ad<64;ad++){var ai=k((ah[ad]*ag+50)/100);if(ai<1){ai=1}else{if(ai>255){ai=255}}K[i[ad]]=ai}var ac=[1,1.387039845,1.306562965,1.175875602,1,0.785694958,0.5411961,0.275899379];var ab=0;for(var ak=0;ak<8;ak++){for(var aa=0;aa<8;aa++){d[ab]=(1/(O[i[ab]]*ac[ak]*ac[aa]*8));Z[ab]=(1/(K[i[ab]]*ac[ak]*ac[aa]*8));ab++}}}function q(ae,aa){var ad=0;var ag=0;var af=new Array();for(var ab=1;ab<=16;ab++){for(var ac=1;ac<=ae[ab];ac++){af[aa[ag]]=[];af[aa[ag]][0]=ad;af[aa[ag]][1]=ab;ag++;ad++}ad*=2}return af}function W(){u=q(g,c);h=q(v,Y);G=q(w,E);T=q(J,B)}function z(){var ac=1;var ab=2;for(var aa=1;aa<=15;aa++){for(var ad=ac;ad<ab;ad++){m[32767+ad]=aa;n[32767+ad]=[];n[32767+ad][1]=aa;n[32767+ad][0]=ad}for(var ae=-(ab-1);ae<=-ac;ae++){m[32767+ae]=aa;n[32767+ae]=[];n[32767+ae][1]=aa;n[32767+ae][0]=ab-1+ae}ac<<=1;ab<<=1}}function V(){for(var aa=0;aa<256;aa++){C[aa]=19595*aa;C[(aa+256)>>0]=38470*aa;C[(aa+512)>>0]=7471*aa+32768;C[(aa+768)>>0]=-11059*aa;C[(aa+1024)>>0]=-21709*aa;C[(aa+1280)>>0]=32768*aa+8421375;C[(aa+1536)>>0]=-27439*aa;C[(aa+1792)>>0]=-5329*aa}}function X(aa){var ac=aa[0];var ab=aa[1]-1;while(ab>=0){if(ac&(1<<ab)){t|=(1<<a)}ab--;a--;if(a<0){if(t==255){F(255);F(0)}else{F(t)}a=7;t=0}}}function F(aa){j.push(e[aa])}function p(aa){F((aa>>8)&255);F((aa)&255)}function N(aZ,ap){var aL,aK,aJ,aI,aH,aD,aC,aB;var aN=0;var aR;const aq=8;const ai=64;for(aR=0;aR<aq;++aR){aL=aZ[aN];aK=aZ[aN+1];aJ=aZ[aN+2];aI=aZ[aN+3];aH=aZ[aN+4];aD=aZ[aN+5];aC=aZ[aN+6];aB=aZ[aN+7];var aY=aL+aB;var aO=aL-aB;var aX=aK+aC;var aP=aK-aC;var aU=aJ+aD;var aQ=aJ-aD;var aT=aI+aH;var aS=aI-aH;var an=aY+aT;var ak=aY-aT;var am=aX+aU;var al=aX-aU;aZ[aN]=an+am;aZ[aN+4]=an-am;var ax=(al+ak)*0.707106781;aZ[aN+2]=ak+ax;aZ[aN+6]=ak-ax;an=aS+aQ;am=aQ+aP;al=aP+aO;var at=(an-al)*0.382683433;var aw=0.5411961*an+at;var au=1.306562965*al+at;var av=am*0.707106781;var ah=aO+av;var ag=aO-av;aZ[aN+5]=ag+aw;aZ[aN+3]=ag-aw;aZ[aN+1]=ah+au;aZ[aN+7]=ah-au;aN+=8}aN=0;for(aR=0;aR<aq;++aR){aL=aZ[aN];aK=aZ[aN+8];aJ=aZ[aN+16];aI=aZ[aN+24];aH=aZ[aN+32];aD=aZ[aN+40];aC=aZ[aN+48];aB=aZ[aN+56];var ar=aL+aB;var aj=aL-aB;var az=aK+aC;var ae=aK-aC;var aG=aJ+aD;var ac=aJ-aD;var aW=aI+aH;var aa=aI-aH;var ao=ar+aW;var aV=ar-aW;var ay=az+aG;var aF=az-aG;aZ[aN]=ao+ay;aZ[aN+32]=ao-ay;var af=(aF+aV)*0.707106781;aZ[aN+16]=aV+af;aZ[aN+48]=aV-af;ao=aa+ac;ay=ac+ae;aF=ae+aj;var aM=(ao-aF)*0.382683433;var ad=0.5411961*ao+aM;var a1=1.306562965*aF+aM;var ab=ay*0.707106781;var a0=aj+ab;var aA=aj-ab;aZ[aN+40]=aA+ad;aZ[aN+24]=aA-ad;aZ[aN+8]=a0+a1;aZ[aN+56]=a0-a1;aN++}var aE;for(aR=0;aR<ai;++aR){aE=aZ[aR]*ap[aR];P[aR]=(aE>0)?((aE+0.5)|0):((aE-0.5)|0)}return P}function b(){p(65504);p(16);F(74);F(70);F(73);F(70);F(0);F(1);F(1);F(0);p(1);p(1);F(0);F(0)}function r(aa,ab){p(65472);p(17);F(8);p(ab);p(aa);F(3);F(1);F(17);F(0);F(2);F(17);F(1);F(3);F(17);F(1)}function D(){p(65499);p(132);F(0);for(var ab=0;ab<64;ab++){F(O[ab])}F(1);for(var aa=0;aa<64;aa++){F(K[aa])}}function H(){p(65476);p(418);F(0);for(var ae=0;ae<16;ae++){F(g[ae+1])}for(var ad=0;ad<=11;ad++){F(c[ad])}F(16);for(var ac=0;ac<16;ac++){F(w[ac+1])}for(var ab=0;ab<=161;ab++){F(E[ab])}F(1);for(var aa=0;aa<16;aa++){F(v[aa+1])}for(var ah=0;ah<=11;ah++){F(Y[ah])}F(17);for(var ag=0;ag<16;ag++){F(J[ag+1])}for(var af=0;af<=161;af++){F(B[af])}}function I(){p(65498);p(12);F(3);F(1);F(0);F(2);F(17);F(3);F(17);F(0);F(63);F(0)}function L(ad,aa,al,at,ap){var ag=ap[0];var ab=ap[240];var ac;const ar=16;const ai=63;const ah=64;var aq=N(ad,aa);for(var am=0;am<ah;++am){S[i[am]]=aq[am]}var an=S[0]-al;al=S[0];if(an==0){X(at[0])}else{ac=32767+an;X(at[m[ac]]);X(n[ac])}var ae=63;for(;(ae>0)&&(S[ae]==0);ae--){}if(ae==0){X(ag);return al}var ao=1;var au;while(ao<=ae){var ak=ao;for(;(S[ao]==0)&&(ao<=ae);++ao){}var aj=ao-ak;if(aj>=ar){au=aj>>4;for(var af=1;af<=au;++af){X(ab)}aj=aj&15}ac=32767+S[ao];X(ap[(aj<<4)+m[ac]]);X(n[ac]);ao++}if(ae!=ai){X(ag)}return al}function y(){var ab=String.fromCharCode;for(var aa=0;aa<256;aa++){e[aa]=ab(aa)}}this.encode=function(an,aj,aB){var aa=new Date().getTime();if(aj){R(aj)}j=new Array();t=0;a=7;p(65496);b();D();r(an.width,an.height);H();I();var al=0;var aq=0;var ao=0;t=0;a=7;this.encode.displayName="_encode_";var at=an.data;var ar=an.width;var aA=an.height;var ay=ar*4;var ai=ar*3;var ah,ag=0;var am,ax,az;var ab,ap,ac,af,ae;while(ag<aA){ah=0;while(ah<ay){ab=ay*ag+ah;ap=ab;ac=-1;af=0;for(ae=0;ae<64;ae++){af=ae>>3;ac=(ae&7)*4;ap=ab+(af*ay)+ac;if(ag+af>=aA){ap-=(ay*(ag+1+af-aA))}if(ah+ac>=ay){ap-=((ah+ac)-ay+4)}am=at[ap++];ax=at[ap++];az=at[ap++];A[ae]=((C[am]+C[(ax+256)>>0]+C[(az+512)>>0])>>16)-128;f[ae]=((C[(am+768)>>0]+C[(ax+1024)>>0]+C[(az+1280)>>0])>>16)-128;U[ae]=((C[(am+1280)>>0]+C[(ax+1536)>>0]+C[(az+1792)>>0])>>16)-128}al=L(A,d,al,u,G);aq=L(f,Z,aq,h,T);ao=L(U,Z,ao,h,T);ah+=32}ag+=8}if(a>=0){var aw=[];aw[1]=a+1;aw[0]=(1<<(a+1))-1;X(aw)}p(65497);if(aB){var av=j.length;var aC=new Uint8Array(av);for(var au=0;au<av;au++){aC[au]=j[au].charCodeAt()}j=[];var ak=new Date().getTime()-aa;console.log("Encoding time: "+ak+"ms");return aC}var ad="data:image/jpeg;base64,"+btoa(j.join(""));j=[];var ak=new Date().getTime()-aa;console.log("Encoding time: "+ak+"ms");return ad};function R(ab){if(ab<=0){ab=1}if(ab>100){ab=100}if(x==ab){return}var aa=0;if(ab<50){aa=Math.floor(5000/ab)}else{aa=Math.floor(200-ab*2)}M(aa);x=ab;console.log("Quality set to: "+ab+"%")}function Q(){var aa=new Date().getTime();if(!l){l=50}y();W();z();V();R(l);var ab=new Date().getTime()-aa;console.log("Initialization "+ab+"ms")}Q()};
/* Mega pixel image for IOS7以下 大于2M图片变形 */
(function(){function c(j){var i=j.naturalWidth,l=j.naturalHeight;if(i*l>1024*1024){var k=document.createElement("canvas");k.width=k.height=1;var h=k.getContext("2d");h.drawImage(j,-i+1,0);return h.getImageData(0,0,1,1).data[3]===0}else{return false}}function e(j,h,r){var l=document.createElement("canvas");l.width=1;l.height=r;var q=l.getContext("2d");q.drawImage(j,0,0);var k=q.getImageData(0,0,1,r).data;var o=0;var m=r;var p=r;while(p>o){var i=k[(p-1)*4+3];if(i===0){m=p}else{o=p}p=(m+o)>>1}var n=(p/r);return(n===0)?1:n}function g(h,j,k){var i=document.createElement("canvas");d(h,i,j,k);return i.toDataURL("image/jpeg",j.quality||0.8)}function d(A,m,k,h){var j=A.naturalWidth,r=A.naturalHeight;if(!(j+r)){return}var u=k.width,z=k.height;var v=m.getContext("2d");v.save();b(m,v,u,z,k.orientation);var n=c(A);if(n){j/=2;r/=2}var y=1024;var i=document.createElement("canvas");i.width=i.height=y;var l=i.getContext("2d");var w=h?e(A,j,r):1;var q=Math.ceil(y*u/j);var x=Math.ceil(y*z/r/w);var s=0;var o=0;while(s<r){var t=0;var p=0;while(t<j){l.clearRect(0,0,y,y);l.drawImage(A,-t,-s);v.drawImage(i,0,0,y,y,p,o,q,x);t+=y;p+=q}s+=y;o+=x}v.restore();i=l=null}function b(i,h,k,l,j){switch(j){case 5:case 6:case 7:case 8:i.width=l;i.height=k;break;default:i.width=k;i.height=l}switch(j){case 2:h.translate(k,0);h.scale(-1,1);break;case 3:h.translate(k,l);h.rotate(Math.PI);break;case 4:h.translate(0,l);h.scale(1,-1);break;case 5:h.rotate(0.5*Math.PI);h.scale(1,-1);break;case 6:h.rotate(0.5*Math.PI);h.translate(0,-l);break;case 7:h.rotate(0.5*Math.PI);h.translate(k,-l);h.scale(-1,1);break;case 8:h.rotate(-0.5*Math.PI);h.translate(-k,0);break;default:break}}var a=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;function f(j){if(window.Blob&&j instanceof Blob){if(!a){throw Error("No createObjectURL function found to create blob url")}var h=new Image();h.src=a.createObjectURL(j);this.blob=j;j=h}if(!j.naturalWidth&&!j.naturalHeight){var i=this;j.onload=j.onerror=function(){var l=i.imageLoadListeners;if(l){i.imageLoadListeners=null;for(var m=0,k=l.length;m<k;m++){l[m]()}}};this.imageLoadListeners=[]}this.srcImage=j}f.prototype.render=function(j,o,q){if(this.imageLoadListeners){var n=this;this.imageLoadListeners.push(function(){n.render(j,o,q)});return}o=o||{};var u=this.srcImage.naturalWidth,v=this.srcImage.naturalHeight,i=o.width,p=o.height,s=o.maxWidth,r=o.maxHeight,t=!this.blob||this.blob.type==="image/jpeg";if(i&&!p){p=(v*i/u)<<0}else{if(p&&!i){i=(u*p/v)<<0}else{i=u;p=v}}if(s&&i>s){i=s;p=(v*i/u)<<0}if(r&&p>r){p=r;i=(u*p/v)<<0}var h={width:i,height:p};for(var l in o){h[l]=o[l]}var m=j.tagName.toLowerCase();if(m==="img"){j.src=g(this.srcImage,h,t)}else{if(m==="canvas"){d(this.srcImage,j,h,t)}}if(typeof this.onrender==="function"){this.onrender(j)}if(q){q()}if(this.blob){this.blob=null;a.revokeObjectURL(this.srcImage.src)}};if(typeof define==="function"&&define.amd){define([],function(){return f})}else{this.MegaPixImage=f}})();
//exif.js
(function(y){Array.prototype.map||(Array.prototype.map=function(h,v){var q,r,m;if(null==this)throw new TypeError(" this is null or not defined");var t=Object(this),b=t.length>>>0;if("function"!=typeof h)throw new TypeError(h+" is not a function");v&&(q=v);r=Array(b);for(m=0;b>m;){var u,w;m in t&&(u=t[m],w=h.call(q,u,m,t),r[m]=w);m++}return r});var x=y.detect=function(){var h=function(){};h.parsers=["device_parsers","browser_parsers","os_parsers","mobile_os_families","mobile_browser_families"];h.types=["browser","os","device"];h.regexes={browser_parsers:[{regex:"^(Opera)/(\\d+)\\.(\\d+) \\(Nintendo Wii",family_replacement:"Wii",manufacturer:"Nintendo"},{regex:"(SeaMonkey|Camino)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Camino",other:!0},{regex:"(Pale[Mm]oon)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Pale Moon (Firefox Variant)",other:!0},{regex:"(Fennec)/(\\d+)\\.(\\d+)\\.?([ab]?\\d+[a-z]*)",family_replacement:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)(pre)",family_replacment:"Firefox Mobile"},{regex:"(Fennec)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"Mobile.*(Firefox)/(\\d+)\\.(\\d+)",family_replacement:"Firefox Mobile"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?)",family_replacement:"Firefox ($1)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(a\\d+[a-z]*)",family_replacement:"Firefox Alpha"},{regex:"(Firefox)-(?:\\d+\\.\\d+)?/(\\d+)\\.(\\d+)(b\\d+[a-z]*)",family_replacement:"Firefox Beta"},{regex:"(Namoroka|Shiretoko|Minefield)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?",family_replacement:"Firefox ($1)"},{regex:"(Firefox).*Tablet browser (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"MicroB",tablet:!0},{regex:"(MozillaDeveloperPreview)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)?"},{regex:"(Flock)/(\\d+)\\.(\\d+)(b\\d+?)",family_replacement:"Flock",other:!0},{regex:"(RockMelt)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Rockmelt",other:!0},{regex:"(Navigator)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(Navigator)/(\\d+)\\.(\\d+)([ab]\\d+)",family_replacement:"Netscape"},{regex:"(Netscape6)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Netscape"},{regex:"(MyIBrow)/(\\d+)\\.(\\d+)",family_replacement:"My Internet Browser",other:!0},{regex:"(Opera Tablet).*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera Tablet",tablet:!0},{regex:"(Opera)/.+Opera Mobi.+Version/(\\d+)\\.(\\d+)",family_replacement:"Opera Mobile"},{regex:"Opera Mobi",family_replacement:"Opera Mobile"},{regex:"(Opera Mini)/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera Mini)/att/(\\d+)\\.(\\d+)",family_replacement:"Opera Mini"},{regex:"(Opera)/9.80.*Version/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",family_replacement:"Opera"},{regex:"(webOSBrowser)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(webOS)/(\\d+)\\.(\\d+)",family_replacement:"webOS"},{regex:"(wOSBrowser).+TouchPad/(\\d+)\\.(\\d+)",family_replacement:"webOS TouchPad"},{regex:"(luakit)",family_replacement:"LuaKit",other:!0},{regex:"(Lightning)/(\\d+)\\.(\\d+)([ab]?\\d+[a-z]*)",family_replacement:"Lightning",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+(?:pre)?) \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"(Firefox)/(\\d+)\\.(\\d+)([ab]\\d+[a-z]*)? \\(Swiftfox\\)",family_replacement:"Swiftfox",other:!0},{regex:"rekonq",family_replacement:"Rekonq",other:!0},{regex:"(conkeror|Conkeror)/(\\d+)\\.(\\d+)\\.?(\\d+)?",family_replacement:"Conkeror",other:!0},{regex:"(konqueror)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Konqueror",other:!0},{regex:"(WeTab)-Browser",family_replacement:"WeTab",other:!0},{regex:"(Comodo_Dragon)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Comodo Dragon",other:!0},{regex:"(YottaaMonitor)",family_replacement:"Yottaa Monitor",other:!0},{regex:"(Kindle)/(\\d+)\\.(\\d+)",family_replacement:"Kindle"},{regex:"(Symphony) (\\d+).(\\d+)",family_replacement:"Symphony",other:!0},{regex:"Minimo",family_replacement:"Minimo",other:!0},{regex:"(CrMo)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile"},{regex:"(CriOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Mobile iOS"},{regex:"(Chrome)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+) Mobile",family_replacement:"Chrome Mobile"},{regex:"(chromeframe)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Chrome Frame"},{regex:"(UC Browser)(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"UC Browser",other:!0},{regex:"(SLP Browser)/(\\d+)\\.(\\d+)",family_replacement:"Tizen Browser",other:!0},{regex:"(Epiphany)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"Epiphany",other:!0},{regex:"(SE 2\\.X) MetaSr (\\d+)\\.(\\d+)",family_replacement:"Sogou Explorer",other:!0},{regex:"(Pingdom.com_bot_version_)(\\d+)\\.(\\d+)",family_replacement:"PingdomBot",other:!0},{regex:"(facebookexternalhit)/(\\d+)\\.(\\d+)",family_replacement:"FacebookBot"},{regex:"(Twitterbot)/(\\d+)\\.(\\d+)",family_replacement:"TwitterBot"},{regex:"(AdobeAIR|Chromium|FireWeb|Jasmine|ANTGalio|Midori|Fresco|Lobo|PaleMoon|Maxthon|Lynx|OmniWeb|Dillo|Camino|Demeter|Fluid|Fennec|Shiira|Sunrise|Chrome|Flock|Netscape|Lunascape|WebPilot|NetFront|Netfront|Konqueror|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|Opera Mini|iCab|NetNewsWire|ThunderBrowse|Iron|Iris|UP\\.Browser|Bunjaloo|Google Earth|Raven for Mac)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Bolt|Jasmine|IceCat|Skyfire|Midori|Maxthon|Lynx|Arora|IBrowse|Dillo|Camino|Shiira|Fennec|Phoenix|Chrome|Flock|Netscape|Lunascape|Epiphany|WebPilot|Opera Mini|Opera|NetFront|Netfront|Konqueror|Googlebot|SeaMonkey|Kazehakase|Vienna|Iceape|Iceweasel|IceWeasel|Iron|K-Meleon|Sleipnir|Galeon|GranParadiso|iCab|NetNewsWire|Iron|Space Bison|Stainless|Orca|Dolfin|BOLT|Minimo|Tizen Browser|Polaris)/(\\d+)\\.(\\d+)"},{regex:"(iRider|Crazy Browser|SkipStone|iCab|Lunascape|Sleipnir|Maemo Browser) (\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(iCab|Lunascape|Opera|Android|Jasmine|Polaris|BREW) (\\d+)\\.(\\d+)\\.?(\\d+)?"},{regex:"(Android) Donut",v2_replacement:"2",v1_replacement:"1"},{regex:"(Android) Eclair",v2_replacement:"1",v1_replacement:"2"},{regex:"(Android) Froyo",v2_replacement:"2",v1_replacement:"2"},{regex:"(Android) Gingerbread",v2_replacement:"3",v1_replacement:"2"},{regex:"(Android) Honeycomb",v1_replacement:"3"},{regex:"(IEMobile)[ /](\\d+)\\.(\\d+)",family_replacement:"IE Mobile"},{regex:"(MSIE) (\\d+)\\.(\\d+).*XBLWP7",family_replacement:"IE Large Screen"},{regex:"(Firefox)/(\\d+)\\.(\\d+)\\.(\\d+)"},{regex:"(Firefox)/(\\d+)\\.(\\d+)(pre|[ab]\\d+[a-z]*)?"},{regex:"(Obigo)InternetBrowser",other:!0},{regex:"(Obigo)\\-Browser",other:!0},{regex:"(Obigo|OBIGO)[^\\d]*(\\d+)(?:.(\\d+))?",other:!0},{regex:"(MAXTHON|Maxthon) (\\d+)\\.(\\d+)",family_replacement:"Maxthon",other:!0},{regex:"(Maxthon|MyIE2|Uzbl|Shiira)",v1_replacement:"0",other:!0},{regex:"(PLAYSTATION) (\\d+)",family_replacement:"PlayStation",manufacturer:"Sony"},{regex:"(PlayStation Portable)[^\\d]+(\\d+).(\\d+)",manufacturer:"Sony"},{regex:"(BrowseX) \\((\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(POLARIS)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(Embider)/(\\d+)\\.(\\d+)",family_replacement:"Polaris",other:!0},{regex:"(BonEcho)/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Bon Echo",other:!0},{regex:"(iPod).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPod)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPhone)",family_replacement:"Mobile Safari",manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad).*Version/(\\d+)\\.(\\d+)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(iPad)",family_replacement:"Mobile Safari",tablet:!0,manufacturer:"Apple"},{regex:"(AvantGo) (\\d+).(\\d+)",other:!0},{regex:"(Avant)",v1_replacement:"1",other:!0},{regex:"^(Nokia)",family_replacement:"Nokia Services (WAP) Browser",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+).(\\d+)",manufacturer:"Nokia"},{regex:"(NokiaBrowser)/(\\d+)\\.(\\d+)",manufacturer:"Nokia"},{regex:"(BrowserNG)/(\\d+)\\.(\\d+).(\\d+)",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/5\\.0",v2_replacement:"0",v1_replacement:"7",family_replacement:"NokiaBrowser",manufacturer:"Nokia"},{regex:"(Series60)/(\\d+)\\.(\\d+)",family_replacement:"Nokia OSS Browser",manufacturer:"Nokia"},{regex:"(S40OviBrowser)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Nokia Series 40 Ovi Browser",manufacturer:"Nokia"},{regex:"(Nokia)[EN]?(\\d+)",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS (\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",tablet:!0,manufacturer:"Nokia"},{regex:"(Black[bB]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)",family_replacement:"Blackberry WebKit",manufacturer:"RIM"},{regex:"(Black[bB]erry)\\s?(\\d+)",family_replacement:"Blackberry",manufacturer:"RIM"},{regex:"(OmniWeb)/v(\\d+)\\.(\\d+)",other:!0},{regex:"(Blazer)/(\\d+)\\.(\\d+)",family_replacement:"Palm Blazer",manufacturer:"Palm"},{regex:"(Pre)/(\\d+)\\.(\\d+)",family_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Links) \\((\\d+)\\.(\\d+)",other:!0},{regex:"(QtWeb) Internet Browser/(\\d+)\\.(\\d+)",other:!0},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",other:!0,tablet:!0},{regex:"(AppleWebKit)/(\\d+)\\.?(\\d+)?\\+ .* Version/\\d+\\.\\d+.\\d+ Safari/",family_replacement:"WebKit Nightly"},{regex:"(Version)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?.*Safari/",family_replacement:"Safari"},{regex:"(Safari)/\\d+"},{regex:"(OLPC)/Update(\\d+)\\.(\\d+)",other:!0},{regex:"(OLPC)/Update()\\.(\\d+)",v1_replacement:"0",other:!0},{regex:"(SEMC\\-Browser)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Teleca)",family_replacement:"Teleca Browser",other:!0},{regex:"Trident(.*)rv.(\\d+)\\.(\\d+)",family_replacement:"IE"},{regex:"(MSIE) (\\d+)\\.(\\d+)",family_replacement:"IE"}],os_parsers:[{regex:"(Android) (\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android)\\-(\\d+)\\.(\\d+)(?:[.\\-]([a-z0-9]+))?"},{regex:"(Android) Donut",os_v2_replacement:"2",os_v1_replacement:"1"},{regex:"(Android) Eclair",os_v2_replacement:"1",os_v1_replacement:"2"},{regex:"(Android) Froyo",os_v2_replacement:"2",os_v1_replacement:"2"},{regex:"(Android) Gingerbread",os_v2_replacement:"3",os_v1_replacement:"2"},{regex:"(Android) Honeycomb",os_v1_replacement:"3"},{regex:"(Silk-Accelerated\x3d[a-z]{4,5})",os_replacement:"Android"},{regex:"(Windows Phone 6\\.5)"},{regex:"(Windows (?:NT 5\\.2|NT 5\\.1))",os_replacement:"Windows XP"},{regex:"(XBLWP7)",os_replacement:"Windows Phone OS"},{regex:"(Windows NT 6\\.1)",os_replacement:"Windows 7"},{regex:"(Windows NT 6\\.0)",os_replacement:"Windows Vista"},{regex:"(Windows 98|Windows XP|Windows ME|Windows 95|Windows CE|Windows 7|Windows NT 4\\.0|Windows Vista|Windows 2000)"},{regex:"(Windows NT 6\\.2)",os_replacement:"Windows 8"},{regex:"(Windows Phone 8)",os_replacement:"Windows Phone 8"},{regex:"(Windows NT 5\\.0)",os_replacement:"Windows 2000"},{regex:"(Windows Phone OS) (\\d+)\\.(\\d+)"},{regex:"(Windows ?Mobile)",os_replacement:"Windows Mobile"},{regex:"(WinNT4.0)",os_replacement:"Windows NT 4.0"},{regex:"(Win98)",os_replacement:"Windows 98"},{regex:"(Tizen)/(\\d+)\\.(\\d+)",other:!0},{regex:"(Mac OS X) (\\d+)[_.](\\d+)(?:[_.](\\d+))?",manufacturer:"Apple"},{regex:"(?:PPC|Intel) (Mac OS X)",manufacturer:"Apple"},{regex:"(CPU OS|iPhone OS) (\\d+)_(\\d+)(?:_(\\d+))?",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod); Opera",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(iPad); Opera",tablet:!0,manufacturer:"Apple"},{regex:"(iPhone|iPad|iPod).*Mac OS X.*Version/(\\d+)\\.(\\d+)",os_replacement:"iOS",manufacturer:"Apple"},{regex:"(CrOS) [a-z0-9_]+ (\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"Chrome OS"},{regex:"(Debian)-(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Linux Mint)(?:/(\\d+))?",other:!0},{regex:"(Mandriva)(?: Linux)?/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",other:!0},{regex:"(Symbian[Oo][Ss])/(\\d+)\\.(\\d+)",os_replacement:"Symbian OS"},{regex:"(Symbian/3).+NokiaBrowser/7\\.3",os_replacement:"Symbian^3 Anna"},{regex:"(Symbian/3).+NokiaBrowser/7\\.4",os_replacement:"Symbian^3 Belle"},{regex:"(Symbian/3)",os_replacement:"Symbian^3"},{regex:"(Series 60|SymbOS|S60)",os_replacement:"Symbian OS"},{regex:"(MeeGo)",other:!0},{regex:"Symbian [Oo][Ss]",os_replacement:"Symbian OS"},{regex:"(Black[Bb]erry)[0-9a-z]+/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(Black[Bb]erry).+Version/(\\d+)\\.(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"BlackBerry OS",manufacturer:"RIM"},{regex:"(RIM Tablet OS) (\\d+)\\.(\\d+)\\.(\\d+)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Play[Bb]ook)",os_replacement:"BlackBerry Tablet OS",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry)",os_replacement:"Blackberry OS",manufacturer:"RIM"},{regex:"(webOS|hpwOS)/(\\d+)\\.(\\d+)(?:\\.(\\d+))?",os_replacement:"webOS"},{regex:"(SUSE|Fedora|Red Hat|PCLinuxOS)/(\\d+)\\.(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(SUSE|Fedora|Red Hat|Puppy|PCLinuxOS|CentOS)/(\\d+)\\.(\\d+)\\.(\\d+)",other:!0},{regex:"(Ubuntu|Kindle|Bada|Lubuntu|BackTrack|Red Hat|Slackware)/(\\d+)\\.(\\d+)"},{regex:"(Windows|OpenBSD|FreeBSD|NetBSD|Ubuntu|Kubuntu|Android|Arch Linux|CentOS|WeTab|Slackware)"},{regex:"(Linux|BSD)",other:!0}],mobile_os_families:["Windows Phone 6.5","Windows CE","Symbian OS"],device_parsers:[{regex:"HTC ([A-Z][a-z0-9]+) Build",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Z][a-z0-9 ]+) \\d+\\.\\d+\\.\\d+\\.\\d+",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_Touch_([A-Za-z0-9]+)",device_replacement:"HTC Touch ($1)",manufacturer:"HTC"},{regex:"USCCHTC(\\d+)",device_replacement:"HTC $1 (US Cellular)",manufacturer:"HTC"},{regex:"Sprint APA(9292)",device_replacement:"HTC $1 (Sprint)",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+ [A-Z])",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC-([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC_([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"HTC ([A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(ADR[A-Za-z0-9]+)",device_replacement:"HTC $1",manufacturer:"HTC"},{regex:"(HTC)",manufacturer:"HTC"},{regex:"SonyEricsson([A-Za-z0-9]+)/",device_replacement:"Ericsson $1",other:!0,manufacturer:"Sony"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; WOWMobile (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\-update1\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\; [A-Za-z]{2}\\-[A-Za-z]{2}\\; (.+) Build"},{regex:"Android[\\- ][\\d]+\\.[\\d]+\\.[\\d]+; (.+) Build"},{regex:"NokiaN([0-9]+)",device_replacement:"Nokia N$1",manufacturer:"Nokia"},{regex:"Nokia([A-Za-z0-9\\v-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"NOKIA ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Nokia ([A-Za-z0-9\\-]+)",device_replacement:"Nokia $1",manufacturer:"Nokia"},{regex:"Lumia ([A-Za-z0-9\\-]+)",device_replacement:"Lumia $1",manufacturer:"Nokia"},{regex:"Symbian",device_replacement:"Nokia",manufacturer:"Nokia"},{regex:"(PlayBook).+RIM Tablet OS",device_replacement:"Blackberry Playbook",tablet:!0,manufacturer:"RIM"},{regex:"(Black[Bb]erry [0-9]+);",manufacturer:"RIM"},{regex:"Black[Bb]erry([0-9]+)",device_replacement:"BlackBerry $1",manufacturer:"RIM"},{regex:"(Pre)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pre",manufacturer:"Palm"},{regex:"(Pixi)/(\\d+)\\.(\\d+)",device_replacement:"Palm Pixi",manufacturer:"Palm"},{regex:"(Touchpad)/(\\d+)\\.(\\d+)",device_replacement:"HP Touchpad",manufacturer:"HP"},{regex:"HPiPAQ([A-Za-z0-9]+)/(\\d+).(\\d+)",device_replacement:"HP iPAQ $1",manufacturer:"HP"},{regex:"Palm([A-Za-z0-9]+)",device_replacement:"Palm $1",manufacturer:"Palm"},{regex:"Treo([A-Za-z0-9]+)",device_replacement:"Palm Treo $1",manufacturer:"Palm"},{regex:"webOS.*(P160UNA)/(\\d+).(\\d+)",device_replacement:"HP Veer",manufacturer:"HP"},{regex:"(Kindle Fire)",manufacturer:"Amazon"},{regex:"(Kindle)",manufacturer:"Amazon"},{regex:"(Silk)/(\\d+)\\.(\\d+)(?:\\.([0-9\\-]+))?",device_replacement:"Kindle Fire",tablet:!0,manufacturer:"Amazon"},{regex:"(iPad) Simulator;",manufacturer:"Apple"},{regex:"(iPad);",manufacturer:"Apple"},{regex:"(iPod);",manufacturer:"Apple"},{regex:"(iPhone) Simulator;",manufacturer:"Apple"},{regex:"(iPhone);",manufacturer:"Apple"},{regex:"Nexus\\ ([A-Za-z0-9\\-]+)",device_replacement:"Nexus $1"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"acer_([A-Za-z0-9]+)_",device_replacement:"Acer $1",manufacturer:"Acer"},{regex:"Amoi\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"AMOI\\-([A-Za-z0-9]+)",device_replacement:"Amoi $1",other:!0,manufacturer:"Amoi"},{regex:"Asus\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"ASUS\\-([A-Za-z0-9]+)",device_replacement:"Asus $1",manufacturer:"Asus"},{regex:"BIRD\\-([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD\\.([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"BIRD ([A-Za-z0-9]+)",device_replacement:"Bird $1",other:!0},{regex:"Dell ([A-Za-z0-9]+)",device_replacement:"Dell $1",manufacturer:"Dell"},{regex:"DoCoMo/2\\.0 ([A-Za-z0-9]+)",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\_W\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"([A-Za-z0-9]+)\\;FOMA",device_replacement:"DoCoMo $1",other:!0},{regex:"vodafone([A-Za-z0-9]+)",device_replacement:"Huawei Vodafone $1",other:!0},{regex:"i\\-mate ([A-Za-z0-9]+)",device_replacement:"i-mate $1",other:!0},{regex:"Kyocera\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"KWC\\-([A-Za-z0-9]+)",device_replacement:"Kyocera $1",other:!0},{regex:"Lenovo\\-([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Lenovo"},{regex:"Lenovo\\_([A-Za-z0-9]+)",device_replacement:"Lenovo $1",manufacturer:"Levovo"},{regex:"LG/([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE-LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE VX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG ([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE LG\\-AX([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LGE\\-([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"LG([A-Za-z0-9]+)",device_replacement:"LG $1",manufacturer:"LG"},{regex:"(KIN)\\.One (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(KIN)\\.Two (\\d+)\\.(\\d+)",device_replacement:"Microsoft $1"},{regex:"(Motorola)\\-([A-Za-z0-9]+)",manufacturer:"Motorola"},{regex:"MOTO\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"MOT\\-([A-Za-z0-9]+)",device_replacement:"Motorola $1",manufacturer:"Motorola"},{regex:"Philips([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"Philips ([A-Za-z0-9]+)",device_replacement:"Philips $1",manufacturer:"Philips"},{regex:"SAMSUNG-([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"SAMSUNG\\; ([A-Za-z0-9\\-]+)",device_replacement:"Samsung $1",manufacturer:"Samsung"},{regex:"Softbank/1\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"Softbank/2\\.0/([A-Za-z0-9]+)",device_replacement:"Softbank $1",other:!0},{regex:"(hiptop|avantgo|plucker|xiino|blazer|elaine|up.browser|up.link|mmp|smartphone|midp|wap|vodafone|o2|pocket|mobile|pda)",device_replacement:"Generic Smartphone"},{regex:"^(1207|3gso|4thp|501i|502i|503i|504i|505i|506i|6310|6590|770s|802s|a wa|acer|acs\\-|airn|alav|asus|attw|au\\-m|aur |aus |abac|acoo|aiko|alco|alca|amoi|anex|anny|anyw|aptu|arch|argo|bell|bird|bw\\-n|bw\\-u|beck|benq|bilb|blac|c55/|cdm\\-|chtm|capi|comp|cond|craw|dall|dbte|dc\\-s|dica|ds\\-d|ds12|dait|devi|dmob|doco|dopo|el49|erk0|esl8|ez40|ez60|ez70|ezos|ezze|elai|emul|eric|ezwa|fake|fly\\-|fly\\_|g\\-mo|g1 u|g560|gf\\-5|grun|gene|go.w|good|grad|hcit|hd\\-m|hd\\-p|hd\\-t|hei\\-|hp i|hpip|hs\\-c|htc |htc\\-|htca|htcg)",device_replacement:"Generic Feature Phone"},{regex:"^(htcp|htcs|htct|htc\\_|haie|hita|huaw|hutc|i\\-20|i\\-go|i\\-ma|i230|iac|iac\\-|iac/|ig01|im1k|inno|iris|jata|java|kddi|kgt|kgt/|kpt |kwc\\-|klon|lexi|lg g|lg\\-a|lg\\-b|lg\\-c|lg\\-d|lg\\-f|lg\\-g|lg\\-k|lg\\-l|lg\\-m|lg\\-o|lg\\-p|lg\\-s|lg\\-t|lg\\-u|lg\\-w|lg/k|lg/l|lg/u|lg50|lg54|lge\\-|lge/|lynx|leno|m1\\-w|m3ga|m50/|maui|mc01|mc21|mcca|medi|meri|mio8|mioa|mo01|mo02|mode|modo|mot |mot\\-|mt50|mtp1|mtv |mate|maxo|merc|mits|mobi|motv|mozz|n100|n101|n102|n202|n203|n300|n302|n500|n502|n505|n700|n701|n710|nec\\-|nem\\-|newg|neon)",device_replacement:"Generic Feature Phone"},{regex:"^(netf|noki|nzph|o2 x|o2\\-x|opwv|owg1|opti|oran|ot\\-s|p800|pand|pg\\-1|pg\\-2|pg\\-3|pg\\-6|pg\\-8|pg\\-c|pg13|phil|pn\\-2|pt\\-g|palm|pana|pire|pock|pose|psio|qa\\-a|qc\\-2|qc\\-3|qc\\-5|qc\\-7|qc07|qc12|qc21|qc32|qc60|qci\\-|qwap|qtek|r380|r600|raks|rim9|rove|s55/|sage|sams|sc01|sch\\-|scp\\-|sdk/|se47|sec\\-|sec0|sec1|semc|sgh\\-|shar|sie\\-|sk\\-0|sl45|slid|smb3|smt5|sp01|sph\\-|spv |spv\\-|sy01|samm|sany|sava|scoo|send|siem|smar|smit|soft|sony|t\\-mo|t218|t250|t600|t610|t618|tcl\\-|tdg\\-|telm|tim\\-|ts70|tsm\\-|tsm3|tsm5|tx\\-9|tagt)",device_replacement:"Generic Feature Phone"},{regex:"^(talk|teli|topl|tosh|up.b|upg1|utst|v400|v750|veri|vk\\-v|vk40|vk50|vk52|vk53|vm40|vx98|virg|vite|voda|vulc|w3c |w3c\\-|wapj|wapp|wapu|wapm|wig |wapi|wapr|wapv|wapy|wapa|waps|wapt|winc|winw|wonu|x700|xda2|xdag|yas\\-|your|zte\\-|zeto|aste|audi|avan|blaz|brew|brvw|bumb|ccwa|cell|cldc|cmd\\-|dang|eml2|fetc|hipt|http|ibro|idea|ikom|ipaq|jbro|jemu|jigs|keji|kyoc|kyok|libw|m\\-cr|midp|mmef|moto|mwbp|mywa|newt|nok6|o2im|pant|pdxg|play|pluc|port|prox|rozo|sama|seri|smal|symb|treo|upsi|vx52|vx53|vx60|vx61|vx70|vx80|vx81|vx83|vx85|wap\\-|webc|whit|wmlb|xda\\-|xda\\_)",device_replacement:"Generic Feature Phone"},{regex:"(bot|borg|google(^tv)|yahoo|slurp|msnbot|msrbot|openbot|archiver|netresearch|lycos|scooter|altavista|teoma|gigabot|baiduspider|blitzbot|oegp|charlotte|furlbot|http%20client|polybot|htdig|ichiro|mogimogi|larbin|pompos|scrubby|searchsight|seekbot|semanticdiscovery|silk|snappy|speedy|spider|voila|vortex|voyager|zao|zeal|fast\\-webcrawler|converacrawler|dataparksearch|findlinks)",device_replacement:"Spider"}],mobile_browser_families:"Firefox Mobile;Opera Mobile;Opera Mini;Mobile Safari;webOS;IE Mobile;Playstation Portable;Nokia;Blackberry;Palm;Silk;Android;Maemo;Obigo;Netfront;AvantGo;Teleca;SEMC-Browser;Bolt;Iris;UP.Browser;Symphony;Minimo;Bunjaloo;Jasmine;Dolfin;Polaris;BREW;Chrome Mobile;Chrome Mobile iOS;UC Browser;Tizen Browser".split(";")};h.families=function(){var d={};return h.types.map(function(g){d[g]=[]}),d}();var v=Array.prototype,q=(Object.prototype,Function.prototype,v.forEach);v.indexOf;var r=function(d,g){for(var b={},a=0;g.length>a&&!(b=g[a](d));a++);return b},m=function(d,g){t(d,function(d){t(g,function(a){delete d[a]})})},t=forEach=function(d,g,b){if(null!=d)if(q&&d.forEach===q)d.forEach(g,b);else if(d.length===+d.length)for(var a=0,c=d.length;c>a;a++)g.call(b,d[a],a,d);else for(a in d)_.has(d,a)&&g.call(b,d[a],a,d)},b=function(d){return!(!d||void 0===d||null==d)},u=function(d){var g="";return d=d||{},b(d)&&b(d.major)&&(g+=d.major,b(d.minor)&&(g+="."+d.minor,b(d.patch)&&(g+="."+d.patch))),g},w=function(d){d=d||{};var g=u(d);return g&&(g=" "+g),d&&b(d.family)?d.family+g:""};return h.parse=function(d){var g=function(a){return h.regexes[a+"_parsers"].map(function(c){var f=RegExp(c.regex),d=c[("browser"===a?"family":a)+"_replacement"],b=c.major_version_replacement;return function(a){a=a.match(f);if(!a)return null;var l={};return l.family=(d?d.replace("$1",a[1]):a[1])||"other",l.major=parseInt(b?b:a[2])||null,l.minor=a[3]?parseInt(a[3]):null,l.patch=a[4]?parseInt(a[4]):null,l.tablet=c.tablet,l.man=c.manufacturer||null,l}})},q=g("browser"),a=g("os"),g=g("device"),c=new function(){};c.source=d;c.browser=r(d,q);b(c.browser)?(c.browser.name=w(c.browser),c.browser.version=u(c.browser)):c.browser={};c.os=r(d,a);b(c.os)?(c.os.name=w(c.os),c.os.version=u(c.os)):c.os={};c.device=r(d,g);b(c.device)?(c.device.name=w(c.device),c.device.version=u(c.device)):c.device={tablet:!1,family:"Other"};var f={};return h.regexes.mobile_browser_families.map(function(a){f[a]=!0}),h.regexes.mobile_os_families.map(function(a){f[a]=!0}),c.device.type="Spider"===c.browser.family?"Spider":c.browser.tablet||c.os.tablet||c.device.tablet?"Tablet":f.hasOwnProperty(c.browser.family)?"Mobile":"Desktop",c.device.manufacturer=c.browser.man||c.os.man||c.device.man||null,m([c.browser,c.os,c.device],["tablet","man"]),c},h}();"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports.detect=x):y.detect=x;"function"==typeof define&&define.amd&&define(function(){return x})})(window);(function(){function y(a,c){c||a.match(/^data\:([^\;]+)\;base64,/mi);a=a.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var f=atob(a),d=f.length,e=new ArrayBuffer(d),k=new Uint8Array(e),p=0;p<d;p++)k[p]=f.charCodeAt(p);return e}function x(a,c){var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="blob";f.onload=function(a){200!=this.status&&0!==this.status||c(this.response)};f.send()}function h(a,c){function f(f){var k=v(f);a:{var e=new DataView(f);if(255!=e.getUint8(0)||216!=e.getUint8(1))f=!1;else{for(var d=2,l=f.byteLength;d<l;){var b=e,g=d;if(56===b.getUint8(g)&&66===b.getUint8(g+1)&&73===b.getUint8(g+2)&&77===b.getUint8(g+3)&&4===b.getUint8(g+4)&&4===b.getUint8(g+5)){b=e.getUint8(d+7);0!==b%2&&(b+=1);0===b&&(b=4);l=d+8+b;d=e.getUint16(d+6+b);e=l;f=new DataView(f);for(var l={},h=void 0,g=h=g=void 0,b=e;b<e+d;)28===f.getUint8(b)&&2===f.getUint8(b+1)&&(g=f.getUint8(b+2),g in z&&(h=f.getInt16(b+3),g=z[g],h=m(f,b+5,h),l.hasOwnProperty(g)?l[g]instanceof Array?l[g].push(h):l[g]=[l[g],h]:l[g]=h)),b++;f=l;break a}d++}f=void 0}}a.exifdata=k||{};a.iptcdata=f||{};c&&c.call(a)}if(a.src)if(/^data\:/i.test(a.src)){var d=y(a.src);f(d)}else if(/^blob\:/i.test(a.src)){var e=new FileReader;e.onload=function(a){f(a.target.result)};x(a.src,function(a){e.readAsArrayBuffer(a)})}else{var k=new XMLHttpRequest;k.onload=function(){if(200==this.status||0===this.status)f(k.response);else throw"Could not load image";k=null};k.open("GET",a.src,!0);k.responseType="arraybuffer";k.send(null)}else window.FileReader&&(a instanceof window.Blob||a instanceof window.File)&&(e=new FileReader,e.onload=function(a){f(a.target.result)},e.readAsArrayBuffer(a))}function v(a){var c=new DataView(a);if(255!=c.getUint8(0)||216!=c.getUint8(1))return!1;var f=2;a=a.byteLength;for(var d;f<a;){if(255!=c.getUint8(f))return!1;d=c.getUint8(f+1);if(225==d)return t(c,f+4,c.getUint16(f+2)-2);f+=2+c.getUint16(f+2)}}function q(a,c,f,d,e){var k=a.getUint16(f,!e),b={},g,h,m;for(m=0;m<k;m++)g=f+12*m+2,h=d[a.getUint16(g,!e)],b[h]=r(a,g,c,f,e);return b}function r(a,c,f,d,e){var b=a.getUint16(c+2,!e);d=a.getUint32(c+4,!e);f=a.getUint32(c+8,!e)+f;var g,h;switch(b){case 1:case 7:if(1==d)return a.getUint8(c+8,!e);f=4<d?f:c+8;c=[];for(b=0;b<d;b++)c[b]=a.getUint8(f+b);return c;case 2:return m(a,4<d?f:c+8,d-1);case 3:if(1==d)return a.getUint16(c+8,!e);f=2<d?f:c+8;c=[];for(b=0;b<d;b++)c[b]=a.getUint16(f+2*b,!e);return c;case 4:if(1==d)return a.getUint32(c+8,!e);c=[];for(b=0;b<d;b++)c[b]=a.getUint32(f+4*b,!e);return c;case 5:if(1==d)return g=a.getUint32(f,!e),h=a.getUint32(f+4,!e),a=new Number(g/h),a.numerator=g,a.denominator=h,a;c=[];for(b=0;b<d;b++)g=a.getUint32(f+8*b,!e),h=a.getUint32(f+4+8*b,!e),c[b]=new Number(g/h),c[b].numerator=g,c[b].denominator=h;return c;case 9:if(1==d)return a.getInt32(c+8,!e);c=[];for(b=0;b<d;b++)c[b]=a.getInt32(f+4*b,!e);return c;case 10:if(1==d)return a.getInt32(f,!e)/a.getInt32(f+4,!e);c=[];for(b=0;b<d;b++)c[b]=a.getInt32(f+8*b,!e)/a.getInt32(f+4+8*b,!e);return c}}function m(a,c,b){var d="";for(n=c;n<c+b;n++)d+=String.fromCharCode(a.getUint8(n));return d}function t(a,c){if("Exif"!=m(a,c,4))return!1;var b,h,e,k,p=c+6;if(18761==a.getUint16(p))b=!1;else if(19789==a.getUint16(p))b=!0;else return!1;if(42!=a.getUint16(p+2,!b))return!1;h=a.getUint32(p+4,!b);if(8>h)return!1;h=q(a,p,p+h,w,b);if(h.ExifIFDPointer)for(e in k=q(a,p,p+h.ExifIFDPointer,u,b),k){switch(e){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":k[e]=g[e][k[e]];break;case "ExifVersion":case "FlashpixVersion":k[e]=String.fromCharCode(k[e][0],k[e][1],k[e][2],k[e][3]);break;case "ComponentsConfiguration":k[e]=g.Components[k[e][0]]+g.Components[k[e][1]]+g.Components[k[e][2]]+g.Components[k[e][3]]}h[e]=k[e]}if(h.GPSInfoIFDPointer)for(e in b=q(a,p,p+h.GPSInfoIFDPointer,d,b),b){switch(e){case "GPSVersionID":b[e]=b[e][0]+"."+b[e][1]+"."+b[e][2]+"."+b[e][3]}h[e]=b[e]}return h}var b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this.EXIFwrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports.EXIF=b):this.EXIF=b;var u=b.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},w=b.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},d=b.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},g=b.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},z={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};b.getData=function(a,c){if((a instanceof Image||a instanceof HTMLImageElement)&&!a.complete)return!1;a.exifdata?c&&c.call(a):h(a,c);return!0};b.getTag=function(a,c){if(a.exifdata)return a.exifdata[c]};b.getAllTags=function(a){if(!a.exifdata)return{};var c;a=a.exifdata;var b={};for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};b.pretty=function(a){if(!a.exifdata)return"";var c;a=a.exifdata;var b="";for(c in a)a.hasOwnProperty(c)&&(b="object"==typeof a[c]?a[c]instanceof Number?b+(c+" : "+a[c]+" ["+a[c].numerator+"/"+a[c].denominator+"]\r\n"):b+(c+" : ["+a[c].length+" values]\r\n"):b+(c+" : "+a[c]+"\r\n"));return b};b.readFromBinaryFile=function(a){return v(a)};"function"===typeof define&&define.amd&&define("exif-js",[],function(){return b})}).call(this);
//lrz.js
(function(){function h(a,c){this.file=a;this.defaults={quality:.7,done:null,fail:null,before:null,always:null};for(var b in c)this.defaults[b]=c[b];1<this.defaults.quality&&(this.defaults.quality=1);this.results={origin:null,base64:null,base64Len:null};this.init()}window.URL=window.URL||window.webkitURL;var l=detect.parse(navigator.userAgent);h.prototype={constructor:h,init:function(){if("undefined"===typeof window.URL||"function"!==typeof document.createElement("canvas").getContext){var a=Error("\u4e0d\u652f\u6301\u6b64\u8bbe\u5907");"function"===typeof this.defaults.fail&&this.defaults.fail(a);"function"===typeof this.defaults.always&&this.defaults.always()}else this.create(this.file)},create:function(a){var c=this,b=new Image,g=c.results,h="string"===typeof a?a:URL.createObjectURL(a);b.crossOrigin="*";b.onerror=function(){var a=Error("\u56fe\u7247\u52a0\u8f7d\u5931\u8d25");"function"===typeof c.defaults.fail&&c.defaults.fail(a);"function"===typeof c.defaults.always&&c.defaults.always()};b.onload=function(){var d=c.resize(this);EXIF.getData(b,function(){var k=EXIF.getTag(this,"Orientation"),e=document.createElement("canvas"),f;c.rotateResize(d,k);e.width=d.w;e.height=d.h;f=e.getContext("2d");f.fillStyle="#fff";f.fillRect(0,0,d.w,d.h);g.origin=a;if("iOS"===l.os.family&&8>+l.os.version)(new MegaPixImage(b)).render(e,{width:e.width,height:e.height,orientation:k}),g.base64=e.toDataURL("image/jpeg",c.defaults.quality);else{switch(k){case 3:f.rotate(180*Math.PI/180);f.drawImage(b,-d.w,-d.h,d.w,d.h);break;case 6:e.width=d.h;e.height=d.w;f.rotate(90*Math.PI/180);f.drawImage(b,0,-d.h,d.w,d.h);break;case 8:e.width=d.h;e.height=d.w;f.rotate(270*Math.PI/180);f.drawImage(b,-d.w,0,d.w,d.h);break;default:f.drawImage(b,0,0,d.w,d.h)}"Android"===l.os.family&&4.5>l.os.version.slice(0,3)?(k=new JPEGEncoder,g.base64=k.encode(f.getImageData(0,0,e.width,e.height),100*c.defaults.quality)):g.base64=e.toDataURL("image/jpeg",c.defaults.quality)}b=canvas=null;URL.revokeObjectURL(h);g.base64Len=g.base64.length;"function"===typeof c.defaults.done&&c.defaults.done(g);"function"===typeof c.defaults.always&&c.defaults.always()})};"function"===typeof this.defaults.before&&this.defaults.before();b.src=h},resize:function(a){var c=this.defaults.width,b=this.defaults.height,g=a.width/a.height;a={w:a.width,h:a.height};c&b?(a.w=c,a.h=b):c?(a.w=c,a.h=Math.ceil(c/g)):b&&(a.w=Math.ceil(b*g),a.h=b);if(3264<=a.w||2448<=a.h)a.w*=.8,a.h*=.8;return a},rotateResize:function(a,c){switch(c){case 6:case 8:if(this.defaults.width&&this.defaults.height){var b=a.w;a.w=a.h;a.h=b;return!1}if(this.defaults.width)return a.w>a.h?(b=a.w-a.h,a.w+=b,a.h+=b):a.w<a.h&&(b=a.h-a.w,a.w-=b,a.h-=b),!1;if(this.defaults.height)return a.w>a.h?(b=a.w-a.h,a.w-=b,a.h-=b):a.w<a.h&&(b=a.h-a.w,a.w+=b,a.h+=b),!1}}};window.lrz=function(a,c){return new h(a,c)}})();


 
 

