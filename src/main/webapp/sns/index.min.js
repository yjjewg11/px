window.grouptype=3;function body_show(){$("#div_body").show();$("#div_widget_chooseUser").hide();$("#div_widget_chooseCook").hide()}function G_resMsg_Timeout_sns(b){"sessionTimeout"==b.status?Modal_prompt.showLogin():(alert(b.message),G_resMsg_filter(b))}var Modal_prompt={g_modal_prompt:"g_modal_prompt",g_modal_prompt_hd:"g_modal_prompt_hd",g_modal_prompt_bd:"g_modal_prompt_bd",modal1:null,ajax_userinfo_login:function(){var b=$("#btn_login");b.button("loading");$.AMUI.progress.start();var c=$("#login_form").serializeJson();32!=c.password.length&&(c.password=$.md5(c.password));$.ajax({type:"POST",url:hostUrl+"rest/userinfo/login.json",data:c,dataType:"json",success:function(a){b.button("reset");$.AMUI.progress.done();"success"==a.ResMsg.status?(Store.clear(),setCookie("bs_loginname",c.loginname),setCookie("bs_grouptype",c.grouptype),$("#pw_checked")[0].checked?(setCookie("bs_password",c.password),setCookie("pw_checked","checked")):(setCookie("bs_password",""),setCookie("pw_checked","")),setCookie("bs_grouptype",a.S_type),SnsIndexPage.user=a.userinfo,SnsIndexPage.title_info_init(),G_msg_pop(a.ResMsg.message),Modal_prompt.modal1&&Modal_prompt.modal1.close()):alert(a.ResMsg.message)},error:function(a,d,c){b.button("reset");$.AMUI.progress.done();a.responseText&&a.responseText.indexOf("G_key_no_connect_server")?alert("\u6ca1\u8fde\u63a5\u4e0a\u4e92\u8054\u7f51."):alert(a.status+","+d+"\x3d"+c)}})},showLogin:function(){var b=getCookie("bs_loginname"),c=getCookie("bs_password"),a=getCookie("pw_checked");Modal_prompt.show(React.createElement(Common_load_pop,{loginname:b,password:c,pw_checked:a}),"\u7528\u6237\u767b\u5f55",function(){Modal_prompt.ajax_userinfo_login()})},show:function(b,c,a){React.render(b,document.getElementById(Modal_prompt.g_modal_prompt_bd));$("#"+Modal_prompt.g_modal_prompt).modal({relatedTarget:document.body,closeOnConfirm:!1,onConfirm:function(c){var b=this;Modal_prompt.modal1=this;if("function"==typeof a)return a(function(){b.close()}),!1;b.close()},onCancel:function(a){}})}},SnsIndexPage=function(){function b(a){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/userinfo/getUserinfo.json?grouptype\x3d3",async:!1,dataType:"json",success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status&&(SnsIndexPage.user=a.userinfo)},error:G_ajax_error_fn})}function c(a){a||(a="\u8bdd\u9898|"+SnsIndexPage.user.name);React.render(React.createElement(AMUIReact.Header,{title:a,link:"#title-link",data:{left:[{link:"javascript:Queue.doBackFN();",icon:"chevron-left"}],right:[{link:"javascript:SnsIndexPage.addTopic();",icon:"pencil-square-o"}]}}),document.getElementById("div_header"))}function a(){$("#div_seesion_body").show();$("#div_login").html(null);body_show();PxSns.list_init()}return{user:{uuid:"",name:"\u6e38\u5ba2"},menu_dohome:a,addTopic:function(){PxSnsService.btnclick_sns_snsTopic("add")},title_info_init:c,init:function(){Queue.homePageFn=a;b(!0);c();$("#div_seesion_body").show();$("#div_login").html(null);body_show();var d;(d=$.getUrlParam("topic_uuid"))?(PxSnsService.ajax_sns_snsTopic_show(d),d=!0):d=!1;d||PxSns.list_init()}}}();SnsIndexPage.init();