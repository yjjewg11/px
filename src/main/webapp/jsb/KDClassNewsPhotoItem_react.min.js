var KDClassNewPhotoItem=function(m,n,p){var g={callback:null,queryForSelect:function(a,b,d,c){var f;f||(f="");g.callback=c;d=Store.getGroup();a=a?a:d[0].uuid;c=Store.getMyByClassList(a);b=b?b:c&&0!=c.length?c[0].uuid:null;React.render(React.createElement(h,{groupuuid:a,label:f,group_List:G_selected_dataModelArray_byArray(d,"uuid","brand_name"),classList:G_selected_dataModelArray_byArray(c,"uuid","name"),classuuid:b}),G_get_div_second())}},k=React.createClass({displayName:"KDClassNewsPhotoItem_Img_canDel",deleteImg:function(a,b){var d=$("#"+b);$("#"+a).remove();d.removeClass("G_ch_cook_item_checked")},render:function(){return React.createElement("div",{className:"G_cookplan_Img"},React.createElement("img",{name:"KDClassNewsPhotoItem_Img_select",className:"G_cookplan_Img_img",src:this.props.url,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this,this.props.parentDivId,this.props.trid)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}}),l=React.createClass({displayName:"Common_mg_Classnew_big_fn",div_onClick:function(a,b){var d=$("#"+a),c="Common_mg_Class_big_fn_"+b.uuid;0<=d.attr("class").indexOf("G_ch_classNews_item_checked")?(d.removeClass("G_ch_classNews_item_checked"),$("#"+c).remove()):(d.addClass("G_ch_classNews_item_checked"),$("#abc").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e"),React.render(React.createElement(k,{url:b.path,parentDivId:c,trid:a}),document.getElementById(c)))},render:function(){var a=this;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(b){var d=b.path,c=b.label;c||(c="\u65e0");return React.createElement("li",{id:"Common_mg_Class_big_fn_item_"+b.uuid,className:"G_class_phtoto_Img  G_ch_classNews_item ",title:b.uuid,onClick:a.div_onClick.bind(this,"Common_mg_Class_big_fn_item_"+b.uuid,b)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:d}),React.createElement("label",null,"\u6807\u7b7e\uff1a\u3010"+c+"\u3011")))})))}}),h=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.getStateByPropes(this.props)},getStateByPropes:function(a){a=this.query_Label();return{query_My_All_list:1,groupList:this.props.group_List,classList:this.props.classList,queryForm:{groupuuid:this.props.groupuuid,label:this.props.label,classuuid:this.props.classuuid},label_list:a,pageNo:1,show_list:[],list:[]}},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},componentDidMount:function(){this.ajax_list()},handle_onKeyDown:function(a){if(G_isKeyDown_enter(a))return this.handleClick_query(),!1},handleClick_query:function(a){this.state.pageNo=1;this.ajax_list()},query_Label:function(a,b){var d=[];$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryLabel.json",data:{group_uuid:a?this.state.queryForm.groupuuid:this.props.groupuuid,class_uuid:b?this.state.queryForm.classuuid:this.props.classuuid},dataType:"json",async:!1,success:function(a){"success"==a.ResMsg.status?(d=a.list,d.push({value:"",label:"\u6240\u6709"}),d.slice(0,-1)):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return d},ajax_list:function(){var a=this.state.queryForm;"\u6240\u6709"==a.label&&(a.label="");a.pageNo=this.state.pageNo;$.AMUI.progress.start();var b=this;$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryMy.json",data:a,dataType:"json",success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?b.ajax_callback(a.list):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})},ajax_callback:function(a){var b=this.query_Label(this.state.queryForm.groupuuid,this.state.queryForm.classuuid);this.state.label_list=b;this.state.list=null==a?[]:a.data;this.state.pageSize=a.pageSize;"1"==this.state.pageNo&&(this.state.totalCount=a.totalCount);this.setState(this.state)},handleChange_selectgroup:function(a){var b,d;b=1==this.state.query_My_All_list?Store.getMyByClassList(a):Store.getChooseClass(a);d||(d=b&&0!=b.length?b[0].uuid:null);this.state.pageNo=1;this.state.queryForm.groupuuid=a;this.state.queryForm.classuuid=d;this.state.classList=G_selected_dataModelArray_byArray(b,"uuid","name");this.ajax_list()},handleChange_label:function(a){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());a=$("#queryForm").serializeJson();this.state.pageNo=1;this.state.queryForm=a;this.ajax_list()},handleChange:function(a){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());this.state.pageNo=1;this.state.queryForm.label="";this.state.queryForm.classuuid=a;this.ajax_list()},handleClick_selectbtn:function(a){var b=[];$("img[name\x3d'KDClassNewsPhotoItem_Img_select']").each(function(){b.push($(this).attr("src"))});g.callback&&g.callback(b);G_get_div_body()},pageClick:function(a,b){var d=this.state,c=d.totalCount%d.pageSize,f=Math.round(d.totalCount/d.pageSize);"pre"==a?2>d.pageNo?G_msg_pop("\u7b2c\u4e00\u9875\u4e86"):(--d.pageNo,this.ajax_list(d)):"next"==a&&(!b||b.length<d.pageSize?G_msg_pop("\u6700\u540e\u4e00\u9875\u4e86"):d.pageNo==f&&0==c?G_msg_pop("\u6700\u540e\u4e00\u9875\u4e86"):(d.pageNo+=1,this.ajax_list(d)))},btn_classPhtotItem:function(){G_photo_groupuuid=this.state.queryForm.groupuuid;G_photo_classuuid=this.state.queryForm.classuuid;KDPhotoItem.query()},All_group_class:function(){var a,b,d,c;b=Store.getGroupNoGroup_wjd();a||(a=b[0].uuid);d=G_selected_dataModelArray_byArray(b,"uuid","brand_name");b=(c=Store.getChooseClass(a))&&0!=c.length?c[0].uuid:null;c=G_selected_dataModelArray_byArray(c,"uuid","name");this.state.groupList=d;this.state.classList=c;this.state.queryForm.groupuuid=a;this.state.queryForm.classuuid=b;this.state.query_My_All_list=2;this.state.pageNo=1;this.ajax_list()},My_group_class:function(){var a,b,d,c;b=Store.getGroup();a||(a=b[0].uuid);d=G_selected_dataModelArray_byArray(b,"uuid","brand_name");b=(c=Store.getMyByClassList(a))&&0!=c.length?c[0].uuid:null;c=G_selected_dataModelArray_byArray(c,"uuid","name");this.state.groupList=d;this.state.classList=c;this.state.queryForm.groupuuid=a;this.state.queryForm.classuuid=b;this.state.query_My_All_list=1;this.state.pageNo=1;this.ajax_list()},render:function(){var a,b,d=this.state.queryForm,c=this.state;a=this.state.list;a.pageNo=this.state.pageNo;for(var f=[],g=[],e=React.createElement("div",null),e=0;e<c.label_list.length;e++)c.label_list[e].label&&(b={value:null,label:null},b.value=c.label_list[e].label,b.label=c.label_list[e].label,g.push(b));this.state.label_list=g;for(e=0;e<a.length;e++)b={path:null,groupuuid:null,classuuid:null,uuid:null,pageNo:null,label:null},b.path=a[e].path,b.groupuuid=c.queryForm.groupuuid,b.classuuid=c.queryForm.classuuid,b.uuid=a[e].uuid,b.pageNo=c.pageNo,b.label=a[e].label,f.push(b);a=0==f.length?"G_Edit_show":"G_Edit_hide";e=1==c.query_My_All_list?React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:"am-margin-top",amStyle:"secondary",onClick:this.All_group_class.bind(this)},"\u67e5\u8be2\u6240\u6709\u73ed\u7ea7")):React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:"am-margin-top",amStyle:"secondary",onClick:this.My_group_class.bind(this)},"\u67e5\u8be2\u6211\u7684\u73ed\u7ea7"));b=G_get_pageSize_number(this.state.pageSize,this.state.totalCount);return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",f)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c"+c.pageNo+"/"+b+"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",f)},"\u4e0b\u4e00\u9875"),e)),React.createElement("label",null,"\u56fe\u7247\u603b\u6570\uff1a"+c.totalCount+"\u5f20"),React.createElement(AMUIReact.Form,{id:"queryForm",inline:!0,onKeyDown:this.handle_onKeyDown},React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"groupuuid",name:"groupuuid",onChange:this.handleChange_selectgroup,btnWidth:"200",data:c.groupList,btnStyle:"primary",value:d.groupuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"classuuid",name:"classuuid",placeholder:"\u73ed\u7ea7\u5207\u6362",onChange:this.handleChange,btnWidth:"200",data:c.classList,btnStyle:"primary",value:d.classuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"label",name:"label",placeholder:"\u6807\u7b7e\u5207\u6362",onChange:this.handleChange_label,btnWidth:"200",data:g,btnStyle:"primary",value:d.label})))),React.createElement("div",{className:a},React.createElement("label",null,"\u8be5\u73ed\u7ea7\u76f8\u518c\u6682\u672a\u4e0a\u4f20\u7167\u7247\uff0c\u8bf7\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c\u4e0a\u4f20\u65b0\u7167\u7247"),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.btn_classPhtotItem.bind(this)},"\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c"))),React.createElement("div",{className:"am-comment-bd"},React.createElement(l,{imgsList:f,state:this.state})),React.createElement("legend",null),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",f)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c"+c.pageNo+"/"+b+"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",f)},"\u4e0b\u4e00\u9875")),React.createElement("div",{id:"abc"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick_selectbtn.bind(this,c)},"\u786e\u8ba4\u7167\u7247\u9009\u62e9"))))}});return g}();