var KDClassNewPhotoItem=function(v,w,x){var f={callback:null,queryForSelect:function(b,a,d,c){var e;e||(e="");f.callback=c;d=Store.getGroup();b=b?b:d[0].uuid;c=Store.getMyByClassList(b);a=a?a:c&&0!=c.length?c[0].uuid:null;React.render(React.createElement(m,{groupuuid:b,label:e,group_List:G_selected_dataModelArray_byArray(d,"uuid","brand_name"),classList:G_selected_dataModelArray_byArray(c,"uuid","name"),classuuid:a}),G_get_div_second())}},g=!1,m=React.createClass({displayName:"Query_photo_div",load_more_btn_id:"load_more_",pageNo:1,classnewsreply_list_div:"am-list-newsPhoto-bd",getInitialState:function(){var b=this.query_Label();return{query_My_All_list:1,groupList:this.props.group_List,classList:this.props.classList,queryForm:{groupuuid:this.props.groupuuid,label:this.props.label,classuuid:this.props.classuuid},label_list:b,pageNo:1,show_list:[],list:[]}},query_Label:function(b,a){var d=[];$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryLabel.json",data:{group_uuid:b?this.state.queryForm.groupuuid:this.props.groupuuid,class_uuid:a?this.state.queryForm.classuuid:this.props.classuuid},dataType:"json",async:!1,success:function(b){"success"==b.ResMsg.status?(d=b.list,d.push({value:"",label:"\u6240\u6709"}),d.slice(0,-1)):(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn});return d},componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},handle_onKeyDown:function(b){if(G_isKeyDown_enter(b))return this.handleClick_query(),!1},handleClick_query:function(b){this.state.pageNo=1;this.refresh_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var b=this,a=function(a){if(a){var c=b.state.totalCount%b.state.pageSize,e=Math.round(b.state.totalCount/b.state.pageSize);a.data.length<a.pageSize?$("#"+b.load_more_btn_id).hide():b.state.pageNo==e&&0==c?$("#"+b.load_more_btn_id).hide():$("#"+b.load_more_btn_id).show();b.pageNo++}};1==g?n(this.classnewsreply_list_div+this.pageNo,this.state.queryForm,this.pageNo,this,a):p(this.classnewsreply_list_div+this.pageNo,this.state.queryForm,this.pageNo,this,a);this.setState(this.state)},refresh_data:function(){var b=this.query_Label(this.state.queryForm.groupuuid,this.state.queryForm.classuuid);this.state.label_list=b;this.pageNo=1;$("#"+this.classnewsreply_list_div).html("");this.load_more_data()},handleClick_selectbtn:function(b){var a=[];$("img[name\x3d'KDClassNewsPhotoItem_Img_select']").each(function(){var b={src:null,uuid:null};b.src=$(this).attr("src");b.uuid=$(this).attr("id");a.push(b)});G_get_div_body();G_photo_urlsSelectArry=[];f.callback&&f.callback(a)},btn_classPhtotItem:function(){G_photo_groupuuid=this.state.queryForm.groupuuid;G_photo_classuuid=this.state.queryForm.classuuid;KDPhotoItem.query()},All_group_class:function(){g=!1;var b,a,d,c;a=Store.getGroupNoGroup_wjd();b||(b=a[0].uuid);d=G_selected_dataModelArray_byArray(a,"uuid","brand_name");a=(c=Store.getChooseClass(b))&&0!=c.length?c[0].uuid:null;c=G_selected_dataModelArray_byArray(c,"uuid","name");this.state.pageNo=1;this.state.groupList=d;this.state.classList=c;this.state.queryForm.label="";this.state.queryForm.groupuuid=b;this.state.queryForm.classuuid=a;this.state.query_My_All_list=2;this.refresh_data()},My_Phtot:function(){g=!0;this.refresh_data()},My_group_class:function(){g=!1;var b,a,d,c;a=Store.getGroup();b||(b=a[0].uuid);d=G_selected_dataModelArray_byArray(a,"uuid","brand_name");a=(c=Store.getMyByClassList(b))&&0!=c.length?c[0].uuid:null;c=G_selected_dataModelArray_byArray(c,"uuid","name");this.state.pageNo=1;this.state.groupList=d;this.state.classList=c;this.state.queryForm.label="";this.state.queryForm.groupuuid=b;this.state.queryForm.classuuid=a;this.state.query_My_All_list=1;this.refresh_data()},handleChange_selectgroup:function(b){var a,d;a=1==this.state.query_My_All_list?Store.getMyByClassList(b):Store.getChooseClass(b);d||(d=a&&0!=a.length?a[0].uuid:null);1==this.state.query_My_All_list&&(G_photo_groupuuid=b,G_photo_classuuid=d);this.state.pageNo=1;this.state.queryForm.label="";this.state.queryForm.groupuuid=b;this.state.queryForm.classuuid=d;this.state.classList=G_selected_dataModelArray_byArray(a,"uuid","name");this.refresh_data()},handleChange:function(b){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());this.state.pageNo=1;this.state.queryForm.label="";this.state.queryForm.classuuid=b;this.refresh_data()},handleChange_label:function(b){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());b=$("#queryForm").serializeJson();this.state.pageNo=1;this.state.queryForm=b;this.refresh_data()},render:function(){this.load_more_btn_id="load_more_"+this.props.uuid;var b,a,d,c=this.state.queryForm,e=this.state,l=[],f=React.createElement("div",null);1==e.query_My_All_list?(d="G_Edit_show",a="G_Edit_hide"):(d="G_Edit_hide",a="G_Edit_show");for(var h=0;h<e.label_list.length;h++)e.label_list[h].label&&(b={value:null,label:null},b.value=e.label_list[h].label,b.label=e.label_list[h].label,l.push(b));this.state.label_list=l;b=0==this.state.list.length?"G_Edit_show":"G_Edit_hide";0==g&&(f=React.createElement("div",null,React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"groupuuid",name:"groupuuid",onChange:this.handleChange_selectgroup,btnWidth:"200",data:e.groupList,btnStyle:"primary",value:c.groupuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"classuuid",name:"classuuid",placeholder:"\u73ed\u7ea7\u5207\u6362",onChange:this.handleChange,btnWidth:"200",data:e.classList,btnStyle:"primary",value:c.classuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"label",name:"label",placeholder:"\u6807\u7b7e\u5207\u6362",onChange:this.handleChange_label,btnWidth:"200",data:l,btnStyle:"primary",value:c.label})))));return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:d,amStyle:"secondary",onClick:this.All_group_class.bind(this)},"\u67e5\u8be2\u6240\u6709\u73ed\u7ea7"),React.createElement(AMR_Button,{className:a,amStyle:"secondary",onClick:this.My_group_class.bind(this)},"\u67e5\u8be2\u6211\u7684\u73ed\u7ea7"),React.createElement(AMR_Button,{amStyle:"secondary",onClick:this.My_Phtot.bind(this)},"\u67e5\u8be2\u5df2\u4f7f\u7528\u8fc7\u7684\u7167\u7247"))),React.createElement("label",null,"\u56fe\u7247\u603b\u6570\uff1a"+this.state.totalCount+"\u5f20"),React.createElement(AMUIReact.Form,{id:"queryForm",inline:!0,onKeyDown:this.handle_onKeyDown},f),React.createElement("div",{className:b},React.createElement("label",null,"\u8be5\u73ed\u7ea7\u76f8\u518c\u6682\u672a\u4e0a\u4f20\u7167\u7247\uff0c\u8bf7\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c\u4e0a\u4f20\u65b0\u7167\u7247"),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.btn_classPhtotItem.bind(this)},"\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c"))),React.createElement("div",{id:this.classnewsreply_list_div,className:"am-list-newsPhoto-bd"}),React.createElement("div",{className:"am-list-news-ft"},React.createElement("a",{className:"am-list-news-more am-btn am-btn-default ",id:this.load_more_btn_id,onClick:this.load_more_data.bind(this)},"\u67e5\u770b\u66f4\u591a \u00bb")),React.createElement("div",{id:"abc"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick_selectbtn.bind(this,e)},"\u786e\u8ba4\u7167\u7247\u9009\u62e9"))))}}),p=function(b,a,d,c,e){a.pageNo=d;"\u6240\u6709"==a.label&&(a.label="");$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryMy.json",data:a,dataType:"json",async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(c.state.list=a.list.data,c.state.pageSize=a.list.pageSize,"1"==d&&(c.state.totalCount=a.list.totalCount),React.render(React.createElement(q,{events:a.list,Propsthat:c,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(b)),"function"==typeof e&&e(a.list)):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})},q=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.props.events},componentWillReceiveProps:function(b){this.setState(this.getStateByPropes(b))},render:function(){for(var b,a=this.state.data,d=[],c=0;c<a.length;c++)b={path:null,uuid:null,label:null,note:null},b.path=a[c].path,b.uuid=a[c].uuid,b.label=a[c].label,b.note=a[c].note,d.push(b);return React.createElement("div",{className:"am-comment-bd"},React.createElement(r,{imgsList:d,Penthat:this.props.Propsthat}))}}),r=React.createClass({displayName:"Common_mg_Classnew_big_fn",componentDidMount:function(){if(0!=G_photo_urlsSelectArry.length)for(var b=this.props.imgsList,a=0;a<b.length;a++)if(1==b[a].OK){var d="Common_mg_ClassNew_big_fn_item_"+b[a].uuid,c="Common_mg_Class_big_fn_"+b[a].uuid;$("#"+d).addClass("G_ch_classNews_item_checked");$("#abc").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");React.render(React.createElement(k,{url:b[a].path,parentDivId:c,trid:d,event:b[a]}),document.getElementById(c))}},div_onClick:function(b,a){var d=$("#"+b),c="Common_mg_Class_big_fn_"+a.uuid;if(0<=d.attr("class").indexOf("G_ch_classNews_item_checked")){if(d.removeClass("G_ch_classNews_item_checked"),$("#"+c).remove(),0!=G_photo_urlsSelectArry.length){d=[];for(c=0;c<G_photo_urlsSelectArry.length;c++)G_photo_urlsSelectArry[c]!=a.uuid&&d.push(G_photo_urlsSelectArry[c]);G_photo_urlsSelectArry=d}}else d.addClass("G_ch_classNews_item_checked"),$("#abc").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e"),React.render(React.createElement(k,{url:a.path,parentDivId:c,trid:b,event:a}),document.getElementById(c))},render:function(){var b=this;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(a){if(0!=G_photo_urlsSelectArry.length)for(var d=0;d<G_photo_urlsSelectArry.length;d++)a.uuid==G_photo_urlsSelectArry[d]&&(a.OK=!0);var d=a.path,c=a.label,e=a.note;c||(c="\u65e0");e||(e="\u65e0");return React.createElement("li",{id:"Common_mg_ClassNew_big_fn_item_"+a.uuid,className:"G_class_phtoto_Img  G_ch_classNews_item ",title:a.uuid,onClick:b.div_onClick.bind(this,"Common_mg_ClassNew_big_fn_item_"+a.uuid,a)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:d}),React.createElement("label",null,"\u6807\u7b7e\uff1a\u3010"+c+"\u3011"),React.createElement("br",null),React.createElement("label",null,"\u5907\u6ce8\uff1a\u3010"+e+"\u3011")))})))}}),n=function(b,a,d,c,e){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/uploadFile/queryMy.json",dataType:"json",async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(c.state.list=a.list.data,c.state.pageSize=a.list.pageSize,"1"==d&&(c.state.totalCount=a.list.totalCount),React.render(React.createElement(t,{events:a.list,Propsthat:c,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(b)),"function"==typeof e&&e(a.list)):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})},t=React.createClass({displayName:"Query_Myphoto_rect",getInitialState:function(){return this.props.events},componentWillReceiveProps:function(b){this.setState(this.getStateByPropes(b))},render:function(){return React.createElement("div",{className:"am-comment-bd"},React.createElement(u,{imgsList:this.state.data,Penthat:this.props.Propsthat}))}}),u=React.createClass({displayName:"Common_Img_My_fn",componentDidMount:function(){if(0!=G_photo_urlsSelectArry.length)for(var b=this.props.imgsList,a=0;a<b.length;a++)if(1==b[a].OK){var d="Common_Img_My_fn_item"+b[a].uuid,c="Common_Img_My_fn"+b[a].uuid;$("#"+d).addClass("G_ch_classNews_item_checked");$("#abc").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");React.render(React.createElement(k,{url:b[a].path,parentDivId:c,trid:d,event:b[a]}),document.getElementById(c))}},div_onClick:function(b,a){var d=$("#"+b),c="Common_Img_My_fn"+a.uuid;if(0<=d.attr("class").indexOf("G_ch_classNews_item_checked")){if(d.removeClass("G_ch_classNews_item_checked"),$("#"+c).remove(),0!=G_photo_urlsSelectArry.length){d=[];for(c=0;c<G_photo_urlsSelectArry.length;c++)G_photo_urlsSelectArry[c]!=a.uuid&&d.push(G_photo_urlsSelectArry[c]);G_photo_urlsSelectArry=d}}else d.addClass("G_ch_classNews_item_checked"),$("#abc").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e"),React.render(React.createElement(k,{url:a.path,parentDivId:c,trid:b,event:a}),document.getElementById(c))},render:function(){var b=this;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(a){if(0!=G_photo_urlsSelectArry.length)for(var d=0;d<G_photo_urlsSelectArry.length;d++)a.uuid==G_photo_urlsSelectArry[d]&&(a.OK=!0);d=a.path;return React.createElement("li",{id:"Common_Img_My_fn_item"+a.uuid,className:"G_class_phtoto_Img  G_ch_classNews_item ",title:a.uuid,onClick:b.div_onClick.bind(this,"Common_Img_My_fn_item"+a.uuid,a)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:d}),React.createElement("label",null,"\u521b\u5efa\u65f6\u95f4\uff1a\u3010"+a.create_time+"\u3011")))})))}}),k=React.createClass({displayName:"KDClassNewsPhotoItem_Img_canDel",deleteImg:function(b,a){var d=$("#"+a);$("#"+b).remove();d.removeClass("G_ch_classNews_item_checked")},render:function(){return React.createElement("div",{className:"G_cookplan_Img"},React.createElement("img",{name:"KDClassNewsPhotoItem_Img_select",className:"G_cookplan_Img_img",id:this.props.event.uuid,src:this.props.url,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this,this.props.parentDivId,this.props.trid)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}});return f}();