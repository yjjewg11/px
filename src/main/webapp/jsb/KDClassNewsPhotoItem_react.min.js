var KDClassNewPhotoItem=function(m,n,p){var g={callback:null,queryForSelect:function(a,b,c,d){var e;g.callback=d;c=Store.getGroup();e||(e="");a=a?a:c[0].uuid;d=Store.getChooseClass(a);b=b?b:d&&0!=d.length?d[0].uuid:null;React.render(React.createElement(h,{groupuuid:a,label:e,group_List:G_selected_dataModelArray_byArray(c,"uuid","brand_name"),classList:G_selected_dataModelArray_byArray(d,"uuid","name"),classuuid:b}),G_get_div_second())}},k=React.createClass({displayName:"KDClassNewsPhotoItem_Img_canDel",deleteImg:function(a,b){var c=$("#"+b);$("#"+a).remove();c.removeClass("G_ch_cook_item_checked")},render:function(){return React.createElement("div",{className:"G_cookplan_Img"},React.createElement("img",{name:"KDClassNewsPhotoItem_Img_select",className:"G_cookplan_Img_img",src:this.props.url,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this,this.props.parentDivId,this.props.trid)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}}),l=React.createClass({displayName:"Common_mg_Class_big_fn",div_onClick:function(a,b){var c=$("#"+a),d="Common_mg_Class_big_fn_"+b.uuid;0<=c.attr("class").indexOf("G_ch_cook_item_checked")?(c.removeClass("G_ch_cook_item_checked"),$("#"+d).remove()):(c.addClass("G_ch_cook_item_checked"),$("#abc").append("\x3cdiv id\x3d'"+d+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e"),React.render(React.createElement(k,{url:b.path,parentDivId:d,trid:a}),document.getElementById(d)))},render:function(){var a=this;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(b){var c=b.path,d=b.label;d||(d="\u65e0");return React.createElement("li",{id:"Common_mg_Class_big_fn_item_"+b.uuid,title:b.uuid,className:"G_class_phtoto_Img am-gallery-item G_ch_cook_item ",onClick:a.div_onClick.bind(this,"Common_mg_Class_big_fn_item_"+b.uuid,b)},React.createElement("img",{src:c}),React.createElement("label",null,"\u6807\u7b7e\uff1a\u3010"+d+"\u3011"))})))}}),h=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.getStateByPropes(this.props)},getStateByPropes:function(a){var b=[];$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryLabel.json",data:{group_uuid:this.props.groupuuid,class_uuid:this.props.classuuid},dataType:"json",async:!1,success:function(a){"success"==a.ResMsg.status?(b=a.list,b.push({value:"",label:"\u6240\u6709"}),b.slice(0,-1)):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return{classList:this.props.classList,queryForm:{groupuuid:this.props.groupuuid,label:this.props.label,classuuid:this.props.classuuid},label_list:b,pageNo:1,show_list:[],list:[]}},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},handleChange_selectgroup:function(a){var b,c;b=Store.getChooseClass(a);c||(c=b&&0!=b.length?b[0].uuid:null);this.state.queryForm.groupuuid=a;this.state.queryForm.classuuid=c;this.state.classList=G_selected_dataModelArray_byArray(b,"uuid","name");this.ajax_list();this.setState(this.state)},handleChange:function(a){a=$("#queryForm").serializeJson();this.state.queryForm=a;this.setState(this.state);this.ajax_list()},handleClick_selectbtn:function(a){var b=[];$("img[name\x3d'KDClassNewsPhotoItem_Img_select']").each(function(){b.push($(this).attr("src"))});g.callback&&g.callback(b);G_get_div_body()},pageClick:function(a,b){var c=this.state;"pre"==a?2>c.pageNo?G_msg_pop("\u7b2c\u4e00\u9875\u4e86"):(--c.pageNo,this.ajax_list(c)):"next"==a&&(!b||b.length<c.pageSize?G_msg_pop("\u6700\u540e\u4e00\u9875\u4e86"):(c.pageNo+=1,this.ajax_list(c)))},handleClick_query:function(a){this.state.pageNo=1;this.ajax_list()},ajax_callback:function(a){this.state.list=null==a?[]:a.data;this.state.pageSize=a.pageSize;"1"==this.state.pageNo&&(this.state.totalCount=a.totalCount);this.setState(this.state)},ajax_list:function(){var a=this.state.queryForm;"\u6240\u6709"==a.label&&(a.label="");a.pageNo=this.state.pageNo;$.AMUI.progress.start();var b=this;$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryMy.json",data:a,dataType:"json",success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?b.ajax_callback(a.list):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})},btn_classPhtotItem:function(){G_photo_groupuuid=this.state.queryForm.groupuuid;G_photo_classuuid=this.state.queryForm.classuuid;KDPhotoItem.query()},componentDidMount:function(){this.ajax_list()},handle_onKeyDown:function(a){if(G_isKeyDown_enter(a))return this.handleClick_query(),!1},render:function(){var a=this.state.queryForm,b=this.state,c=this.state.list;c.pageNo=this.state.pageNo;for(var d=[],e,g=[],f=0;f<b.label_list.length;f++)b.label_list[f].label&&(e={value:null,label:null},e.value=b.label_list[f].label,e.label=b.label_list[f].label,g.push(e));this.state.label_list=g;for(f=0;f<c.length;f++)e={path:null,groupuuid:null,classuuid:null,uuid:null,pageNo:null,label:null},e.path=c[f].path,e.groupuuid=b.queryForm.groupuuid,e.classuuid=b.queryForm.classuuid,e.uuid=c[f].uuid,e.pageNo=b.pageNo,e.label=c[f].label,d.push(e);c=0==d.length?"G_Edit_show":"G_Edit_hide";return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",d)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c",b.pageNo,"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",d)},"\u4e0b\u4e00\u9875"))),React.createElement(AMUIReact.Form,{id:"queryForm",inline:!0,onKeyDown:this.handle_onKeyDown},React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"groupuuid",name:"groupuuid",onChange:this.handleChange_selectgroup,btnWidth:"200",data:this.props.group_List,btnStyle:"primary",value:a.groupuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"classuuid",name:"classuuid",placeholder:"\u73ed\u7ea7\u5207\u6362",onChange:this.handleChange,btnWidth:"200",data:b.classList,btnStyle:"primary",value:a.classuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"label",name:"label",placeholder:"\u6807\u7b7e\u5207\u6362",onChange:this.handleChange,btnWidth:"200",data:g,btnStyle:"primary",value:a.label})))),React.createElement("div",{className:c},React.createElement("label",null,"\u8be5\u73ed\u7ea7\u76f8\u518c\u6682\u672a\u4e0a\u4f20\u7167\u7247\uff0c\u8bf7\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c\u4e0a\u4f20\u65b0\u7167\u7247"),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.btn_classPhtotItem.bind(this)},"\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c"))),React.createElement("div",{className:"am-comment-bd"},React.createElement(l,{imgsList:d,state:this.state})),React.createElement("legend",null),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",d)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c",b.pageNo,"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",d)},"\u4e0b\u4e00\u9875")),React.createElement("div",{id:"abc"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick_selectbtn.bind(this,b)},"\u786e\u8ba4\u7167\u7247\u9009\u62e9"))))}});return g}();