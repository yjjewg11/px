var AMUIReact_Table=AMUIReact.Table,AMUIReact_ButtonToolbar=AMUIReact.ButtonToolbar,AMUIReact_Button=AMUIReact.Button,ChooseClass_EventsTable=React.createClass({displayName:"ChooseClass_EventsTable",handleClick:function(a){this.props.handleClick&&"cancel"==a&&w_ch_class.handleClick.bind(a)},handleChange_selectgroup_uuid_chuser:function(a){w_ch_class.reshowBygroup(a)},render:function(){return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement("div",{className:"am-form-group"},React.createElement(AMUIReact.Selected,{id:"selectgroup_uuid_chuser",name:"group_uuid",onChange:this.handleChange_selectgroup_uuid_chuser,btnWidth:"200",multiple:!1,data:this.props.group_list,btnStyle:"primary",value:this.props.group_uuid?this.props.group_uuid:""})),React.createElement(AMUIReact_Table,React.__spread({},this.props),React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,"\u73ed\u7ea7"))),React.createElement("tbody",null,this.props.events.map(function(a){return React.createElement(ChooseClass_EventRow,{event:a})}))))}}),ChooseClass_EventRow=React.createClass({displayName:"ChooseClass_EventRow",render:function(){var a=this.props.event;return React.createElement("tr",{className:a.highlight?"am-active":a.disabled?"am-disabled":"",onClick:w_ch_class.handleClick.bind(this,"choose",a.uuid)},React.createElement("td",null,a.name))}}),ChooseCook_Widget=React.createClass({displayName:"ChooseCook_Widget",handleClick:function(a){if("cancel"==a)w_ch_cook.handleClick(a);else{var b=[];$($(".G_ch_cook_item_checked")).each(function(){var a={};a.uuid=this.title;a.img=this.children[0].src;a.name=this.children[1].title;b.push(a)});w_ch_cook.handleClick(a,b)}},activeTabKey:"1",activeTabSelect:function(a){this.activeTabKey=a;$.AMUI.store.set("ChooseCook_select_mygroup",a);var b="ChooseCook_EventRow_div_"+a;React.render(React.createElement(ChooseCook_EventRow,{type:a,checkeduuids:this.props.checkeduuids}),document.getElementById(b))},componentDidMount:function(){this.activeTabSelect("1");var a=$.AMUI.store.get("ChooseCook_select_mygroup");a||(a="1");this.handleChange_select_mygroup(a)},handleChange_select_mygroup:function(a){$.AMUI.store.set("ChooseCook_select_mygroup",a);w_ch_cookAddImg.groupuuid="1"==a?w_ch_cook.groupuuid:null;this.activeTabSelect(this.activeTabKey)},select_mygroup_data:[{value:"1",label:"\u53ea\u663e\u793a\u672c\u6821\u4e0a\u4f20"},{value:"2",label:"\u663e\u793a\u6240\u6709"}],render:function(){this.props.events||(this.props.events=[]);var a=$.AMUI.store.get("ChooseCook_select_mygroup");a||(a="1");return React.createElement("div",null,React.createElement(AMUIReact_ButtonToolbar,null,React.createElement(AMUIReact_Button,{amStyle:"primary",onClick:this.handleClick.bind(this,"ok")},"\u786e\u8ba4"),React.createElement(AMUIReact_Button,{amStyle:"danger",onClick:this.handleClick.bind(this,"cancel")},"\u53d6\u6d88")),React.createElement(AMUIReact.Selected,{className:"am-margin-left-xs",id:"ChooseCook_Widget_select_mygroup",name:"group_uuid",onChange:this.handleChange_select_mygroup,btnWidth:"200",multiple:!1,data:this.select_mygroup_data,btnStyle:"primary",value:a}),React.createElement(AMUIReact.Tabs,{defaultActiveKey:"1",justify:!0,onSelect:this.activeTabSelect},React.createElement(AMUIReact.Tabs.Item,{eventKey:"1",title:"\u4e3b\u98df"},React.createElement("div",{id:"ChooseCook_EventRow_div_1"})),React.createElement(AMUIReact.Tabs.Item,{eventKey:"2",title:"\u6c64\u7ca5"},React.createElement("div",{id:"ChooseCook_EventRow_div_2"})),React.createElement(AMUIReact.Tabs.Item,{eventKey:"3",title:"\u7092\u83dc"},React.createElement("div",{id:"ChooseCook_EventRow_div_3"})),React.createElement(AMUIReact.Tabs.Item,{eventKey:"4",title:"\u6c34\u679c"},React.createElement("div",{id:"ChooseCook_EventRow_div_4"})),React.createElement(AMUIReact.Tabs.Item,{eventKey:"5",title:"\u5176\u4ed6"},React.createElement("div",{id:"ChooseCook_EventRow_div_5"}))))}}),ChooseCook_EventRow=React.createClass({displayName:"ChooseCook_EventRow",div_onClick:function(a){a=$("#"+a);0<=a.attr("class").indexOf("G_ch_cook_item_checked")?a.removeClass("G_ch_cook_item_checked"):a.addClass("G_ch_cook_item_checked")},callbackFN:function(){this.ajax_chooseCook_list(this.props.type);var a=Store.getChooseCook(this.props.type+w_ch_cookAddImg.groupuuid);this.setState({items:a})},getInitialState:function(){return{items:[]}},refresh_data:function(a){var b=a.type+w_ch_cookAddImg.groupuuid,c=Store.getChooseCook(b);c||(this.ajax_chooseCook_list(a.type),c=Store.getChooseCook(b));this.setState({items:c})},componentWillReceiveProps:function(a){this.refresh_data(a)},componentDidMount:function(){this.refresh_data(this.props)},ajax_chooseCook_list:function(a){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/cookbook/list.json",async:!1,data:{type:a,groupuuid:w_ch_cookAddImg.groupuuid},dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?(tmptype=a,tmptype=a+w_ch_cookAddImg.groupuuid,Store.setChooseCook(tmptype,b.list)):(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn})},deleteImg:function(a,b){confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417?")&&($.AMUI.progress.start(),$.ajax({type:"POST",url:hostUrl+"rest/cookbook/delete.json?uuid\x3d"+b,dataType:"json",async:!0,success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?(G_msg_pop(b.ResMsg.message),$("#"+a).hide()):alert(b.ResMsg.message)},error:G_ajax_error_fn}))},render:function(){var a=this,b=null;return React.createElement("div",{id:"div_cook_"+this.props.type},this.state.items.map(function(c){var d=!1;a.props.checkeduuids&&(d=-1<a.props.checkeduuids.indexOf(c.uuid));d=d?"G_ch_cook_item_checked":"";w_ch_cookAddImg.groupuuid&&(b=React.createElement("div",{className:"G_cookplan_Img_close",onClick:a.deleteImg.bind(a,"divCookItem_"+c.uuid,c.uuid)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})));return React.createElement("div",{id:"divCookItem_"+c.uuid,title:c.uuid,className:"G_ch_cook_item "+d,onClick:a.div_onClick.bind(this,"divCookItem_"+c.uuid)},React.createElement("img",{src:G_imgPath+c.img,name:c.img,alt:"\u56fe\u7247\u4e0d\u5b58\u5728",title:c.name}),b,React.createElement("span",{title:c.name},c.name))}),React.createElement("div",{id:"divCookItem_add",className:"G_ch_cook_item",onClick:w_ch_cook.add_img.bind(this,a.props.type,a.callbackFN)},React.createElement("img",{src:hostUrl+"i/addCook.gif",alt:"\u672c\u5730\u4e0a\u4f20"})))}}),Upload_cookImg_options={thumbBox:".thumbBox",spinner:".spinner",imgSrc:""},Upload_cookImg=React.createClass({displayName:"Upload_cookImg",handleClick:function(a){w_ch_cookAddImg.handleClick(a)},upload_file_onChange:function(){var a=new FileReader;a.onload=function(a){Upload_cookImg_options.imgSrc=a.target.result;w_ch_cookAddImg.cropper=$("#upload_file_imageBox").cropbox(Upload_cookImg_options)};a.readAsDataURL(this.files[0]);this.files=[]},btnZoomIn_onClick:function(){w_ch_cookAddImg.cropper&&w_ch_cookAddImg.cropper.zoomIn()},btnZoomOut_onClick:function(){w_ch_cookAddImg.cropper&&w_ch_cookAddImg.cropper.zoomOut()},btnRotate_onClick:function(){w_ch_cookAddImg.cropper&&w_ch_cookAddImg.cropper.chRotate()},btnCrop_onClick:function(){var a=w_ch_cookAddImg.cropper.getDataURL();w_ch_cookAddImg.base64=a;$("#upload_file_imageBox_cropped").html('\x3cimg src\x3d"'+a+'"\x3e')},componentDidMount:function(){$("#upload_imgfile").on("change",function(){var a=new FileReader;a.onload=function(a){Upload_cookImg_options.imgSrc=a.target.result;w_ch_cookAddImg.cropper=$(".imageBox").cropbox(Upload_cookImg_options)};a.readAsDataURL(this.files[0]);this.files=[]})},render:function(){return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("div",{className:"am-g"},React.createElement("h1",null,"\u4e0a\u4f20\u56fe\u7247")),React.createElement("hr",null)),React.createElement("div",{className:"container"},React.createElement("div",{className:"imageBox",id:"upload_file_imageBox"},React.createElement("div",{className:"thumbBox"}),React.createElement("div",{className:"spinner",style:{display:"none"}},"\u52a0\u8f7d\u4e2d...")),React.createElement("div",{className:"action"},React.createElement("input",{type:"file",id:"upload_imgfile",accept:"image/*"}),React.createElement(AMUIReact_Button,{amStyle:"warning",onClick:this.btnCrop_onClick},"\u526a\u5207"),React.createElement(AMUIReact_Button,{amStyle:"warning",onClick:this.btnZoomIn_onClick},"\u653e\u5927"),React.createElement(AMUIReact_Button,{amStyle:"warning",onClick:this.btnZoomOut_onClick},"\u7f29\u5c0f")),React.createElement("div",{className:"cropped",id:"upload_file_imageBox_cropped"})),React.createElement("label",{htmlFor:"cook_name"},"\u540d\u79f0:"),React.createElement("input",{type:"text",name:"cook_name",id:"cook_name",placeholder:""}),React.createElement("br",null),React.createElement(AMUIReact_ButtonToolbar,null,React.createElement(AMUIReact_Button,{amStyle:"primary",onClick:this.handleClick.bind(this,"ok")},"\u786e\u8ba4"),React.createElement(AMUIReact_Button,{amStyle:"danger",onClick:this.handleClick.bind(this,"cancel")},"\u53d6\u6d88")))}});