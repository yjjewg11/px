var KDPhotoItem=function(m,n,p){var h=React.createClass({displayName:"Query_photo_div",load_more_btn_id:"load_more_",pageNo:1,classnewsreply_list_div:"am-list-news-bd",getInitialState:function(){var a=this.query_Label();return{query_My_All_list:1,groupList:this.props.group_List,classList:this.props.classList,queryForm:{groupuuid:this.props.groupuuid,label:this.props.label,classuuid:this.props.classuuid},label_list:a,pageNo:1,show_list:[],list:[]}},query_Label:function(a,b){var c=[];$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryLabel.json",data:{group_uuid:a?this.state.queryForm.groupuuid:this.props.groupuuid,class_uuid:b?this.state.queryForm.classuuid:this.props.classuuid},dataType:"json",async:!1,success:function(a){"success"==a.ResMsg.status?(c=a.list,c.push({value:"",label:"\u6240\u6709"}),c.slice(0,-1)):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return c},componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var a=this;g(this.classnewsreply_list_div+this.pageNo,this.state.queryForm,this.pageNo,this,function(b){b&&(b.data.length<b.pageSize?$("#"+a.load_more_btn_id).hide():$("#"+a.load_more_btn_id).show(),a.pageNo++)})},refresh_data:function(){this.forceUpdate();this.pageNo=1;$("#"+this.classnewsreply_list_div).html("");this.load_more_data()},handleClick:function(a){React.render(React.createElement(Img_photo_rect,{formdata:a}),G_get_div_body())},render:function(){this.load_more_btn_id="load_more_"+this.props.uuid;return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick.bind(this,this.state)},"\u4e0a\u4f20\u7167\u7247")),React.createElement("div",{id:this.classnewsreply_list_div,className:"am-list-news-bd"}),React.createElement("div",{className:"am-list-news-ft"},React.createElement("a",{className:"am-list-news-more am-btn am-btn-default ",id:this.load_more_btn_id,onClick:this.load_more_data.bind(this)},"\u67e5\u770b\u66f4\u591a \u00bb")))}}),g=function(a,b,c,d,e){b.pageNo=c;"\u6240\u6709"==b.label&&(b.label="");$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryMy.json",data:b,dataType:"json",async:!1,success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?(React.render(React.createElement(k,{events:b.list,Propsthat:d,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(a)),"function"==typeof e&&e(b.list)):(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn})},k=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.props.events},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},componentDidMount:function(){$(".am-gallery").pureview()},render:function(){console.log("\u6d4b\u8bd5\u4e00\u4e0b\u821e\u53f0",this.state);for(var a,b=this.state.data,c=[],d=0;d<b.length;d++)a={path:null,uuid:null,label:null},a.path=b[d].path,a.uuid=b[d].uuid,a.label=b[d].label,c.push(a);G_get_pageSize_number(this.state.pageSize,this.state.totalCount);return React.createElement("div",{className:"am-comment-bd"},React.createElement(l,{imgsList:c,Penthat:this.props.Propsthat,state:this.state}))}}),l=React.createClass({displayName:"Common_mg_Class_big_fn",handleClick:function(a,b){if(confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417?")){var c=a.uuid;$.AMUI.progress.start();$.ajax({type:"POST",url:hostUrl+"rest/kDPhotoItem/delete.json?uuid\x3d"+c,dataType:"json",async:!0,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?b.refresh_data():alert(a.ResMsg.message)},rror:G_ajax_error_fn})}},render:function(){var a=this,b=this.props.Penthat;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(c){var d=c.path,e=c.label;e||(e="\u65e0");var f=d?d.split("@"):"";return React.createElement("li",{id:"Common_mg_Class_big_fn_item_"+c.uuid,className:"G_class_phtoto_Img"},React.createElement("div",{className:"am-gallery-item"},React.createElement("a",{href:f[0],title:""},React.createElement("img",{src:d,alt:"","data-rel":f[0]})),React.createElement("label",null,"\u6807\u7b7e\uff1a\u3010"+e+"\u3011")),React.createElement("div",{className:"G_class_phtoto_Img_close"},React.createElement(AMR_Button,{onClick:a.handleClick.bind(this,c,b)},"X")))})))}});return{callback:null,ajax_uploadByphone:function(a){fpPhotoUploadTask.ajax_uploadByphone(a)},query:function(a,b,c){var d;d||(d="");c=Store.getGroup();a=G_photo_groupuuid?G_photo_groupuuid:c[0].uuid;var e=Store.getMyByClassList(a);b=G_photo_classuuid?G_photo_classuuid:e&&0!=e.length?e[0].uuid:null;React.render(React.createElement(h,{groupuuid:a,label:d,group_List:G_selected_dataModelArray_byArray(c,"uuid","brand_name"),classList:G_selected_dataModelArray_byArray(e,"uuid","name"),classuuid:b}),G_get_div_body())}}}();