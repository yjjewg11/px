

//——————————————————————————话题<绘制>—————————————————————  
/* 
 * <话题>绘制舞台
 * @逻辑：绘制一个Div 每次点击加载更多按钮事把 新的一个Div添加到舞台上；
 * @我要发信息 加载更多等模板和按钮在此处添加上舞台 和DIV<信息>分离开；
 * */var Sns_Div=React.createClass({displayName:"Sns_Div",load_more_btn_id:"load_more_",pageNo:1,classnewsreply_list_div:"am-list-news-bd",componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var a=this;PxSnsService.sns_snsTopic_list(this.classnewsreply_list_div+this.pageNo,this.pageNo,function(b){b&&(b.data.length<b.pageSize?$("#"+a.load_more_btn_id).hide():$("#"+a.load_more_btn_id).show(),a.pageNo++)})},refresh_data:function(){this.forceUpdate();this.pageNo=1;$("#"+this.classnewsreply_list_div).html("");this.load_more_data()},handleClick:function(a){PxSnsService.btnclick_sns_snsTopic(a)},render:function(){this.load_more_btn_id="load_more_"+this.props.uuid;return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"secondary",onClick:this.handleClick.bind(this,"add")},"\u521b\u5efa\u8bdd\u9898")),React.createElement("div",{id:this.classnewsreply_list_div,className:"am-list-news-bd"}),React.createElement("div",{className:"am-list-news-ft"},React.createElement("a",{className:"am-list-news-more am-btn am-btn-default ",id:this.load_more_btn_id,onClick:this.load_more_data.bind(this)},"\u67e5\u770b\u66f4\u591a \u00bb")))}}),sns_list_snsTopic_rect=React.createClass({displayName:"sns_list_snsTopic_rect",render:function(){return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement("div",{className:"am-list-news-bd"},React.createElement("ul",{className:"am-list"},this.props.events.data.map(function(a){return React.createElement("li",{className:"am-g am-list-item-dated"},React.createElement("a",{href:"javascript:void(0);",className:"am-list-item-hd",onClick:PxSnsService.ajax_sns_snsTopic_show.bind(this,a.uuid,a.title)},a.title),React.createElement("div",{className:"am-list-item-text"},"\u6709",a.reply_count,"\u4eba\u56de\u590d|",a.create_time,"-",PxSnsService.img_data_list(a.level)))}))))}}),Sns_snsTopic_add_edit=React.createClass({displayName:"Sns_snsTopic_add_edit",getInitialState:function(){return this.props.formdata},handleChange:function(a){this.setState($("#snsAnnouncementsForm").serializeJson())},componentDidMount:function(){var a=$("#announce_message").xheditor(xhEditor_upImgOption_mfull);this.editor=a;w_img_upload_nocut.bind_onchange("#file_img_upload",function(b){a.pasteHTML('\x3cimg width\x3d"100%"   src\x3d"'+b+'"/\x3e')})},preview_fn:function(){G_html_preview("t_iframe",this.state.url,this.editor.getSource(),this.state.title)},render:function(){var a=this.state;return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement("div",{className:"am-g"},React.createElement("div",{className:"am-u-lg-6 am-u-sm-12"},React.createElement("form",{id:"snsAnnouncementsForm",method:"post",className:"am-form"},React.createElement("input",{type:"hidden",name:"uuid",value:a.uuid}),React.createElement("input",{type:"hidden",name:"section_id",value:a.section_id}),React.createElement("label",{htmlFor:"name"},"\u6807\u9898:"),React.createElement("input",{type:"text",name:"title",id:"title",value:a.title,onChange:this.handleChange,maxLength:"128",placeholder:"\u4e0d\u8d85\u8fc7128\u4f4d"}),React.createElement("br",null),React.createElement(AMR_Input,{id:"announce_message",type:"textarea",rows:"10",label:"\u5185\u5bb9:",placeholder:"\u586b\u5199\u5185\u5bb9",name:"content",value:a.content,onChange:this.handleChange}),G_get_upload_img_Div(),React.createElement("button",{type:"button",onClick:PxSnsService.ajax_sns_snsTopic_save,className:"am-btn am-btn-primary"},"\u63d0\u4ea4"),React.createElement("button",{type:"button",onClick:this.preview_fn.bind(this),className:"am-btn am-btn-primary"},"\u9884\u89c8"))),React.createElement("div",{className:"am-u-lg-6 am-u-sm-12 "},React.createElement(G_phone_iframe,null))))}}),sns_Announcements_goodshow=React.createClass({displayName:"sns_Announcements_goodshow",handleClick:function(a,b){PxSnsService.btnclick_sns_announce(a,b)},render:function(){var a=this.props.data,b="G_Edit_hide";this.props.canEdit&&(b="G_Edit_show");var c=null,c=a.url?React.createElement("iframe",{id:"t_iframe",onLoad:G_iFrameHeight.bind(this,"t_iframe"),frameborder:"0",scrolling:"auto",marginheight:"0",marginwidth:"0",width:"100%",height:"600px",src:a.url}):React.createElement(AMUIReact.Article,{title:a.title,meta:Vo.announce_type(a.type)+" | "+a.create_time+"|\u8d5e\u6210"+this.props.data.yes_count+"\u4eba|\u53cd\u5bf9"+this.props.data.no_count+"\u4eba"},React.createElement("div",{dangerouslySetInnerHTML:{__html:a.content}}));return React.createElement("div",null,c,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:b,amStyle:"primary",onClick:this.handleClick.bind(this,"edit",a.uuid)},"\u7f16\u8f91"),React.createElement(AMR_Button,{className:b,amStyle:"danger",onClick:this.handleClick.bind(this,"del",a.uuid)},"\u5220\u9664"),React.createElement(AMR_Button,{className:G_CallPhoneFN.canShareUrl()?"":"am-hide",amStyle:"primary",onClick:G_CallPhoneFN.setShareContent.bind(this,a.title,a.title,null,this.props.share_url)},"\u5206\u4eab")),React.createElement("footer",{className:"am-comment-footer"},React.createElement("div",{className:"am-comment-actions"},React.createElement("a",{href:"javascript:void(0);"},React.createElement("i",{id:"btn_dianzan_"+a.uuid,className:"am-icon-thumbs-up px_font_size_click"})),React.createElement("a",{href:"javascript:void(0);"},React.createElement("i",{id:"btn_dianzan2_"+a.uuid,className:"am-icon-thumbs-down px_font_size_click"})),React.createElement("a",{href:"javascript:void(0);",onClick:common_check_illegal.bind(this,3,a.uuid)},"\u4e3e\u62a5"))),React.createElement(Sns_Dianzan_Yes_show_noAction,{uuid:a.uuid,type:0,btn_dianzan:"btn_dianzan_"+a.uuid}),React.createElement(Sns_Dianzan_No_show_noAction,{uuid:a.uuid,type:0,btn_dianzan:"btn_dianzan2_"+a.uuid}),React.createElement(Sns_reply_list,{uuid:a.uuid,type:0}))}}),Sns_reply_list=React.createClass({displayName:"Sns_reply_list",load_more_btn_id:"load_more_",pageNo:1,classnewsreply_list_div:"classnewsreply_list_div",componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var a=PxSnsService.sns_ajax_reply_list(this.props.uuid,this.classnewsreply_list_div+this.pageNo,this.pageNo);a.data.length<a.pageSize?$("#"+this.load_more_btn_id).hide():$("#"+this.load_more_btn_id).show();this.pageNo++},refreshReplyList:function(){$("#"+this.classnewsreply_list_div).html("");this.pageNo=1;this.load_more_data()},render:function(){this.load_more_btn_id="load_more_"+this.props.uuid;this.classnewsreply_list_div="classnewsreply_list_div"+this.props.uuid;return React.createElement("div",null,React.createElement("div",{id:this.classnewsreply_list_div}),React.createElement("button",{id:this.load_more_btn_id,type:"button",onClick:this.load_more_data.bind(this),className:"am-btn am-btn-primary"},"\u52a0\u8f7d\u66f4\u591a"),React.createElement(Sns_ajax_reply_save,{uuid:this.props.uuid,type:this.props.type,parentThis:this}))}}),Sns_ajax_reply_save=React.createClass({displayName:"Sns_ajax_reply_save",classnewsreply_list_div:"classnewsreply_list_div",reply_save_btn_click:function(){var a=this.props.parentThis;PxSnsService.sns_common_ajax_reply_save(function(){a.refreshReplyList()})},componentDidMount:function(){$("#classnews_content_replay").xheditor(xhEditor_upImgOption_emot)},render:function(){return React.createElement("form",{id:"snsClassnewsreplyForm",method:"post",className:"am-form",action:"javascript:void(0);"},React.createElement("input",{type:"hidden",name:"topic_uuid",value:this.props.uuid}),React.createElement("input",{type:"hidden",name:"uuid"}),React.createElement("input",{type:"hidden",name:"type",value:this.props.uuid}),React.createElement(AMR_Input,{id:"classnews_content_replay",type:"textarea",rows:"4",label:"\u6211\u8981\u8bc4\u8bba",placeholder:"\u586b\u5199\u5185\u5bb9",name:"content"}),React.createElement("button",{type:"button",onClick:this.reply_save_btn_click.bind(this),className:"am-btn am-btn-primary"},"\u63d0\u4ea4"))}}),Sns_Classnewsreply_listshow=React.createClass({displayName:"Sns_Classnewsreply_listshow",render:function(){return React.createElement("div",null,this.props.events.data.map(function(a){a.create_img||(a.create_img=G_def_headImgPath);return React.createElement("article",{className:"am-comment am-comment-flip am-comment-success am-margin-xs"},React.createElement("a",{href:"javascript:void(0);"},React.createElement("img",{src:a.create_img,className:"am-comment-avatar",width:"48",height:"48"})),React.createElement("div",{className:"am-comment-main am-comment-flip"},React.createElement("header",{className:"am-comment-hd"},React.createElement("div",{className:"am-comment-meta"},React.createElement("a",{href:"#link-to-user",className:"am-comment-author"},a.create_user),"|",React.createElement("time",null,a.create_time),"|")),React.createElement("div",{className:"am-comment-bd am-comment-flip am-inline"},React.createElement("div",{dangerouslySetInnerHTML:{__html:a.content}})),React.createElement("footer",{className:"am-comment-footer"},React.createElement("div",{className:"am-comment-actions"},React.createElement("a",{href:"javascript:void(0);"},React.createElement("i",{id:"btn_dianzan_"+a.uuid,className:"am-icon-thumbs-up px_font_size_click"})),React.createElement("a",{href:"javascript:void(0);"},React.createElement("i",{id:"btn_dianzan2_"+a.uuid,className:"am-icon-thumbs-down px_font_size_click"})))),React.createElement(Sns_snsReply_Yes_show_noAction,{uuid:a.uuid,type:0,btn_dianzan:"btn_dianzan_"+a.uuid}),React.createElement(Sns_snsReply_No_show_noAction,{uuid:a.uuid,type:0,btn_dianzan:"btn_dianzan2_"+a.uuid})))}))}}),Sns_Dianzan_Yes_show_noAction=React.createClass({displayName:"Sns_Dianzan_Yes_show_noAction",getInitialState:function(){return this.props.dianzan?this.props.dianzan:commons_ajax_dianzan_getByNewsuuid(this.props.uuid)},componentWillReceiveProps:function(a){this.setState(commons_ajax_dianzan_getByNewsuuid(a.uuid))},handleChange_selectgroup_uuid:function(a){this.setState(this.load_role_bind_user(a))},obj:null,componentDidMount:function(){var a=this;a.obj.canDianzan||$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan");$("#"+this.props.btn_dianzan).bind("click",function(){var b=0==$("#"+a.props.btn_dianzan).hasClass("px-icon-hasdianzan");PxSnsService.sns_ajax_dianzan_yes_save(a.props.uuid,b,a.dianzansave_callback)})},dianzansave_callback:function(a){a?$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan"):$("#"+this.props.btn_dianzan).removeClass("px-icon-hasdianzan");this.setState(commons_ajax_dianzan_getByNewsuuid(this.props.uuid))},render:function(){var a=this.state;this.obj=a;return a.names?React.createElement("div",null):null}}),Sns_Dianzan_No_show_noAction=React.createClass({displayName:"Sns_Dianzan_No_show_noAction",getInitialState:function(){return this.props.dianzan?this.props.dianzan:commons_ajax_dianzan_getByNewsuuid(this.props.uuid)},componentWillReceiveProps:function(a){this.setState(commons_ajax_dianzan_getByNewsuuid(a.uuid))},handleChange_selectgroup_uuid:function(a){this.setState(this.load_role_bind_user(a))},obj:null,componentDidMount:function(){var a=this;a.obj.canDianzan||$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan");$("#"+this.props.btn_dianzan).bind("click",function(){var b=0==$("#"+a.props.btn_dianzan).hasClass("px-icon-hasdianzan");PxSnsService.sns_ajax_dianzan_No_save(a.props.uuid,b,a.dianzansave_callback)})},dianzansave_callback:function(a){a?$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan"):$("#"+this.props.btn_dianzan).removeClass("px-icon-hasdianzan");this.setState(commons_ajax_dianzan_getByNewsuuid(this.props.uuid))},render:function(){var a=this.state;this.obj=a;return a.names?React.createElement("div",null):null}}),Sns_snsReply_Yes_show_noAction=React.createClass({displayName:"Sns_snsReply_Yes_show_noAction",getInitialState:function(){return this.props.dianzan?this.props.dianzan:commons_ajax_dianzan_getByNewsuuid(this.props.uuid)},componentWillReceiveProps:function(a){this.setState(commons_ajax_dianzan_getByNewsuuid(a.uuid))},handleChange_selectgroup_uuid:function(a){this.setState(this.load_role_bind_user(a))},obj:null,componentDidMount:function(){var a=this;a.obj.canDianzan||$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan");$("#"+this.props.btn_dianzan).bind("click",function(){var b=0==$("#"+a.props.btn_dianzan).hasClass("px-icon-hasdianzan");PxSnsService.sns_snsReply_yes_save(a.props.uuid,b,a.dianzansave_callback)})},dianzansave_callback:function(a){a?$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan"):$("#"+this.props.btn_dianzan).removeClass("px-icon-hasdianzan");this.setState(commons_ajax_dianzan_getByNewsuuid(this.props.uuid))},render:function(){var a=this.state;this.obj=a;return a.names?React.createElement("div",null):null}}),Sns_snsReply_No_show_noAction=React.createClass({displayName:"Sns_snsReply_No_show_noAction",getInitialState:function(){return this.props.dianzan?this.props.dianzan:commons_ajax_dianzan_getByNewsuuid(this.props.uuid)},componentWillReceiveProps:function(a){this.setState(commons_ajax_dianzan_getByNewsuuid(a.uuid))},handleChange_selectgroup_uuid:function(a){this.setState(this.load_role_bind_user(a))},obj:null,componentDidMount:function(){var a=this;a.obj.canDianzan||$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan");$("#"+this.props.btn_dianzan).bind("click",function(){var b=0==$("#"+a.props.btn_dianzan).hasClass("px-icon-hasdianzan");PxSnsService.sns_snsReply_No_save(a.props.uuid,b,a.dianzansave_callback)})},dianzansave_callback:function(a){a?$("#"+this.props.btn_dianzan).addClass("px-icon-hasdianzan"):$("#"+this.props.btn_dianzan).removeClass("px-icon-hasdianzan");this.setState(commons_ajax_dianzan_getByNewsuuid(this.props.uuid))},render:function(){var a=this.state;this.obj=a;return a.names?React.createElement("div",null):null}});