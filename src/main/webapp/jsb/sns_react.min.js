

//——————————————————————————话题<绘制>—————————————————————  
/* 
 * <话题>绘制舞台1.0
 * @逻辑：绘制一个Div 每次点击加载更多按钮事把 新的一个Div添加到舞台上；
 * @我要发信息 加载更多等模板和按钮在此处添加上舞台 和DIV<信息>分离开；
 * */var Sns_Div=React.createClass({displayName:"Sns_Div",load_more_btn_id:"load_more_",pageNo:1,classnewsreply_list_div:"am-list-news-bd",componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var a=this;PxSnsService.sns_snsTopic_list(this.classnewsreply_list_div+this.pageNo,this.pageNo,function(b){b&&(b.data.length<b.pageSize?$("#"+a.load_more_btn_id).hide():$("#"+a.load_more_btn_id).show(),a.pageNo++)})},refresh_data:function(){this.forceUpdate();this.pageNo=1;$("#"+this.classnewsreply_list_div).html("");this.load_more_data()},handleClick:function(a){PxSnsService.btnclick_sns_snsTopic(a)},render:function(){this.load_more_btn_id="load_more_"+this.props.uuid;return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"secondary",onClick:this.handleClick.bind(this,"add")},"\u521b\u5efa\u8bdd\u9898")),React.createElement("div",{id:this.classnewsreply_list_div,className:"am-list-news-bd"}),React.createElement("div",{className:"am-list-news-ft"},React.createElement("a",{className:"am-list-news-more am-btn am-btn-default ",id:this.load_more_btn_id,onClick:this.load_more_data.bind(this)},"\u67e5\u770b\u66f4\u591a \u00bb")))}}),sns_list_snsTopic_rect=React.createClass({displayName:"sns_list_snsTopic_rect",render:function(){var a=hostUrlCDN+"i/fine.png",b=hostUrlCDN+"i/hot.png";return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement("div",{className:"am-list-news-bd"},React.createElement("ul",{className:"am-list"},this.props.events.data.map(function(c){return React.createElement("li",{className:"am-g am-list-item-dated"},React.createElement(AMUIReact.Image,{className:2==c.level?"am-show":"am-hide",id:"img_head_image",src:a}),React.createElement(AMUIReact.Image,{className:1==c.level?"am-show":"am-hide",id:"img_head_image",src:b}),React.createElement("a",{href:"javascript:void(0);",className:"am-list-item-hd",onClick:PxSnsService.ajax_sns_snsTopic_show.bind(this,c.uuid)},React.createElement("h4",null,c.title)),React.createElement("div",{className:"am-list-item-text"},React.createElement("h4",{onClick:PxSnsService.ajax_sns_snsTopic_show.bind(this,c.uuid)},"\u6458\u8981\uff1a",c.summary)),React.createElement(AMUIReact.Image,{onClick:PxSnsService.ajax_sns_snsTopic_show.bind(this,c.uuid),className:0==c.imgList.length?"am-hide":"am-show",id:"img_head_image",width:"88",height:"88",src:c.imgList}),React.createElement("div",{className:"am-list-item-text"},"\u6709",c.reply_count,"\u4eba\u56de\u590d|",c.create_time))}))))}}),Sns_snsTopic_add_edit=React.createClass({displayName:"Sns_snsTopic_add_edit",getInitialState:function(){return this.props.formdata},handleChange:function(a){this.setState($("#snsAnnouncementsForm").serializeJson())},componentDidMount:function(){var a=$("#announce_message").xheditor(xhEditor_upImgOption_mfull);this.editor=a;w_img_upload_nocut.bind_onchange("#file_img_upload",function(b){a.pasteHTML('\x3cimg width\x3d"100%"   src\x3d"'+b+'"/\x3e')})},preview_fn:function(){G_html_preview("t_iframe",this.state.url,this.editor.getSource(),this.state.title)},render:function(){var a=this.state;return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement("div",{className:"am-g"},React.createElement("div",{className:"am-u-lg-6 am-u-sm-12"},React.createElement("form",{id:"snsAnnouncementsForm",method:"post",className:"am-form"},React.createElement("input",{type:"hidden",name:"uuid",value:a.uuid}),React.createElement("input",{type:"hidden",name:"section_id",value:a.section_id}),React.createElement("label",{htmlFor:"name"},"\u6807\u9898:"),React.createElement("input",{type:"text",name:"title",id:"title",value:a.title,onChange:this.handleChange,maxLength:"128",placeholder:"\u4e0d\u8d85\u8fc7128\u4f4d"}),React.createElement("br",null),React.createElement(AMR_Input,{id:"announce_message",type:"textarea",rows:"10",label:"\u5185\u5bb9:",placeholder:"\u586b\u5199\u5185\u5bb9",name:"content",value:a.content,onChange:this.handleChange}),G_get_upload_img_Div(),React.createElement("button",{type:"button",onClick:PxSnsService.ajax_sns_snsTopic_save,className:"am-btn am-btn-primary"},"\u63d0\u4ea4"),React.createElement("button",{type:"button",onClick:this.preview_fn.bind(this),className:"am-btn am-btn-primary"},"\u9884\u89c8"))),React.createElement("div",{className:"am-u-lg-6 am-u-sm-12 "},React.createElement(G_phone_iframe,null))))}}),sns_snsTopicshow=React.createClass({displayName:"sns_snsTopicshow",favorites_push:function(a,b,c,d){commons_ajax_favorites_push(a,b,c,d)},handleClick:function(a,b){PxSnsService.btnclick_sns_snsTopic(a,b)},render:function(){var a=this.props.data,b={uuid:a.uuid,status:this.props.dianZan,yes_count:a.yes_count,no_count:a.no_count},c="G_Edit_hide";this.props.canEdit&&(c="G_Edit_show");var d=null,d=a.url?React.createElement("iframe",{id:"t_iframe",onLoad:G_iFrameHeight.bind(this,"t_iframe"),frameborder:"0",scrolling:"auto",marginheight:"0",marginwidth:"0",width:"100%",height:"600px",src:a.url}):React.createElement(AMUIReact.Article,{title:a.title,meta:Vo.announce_type(a.type)+" | "+a.create_time},React.createElement("div",{dangerouslySetInnerHTML:{__html:a.content}}));return React.createElement("div",null,d,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:c,amStyle:"primary",onClick:this.handleClick.bind(this,"edit",a.uuid)},"\u7f16\u8f91"),React.createElement(AMR_Button,{className:c,amStyle:"danger",onClick:this.handleClick.bind(this,"del",a.uuid)},"\u5220\u9664"),React.createElement(AMR_Button,{amStyle:"success",onClick:this.favorites_push.bind(this,a.title,a.type,a.uuid)},"\u6536\u85cf"),React.createElement(AMR_Button,{amStyle:"primary",onClick:G_CallPhoneFN.setShareContent.bind(this,a.title,a.title,null,this.props.share_url)},"\u5206\u4eab"),React.createElement(AMR_Button,{className:G_CallPhoneFN.canShareUrl()?"":"am-hide",amStyle:"primary",onClick:G_CallPhoneFN.setShareContent.bind(this,a.title,a.title,null,this.props.share_url)},"\u5206\u4eab")),React.createElement(Sns_comment_actions,{data:b}),React.createElement(Sns_reply_list,{uuid:a.uuid,type:71}))}}),Sns_comment_actions=React.createClass({displayName:"Sns_comment_actions",getInitialState:function(){if(this.props.data)return this.props.data},callback_yes:function(a){a=this.state;1==a.status?(--a.yes_count,a.status=null):(a.yes_count+=1,a.status=1);this.setState(a)},yes_click:function(a){if(2!=a.status){var b=hostUrl+"rest/snsTopic/yes.json";1==a.status&&(b=hostUrl+"rest/snsTopic/cancelDianzan.json");PxSnsService.ajax_sns_dianzan(b,a.uuid,this.callback_yes)}},callback_no:function(){var a=this.state;2==a.status?(--a.no_count,a.status=null):(a.no_count+=1,a.status=2);this.setState(a)},no_click:function(a){if(1!=a.status){var b=hostUrl+"rest/snsTopic/no.json";2==a.status&&(b=hostUrl+"rest/snsTopic/cancelDianzan.json");PxSnsService.ajax_sns_dianzan(b,a.uuid,this.callback_no)}},render:function(){var a=this.state,b="",c="";1==a.status?(b="px-icon-hasdianzan",c=""):2==a.status&&(c="px-icon-hasdianzan",b="");return React.createElement("footer",{className:"am-comment-footer"},React.createElement("div",{className:"am-comment-actions"},React.createElement("a",{href:"javascript:void(0);",onClick:this.yes_click.bind(this,a)},React.createElement("i",{className:"am-icon-thumbs-up px_font_size_click "+b})),"\u8d5e\u6210",a.yes_count,"\u4eba",React.createElement("a",{href:"javascript:void(0);",onClick:this.no_click.bind(this,a)},React.createElement("i",{className:"am-icon-thumbs-down px_font_size_click "+c})),"\u53cd\u5bf9",a.no_count,"\u4eba",React.createElement("a",{href:"javascript:void(0);",onClick:common_check_illegal.bind(this,71,a.uuid)},React.createElement("h5",null,"\u4e3e\u62a5"))))}}),Sns_snsReply_comment_actions=React.createClass({displayName:"Sns_snsReply_comment_actions",getInitialState:function(){if(this.props.data)return this.props.data},callback_yes:function(a){a=this.state;1==a.dianZan?(--a.yes_count,a.dianZan=null):(a.yes_count+=1,a.dianZan=1);this.setState(a)},yes_click:function(a){if(2!=a.dianZan){var b=hostUrl+"rest/snsReply/yes.json";1==a.dianZan&&(b=hostUrl+"rest/snsReply/cancelDianzan.json");PxSnsService.ajax_sns_dianzan(b,a.uuid,this.callback_yes)}},callback_no:function(){var a=this.state;2==a.dianZan?(--a.no_count,a.dianZan=null):(a.no_count+=1,a.dianZan=2);this.setState(a)},no_click:function(a){if(1!=a.dianZan){var b=hostUrl+"rest/snsReply/no.json";2==a.dianZan&&(b=hostUrl+"rest/snsReply/cancelDianzan.json");PxSnsService.ajax_sns_dianzan(b,a.uuid,this.callback_no)}},render:function(){var a=this.state,b="",c="";1==a.dianZan?(b="px-icon-hasdianzan",c=""):2==a.dianZan&&(c="px-icon-hasdianzan",b="");return React.createElement("footer",{className:"am-comment-footer"},React.createElement("div",{className:"am-comment-actions"},React.createElement("a",{href:"javascript:void(0);",onClick:this.yes_click.bind(this,a)},React.createElement("i",{className:"am-icon-thumbs-up px_font_size_click "+b})),"\u8d5e\u6210",a.yes_count,"\u4eba",React.createElement("a",{href:"javascript:void(0);",onClick:this.no_click.bind(this,a)},React.createElement("i",{className:"am-icon-thumbs-down px_font_size_click "+c})),"\u53cd\u5bf9",a.no_count,"\u4eba",React.createElement("a",{href:"javascript:void(0);",onClick:common_check_illegal.bind(this,72,a.uuid)},"\u4e3e\u62a5")))}}),Sns_reply_list_show=React.createClass({displayName:"Sns_reply_list_show",pinlun:function(a){PxSnsService.react_ajax_sns_pinglun(a)},render:function(){var a=this;return React.createElement("div",null,this.props.events.data.map(function(b){b.create_img||(b.create_img=G_def_headImgPath);return React.createElement("article",{className:"am-comment am-comment-flip am-comment-success am-margin-xs"},React.createElement("a",{href:"javascript:void(0);"},React.createElement("img",{src:b.create_img,className:"am-comment-avatar",width:"48",height:"48"})),React.createElement("div",{className:"am-comment-main am-comment-flip"},React.createElement("header",{className:"am-comment-hd"},React.createElement("div",{className:"am-comment-meta"},React.createElement("a",{href:"#link-to-user",className:"am-comment-author"},b.create_user),"|",React.createElement("time",null,b.create_time))),React.createElement("div",{className:"am-comment-bd am-comment-flip am-inline"},React.createElement("div",{dangerouslySetInnerHTML:{__html:b.content}})),React.createElement(Sns_snsReply_comment_actions,{data:b}),React.createElement("footer",{className:"am-comment-footer"},React.createElement("div",{className:"am-comment-actions"},React.createElement("a",{href:"javascript:void(0);",onClick:a.pinlun.bind(this,b)},React.createElement("i",{className:"am-icon-reply px_font_size_click"}),"\u56de\u590d")))))}))}}),Sns_info_event=React.createClass({displayName:"Sns_info_event",render:function(){var a=this.props.event;return React.createElement("div",null,React.createElement("article",{className:"am-comment am-comment-flip am-comment-success am-margin-xs"},React.createElement("a",{href:"javascript:void(0);"},React.createElement("img",{src:a.create_img,className:"am-comment-avatar",width:"48",height:"48"})),React.createElement("div",{className:"am-comment-main am-comment-flip"},React.createElement("header",{className:"am-comment-hd"},React.createElement("div",{className:"am-comment-meta"},React.createElement("a",{href:"#link-to-user",className:"am-comment-author"},a.create_user),"|",React.createElement("time",null,a.create_time),"|")),React.createElement("div",{className:"am-comment-bd am-comment-flip am-inline"},React.createElement("div",{dangerouslySetInnerHTML:{__html:a.content}})))),React.createElement(Sns_reply_list,{uuid:a.uuid,type:72}))}}),Sns_pinglun_list=React.createClass({displayName:"Sns_pinglun_list",render:function(){return React.createElement("div",null,this.props.events.data.map(function(a){a.create_img||(a.create_img=G_def_headImgPath);return React.createElement("article",{className:"am-comment am-comment-flip am-comment-success am-margin-xs"},React.createElement("a",{href:"javascript:void(0);"},React.createElement("img",{src:a.create_img,className:"am-comment-avatar",width:"48",height:"48"})),React.createElement("div",{className:"am-comment-main am-comment-flip"},React.createElement("header",{className:"am-comment-hd"},React.createElement("div",{className:"am-comment-meta"},React.createElement("a",{href:"#link-to-user",className:"am-comment-author"},a.create_user),"|",React.createElement("time",null,a.create_time),"|")),React.createElement("div",{className:"am-comment-bd am-comment-flip am-inline"},React.createElement("div",{dangerouslySetInnerHTML:{__html:a.content}}))))}))}}),Sns_reply_list=React.createClass({displayName:"Sns_reply_list",load_more_btn_id:"load_more_",pageNo:1,classnewsreply_list_div:"classnewsreply_list_div",componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var a=PxSnsService.ajax_sns_reply_list(this.props.uuid,this.classnewsreply_list_div+this.pageNo,this.pageNo,this.props.type);a.data.length<a.pageSize?$("#"+this.load_more_btn_id).hide():$("#"+this.load_more_btn_id).show();this.pageNo++},refreshReplyList:function(){$("#"+this.classnewsreply_list_div).html("");this.pageNo=1;this.load_more_data()},render:function(){this.load_more_btn_id="load_more_"+this.props.uuid;this.classnewsreply_list_div="classnewsreply_list_div"+this.props.uuid;return React.createElement("div",null,React.createElement("div",{id:this.classnewsreply_list_div}),React.createElement("button",{id:this.load_more_btn_id,type:"button",onClick:this.load_more_data.bind(this),className:"am-btn am-btn-primary"},"\u52a0\u8f7d\u66f4\u591a"),React.createElement(Sns_ajax_reply_save,{uuid:this.props.uuid,type:this.props.type,parentThis:this}))}}),Sns_ajax_reply_save=React.createClass({displayName:"Sns_ajax_reply_save",classnewsreply_list_div:"classnewsreply_list_div",reply_save_btn_click:function(){var a=this.props.parentThis;PxSnsService.ajax_sns_reply_save(function(){a.refreshReplyList()})},componentDidMount:function(){$("#classnews_content_replay").xheditor(xhEditor_upImgOption_emot)},render:function(){var a,b=this.props.type;React.createElement("div",null);a=71==b?React.createElement("div",null,React.createElement("input",{type:"hidden",name:"topic_uuid",value:this.props.uuid})):React.createElement("div",null,React.createElement("input",{type:"hidden",name:"topic_uuid",value:this.props.uuid}),React.createElement("input",{type:"hidden",name:"reply_uuid",value:this.props.uuid}));return React.createElement("form",{id:"snsClassnewsreplyForm",method:"post",className:"am-form",action:"javascript:void(0);"},a,React.createElement("input",{type:"hidden",name:"type",value:b}),React.createElement(AMR_Input,{id:"classnews_content_replay",type:"textarea",rows:"4",label:"\u6211\u8981\u8bc4\u8bba",placeholder:"\u586b\u5199\u5185\u5bb9",name:"content"}),React.createElement("button",{type:"button",onClick:this.reply_save_btn_click.bind(this),className:"am-btn am-btn-primary"},"\u63d0\u4ea4"))}});