var KDPhotoItem=function(r,t,u){var f={callback:null,ajax_uploadByphone:function(a){b.ajax_uploadByphone(a)},query:function(a,b,e){var c;c||(c="");e=Store.getGroup();a=G_photo_groupuuid?G_photo_groupuuid:e[0].uuid;var d=Store.getMyByClassList(a);b=G_photo_classuuid?G_photo_classuuid:d&&0!=d.length?d[0].uuid:null;React.render(React.createElement(p,{groupuuid:a,label:c,group_List:G_selected_dataModelArray_byArray(e,"uuid","brand_name"),classList:G_selected_dataModelArray_byArray(d,"uuid","name"),classuuid:b}),G_get_div_body())}},k=[],p=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.getStateByPropes(this.props)},getStateByPropes:function(a){a=this.query_Label();return{query_My_All_list:1,groupList:this.props.group_List,classList:this.props.classList,queryForm:{groupuuid:this.props.groupuuid,label:this.props.label,classuuid:this.props.classuuid},label_list:a,pageNo:1,show_list:[],list:[]}},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},componentDidMount:function(){this.ajax_list();$(".am-gallery").pureview()},handle_onKeyDown:function(a){if(G_isKeyDown_enter(a))return this.handleClick_query(),!1},handleClick_query:function(a){this.state.pageNo=1;this.ajax_list()},query_Label:function(a,b){var e=[];$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryLabel.json",data:{group_uuid:a?this.state.queryForm.groupuuid:this.props.groupuuid,class_uuid:b?this.state.queryForm.classuuid:this.props.classuuid},dataType:"json",async:!1,success:function(a){"success"==a.ResMsg.status?(e=a.list,e.push({value:"",label:"\u6240\u6709"}),k=e.slice(0,-1)):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return e},ajax_list:function(){var a=this.state.queryForm;"\u6240\u6709"==a.label&&(a.label="");a.pageNo=this.state.pageNo;$.AMUI.progress.start();var b=this;$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryMy.json",data:a,dataType:"json",success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?b.ajax_callback(a.list):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})},ajax_callback:function(a){var b=this.query_Label(this.state.queryForm.groupuuid,this.state.queryForm.classuuid);this.state.label_list=b;this.state.list=null==a?[]:a.data;this.state.pageSize=a.pageSize;"1"==this.state.pageNo&&(this.state.totalCount=a.totalCount);this.setState(this.state)},handleChange_selectgroup:function(a){var b,e;b=1==this.state.query_My_All_list?Store.getMyByClassList(a):Store.getChooseClass(a);e||(e=b&&0!=b.length?b[0].uuid:null);1==this.state.query_My_All_list&&(G_photo_groupuuid=a,G_photo_classuuid=e);this.state.pageNo=1;this.state.queryForm.label="";this.state.queryForm.groupuuid=a;this.state.queryForm.classuuid=e;this.state.classList=G_selected_dataModelArray_byArray(b,"uuid","name");this.ajax_list()},handleChange_label:function(a){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());a=$("#queryForm").serializeJson();this.state.pageNo=1;this.state.queryForm=a;this.ajax_list()},handleChange:function(a){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());this.state.pageNo=1;this.state.queryForm.label="";this.state.queryForm.classuuid=a;this.ajax_list()},handleClick:function(a){React.render(React.createElement(c,{formdata:a}),G_get_div_body())},pageClick:function(a,b){var e=this.state,c=e.totalCount%e.pageSize,d=Math.round(e.totalCount/e.pageSize);"pre"==a?2>e.pageNo?G_msg_pop("\u7b2c\u4e00\u9875\u4e86"):(--e.pageNo,this.ajax_list(e)):"next"==a&&(!b||b.length<e.pageSize?G_msg_pop("\u6700\u540e\u4e00\u9875\u4e86"):e.pageNo==d&&0==c?G_msg_pop("\u6700\u540e\u4e00\u9875\u4e86"):(e.pageNo+=1,this.ajax_list(e)))},All_group_class:function(){var a,b,e,c;b=Store.getGroupNoGroup_wjd();a||(a=b[0].uuid);e=G_selected_dataModelArray_byArray(b,"uuid","brand_name");b=(c=Store.getChooseClass(a))&&0!=c.length?c[0].uuid:null;c=G_selected_dataModelArray_byArray(c,"uuid","name");this.state.pageNo=1;this.state.groupList=e;this.state.classList=c;this.state.queryForm.label="";this.state.queryForm.groupuuid=a;this.state.queryForm.classuuid=b;this.state.query_My_All_list=2;this.ajax_list()},My_group_class:function(){var a,b,c,d;b=Store.getGroup();a||(a=b[0].uuid);c=G_selected_dataModelArray_byArray(b,"uuid","brand_name");b=(d=Store.getMyByClassList(a))&&0!=d.length?d[0].uuid:null;d=G_selected_dataModelArray_byArray(d,"uuid","name");this.state.pageNo=1;this.state.groupList=c;this.state.classList=d;this.state.queryForm.label="";this.state.queryForm.groupuuid=a;this.state.queryForm.classuuid=b;this.state.query_My_All_list=1;this.ajax_list()},render:function(){var a,b,c,d=this.state.queryForm,g=this.state,m=this.state.list,f=[],k=[];m.pageNo=this.state.pageNo;1==g.query_My_All_list?(c="G_Edit_show",b="G_Edit_hide"):(c="G_Edit_hide",b="G_Edit_show");for(var l=0;l<g.label_list.length;l++)g.label_list[l].label&&(a={value:null,label:null},a.value=g.label_list[l].label,a.label=g.label_list[l].label,k.push(a));this.state.label_list=k;for(l=0;l<m.length;l++)a={path:null,uuid:null,label:null},a.path=m[l].path,a.uuid=m[l].uuid,a.label=m[l].label,f.push(a);m=G_get_pageSize_number(this.state.pageSize,this.state.totalCount);return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",f)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c"+g.pageNo+"/"+m+"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",f)},"\u4e0b\u4e00\u9875"),React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick.bind(this,g)},"\u4e0a\u4f20\u7167\u7247"),React.createElement(AMR_Button,{className:c,amStyle:"secondary",onClick:this.All_group_class.bind(this)},"\u67e5\u8be2\u6240\u6709\u73ed\u7ea7"),React.createElement(AMR_Button,{className:b,amStyle:"secondary",onClick:this.My_group_class.bind(this)},"\u67e5\u8be2\u6211\u7684\u73ed\u7ea7"))),React.createElement("label",null,"\u56fe\u7247\u603b\u6570\uff1a"+g.totalCount+"\u5f20"),React.createElement(AMUIReact.Form,{id:"queryForm",inline:!0,onKeyDown:this.handle_onKeyDown},React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"groupuuid",name:"groupuuid",onChange:this.handleChange_selectgroup,btnWidth:"200",data:g.groupList,btnStyle:"primary",value:d.groupuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"classuuid",name:"classuuid",placeholder:"\u73ed\u7ea7\u5207\u6362",onChange:this.handleChange,btnWidth:"200",data:g.classList,btnStyle:"primary",value:d.classuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"label",name:"label",placeholder:"\u6807\u7b7e\u5207\u6362",onChange:this.handleChange_label,btnWidth:"200",data:k,btnStyle:"primary",value:d.label})))),React.createElement("div",{className:"am-comment-bd"},React.createElement(q,{imgsList:f,Penthat:this,state:this.state})),React.createElement("legend",null),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",f)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c"+g.pageNo+"/"+m+"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",f)},"\u4e0b\u4e00\u9875")))}}),q=React.createClass({displayName:"Common_mg_Class_big_fn",handleClick:function(a,b){if(confirm("\u786e\u5b9a\u8981\u5220\u9664\u5417?")){var c=a.uuid;$.AMUI.progress.start();$.ajax({type:"POST",url:hostUrl+"rest/kDPhotoItem/delete.json?uuid\x3d"+c,dataType:"json",async:!0,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?b.ajax_list():alert(a.ResMsg.message)},rror:G_ajax_error_fn})}},render:function(){var a=this,b=this.props.Penthat;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(c){var d=c.path,g=c.label;g||(g="\u65e0");var f=d?d.split("@"):"";return React.createElement("li",{id:"Common_mg_Class_big_fn_item_"+c.uuid,className:"G_class_phtoto_Img"},React.createElement("div",{className:"am-gallery-item"},React.createElement("a",{href:f[0],title:""},React.createElement("img",{src:d,alt:"","data-rel":f[0]})),React.createElement("label",null,"\u6807\u7b7e\uff1a\u3010"+g+"\u3011")),React.createElement("div",{className:"G_class_phtoto_Img_close"},React.createElement(AMR_Button,{onClick:a.handleClick.bind(this,c,b)},"X")))})))}}),b={cropper:null,callbackFN:null,type:4,base64:null,groupuuid:null,do_lrz:function(){var a,c=b.upload_files_arr.pop();a=Math.round(G_img_Photo/G_img_number*100);G_that.state.photoNum=G_img_Photo;G_that.state.photoAllNum=G_img_number;G_that.state.num=a;G_that.state.btn_Letgo=!0;G_that.setState(G_that.state);c&&lrz(c,{before:function(){console.log("\u538b\u7f29\u5f00\u59cb")},fail:function(a){console.error(a)},always:function(){console.log("\u538b\u7f29\u7ed3\u675f")},done:function(a){console.log(a);a&&a.base64&&b.ajax_uploadByphone(a.base64)}})},upload_files_arr:[],bind_onchange:function(a,c){b.upload_files_arr=[];b.groupuuid=null;b.callbackFN=c;window.JavaScriptCall&&window.JavaScriptCall.selectImgForCallBack?$(a).bind("click",function(){G_CallPhoneFN.selectImgForCallBack("KDPhotoItem.ajax_uploadByphone","0","500")}):$(a).bind("change",function(){console.log("\u521d\u59cb\u4e0a\u4f20");G_img_number=G_img_Photo=0;var a=Math.round(G_img_Photo/G_img_number*100);G_that.state.photoNum=G_img_Photo;G_that.state.photoAllNum=G_img_number;G_that.state.num=a;G_that.setState(G_that.state);G_img_number=this.files.length;for(a=0;a<this.files.length;a++)b.upload_files_arr.push(this.files[a]);b.do_lrz()})},ajax_uploadByphone:function(a){$.AMUI.progress.start();formObject=$("#KdPhotoForm").serializeJson();formObject.base64=a;$.ajax({type:"POST",url:hostUrl+"rest/kDPhotoItem/uploadBase64.json",timeout:0,dataType:"json",data:formObject,async:!0,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?(G_img_Photo+=1,b.callbackFN&&(b.callbackFN(a.imgUrl,a.data.uuid),b.do_lrz())):alert(a.ResMsg.message)},error:G_ajax_error_fn})}};G_img_number=null;G_img_Photo=0;G_that=null;var c=React.createClass({displayName:"Img_photo_rect",getInitialState:function(){for(var a,b=0;b<k.length;b++)k[b].label&&(a={value:null,label:null},a.value=k[b].label,a.label=k[b].label,this.props.formdata.show_list.push(a));this.props.formdata.btn_Letgo=!1;this.props.formdata.div_list=[];this.props.formdata.show_list.push({value:"\u6dfb\u52a0\u65b0\u6807\u7b7e",label:"\u6dfb\u52a0\u65b0\u6807\u7b7e"});return this.props.formdata},buttion_black_Click:function(a){f.query(a.queryForm.groupuuid,a.queryForm.classuuid,a.pageNo)},imgDivNum:0,getNewImgDiv:function(){this.imgDivNum++;return"Classnews_edit_"+this.imgDivNum},addShowImg:function(a,b){var c=this.getNewImgDiv();$("#show_imgList").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");this.state.div_list.push({parentDivId:c});this.setState(this.state);React.render(React.createElement(d,{url:a,parentDivId:c,uuid:b}),document.getElementById(c))},upload_files_arr:[],componentDidMount:function(){this.editor=$("#classnews_content").xheditor(xhEditor_classnews_emot);var a=this;b.bind_onchange("#file_img_upload",function(b,c){a.addShowImg(b,c)});b.groupuuid=this.props.formdata.groupuuid;if($("#imgs").val())for(var c=$("#imgs").val().split(","),d=0;d<c.length;d++)this.addShowImg(c[d])},handleChange_label:function(a){"\u6dfb\u52a0\u65b0\u6807\u7b7e"==a?this.disp_prompt():(this.state.queryForm.label=a,this.setState(this.state),this.setState($("#KdPhotoForm").serializeJson()))},disp_prompt:function(){var a=prompt("\u81ea\u5b9a\u4e49\u6807\u7b7e(\u6700\u591a45\u4f4d)","");null!=a&&""!=a&&(this.state.queryForm.label=a,this.state.show_list.push({value:a,label:a}),this.setState(this.state),this.setState($("#KdPhotoForm").serializeJson()))},buttion_LestGo:function(){for(var a=0;a<this.state.div_list.length;a++)$("#"+this.state.div_list[a].parentDivId).remove();this.state.div_list=[];this.state.show_list=[];this.state.num=0;this.state.photoNum=0;this.state.photoAllNum=0;this.state.queryForm.label="";this.props.formdata.div_list=[];this.props.formdata.btn_Letgo=!1;this.setState(this.props.formdata)},render:function(){var a=this.state,b,c=Store.getGroupNameByUuid(a.queryForm.groupuuid),d=Store.getClassNameByUuid(a.queryForm.classuuid);G_that=this;var g=React.createElement(AMR_Input,{type:"file",label:"\u4e0a\u4f20\u56fe\u7247\uff1a",id:"file_img_upload",accept:"image/*",capture:"camera",multiple:!0});window.JavaScriptCall&&window.JavaScriptCall.selectImgForCallBack&&(g=React.createElement(AMR_Button,{amStyle:"primary",id:"file_img_upload"},"\u4e0a\u4f20\u56fe\u7247"));a.num||(a.num=0);a.photoNum||(a.photoNum=0);a.photoAllNum||(a.photoAllNum=0);b=0==a.btn_Letgo?"G_Edit_hide":"G_Edit_show";return React.createElement("div",{id:"KdPhotoForm_list_div"},React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement("div",{className:"am-g  am-u-md-6 am-u-sm-12"},React.createElement("form",{id:"KdPhotoForm",method:"post",className:"am-form"},React.createElement("input",{type:"hidden",name:"group_uuid",value:a.queryForm.groupuuid}),React.createElement("input",{type:"hidden",name:"class_uuid",value:a.queryForm.classuuid}),React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"label",name:"label",placeholder:"\u6807\u7b7e\u5207\u6362",onChange:this.handleChange_label,btnWidth:"200",data:a.show_list,btnStyle:"primary",value:a.queryForm.label}))),React.createElement("label",null,"\u6807\u7b7e\uff1a"+a.queryForm.label),React.createElement("br",null)),React.createElement("label",null,"\u5b66\u6821\uff1a"+c),React.createElement("br",null),React.createElement("label",null,"\u73ed\u7ea7\uff1a"+d),React.createElement("br",null),React.createElement("label",null,"\u56fe\u7247\u4e0a\u4f20\u8fdb\u5ea6:\u5df2\u5b8c\u6210"+a.photoNum+"/"+a.photoAllNum+"\u5f20"),React.createElement("div",null,React.createElement(AMUIReact.Progress,{now:a.num,label:"\u5df2\u4f20"+a.photoNum+"\u5f20"})),React.createElement("div",{id:"show_imgList"}),React.createElement("br",null),React.createElement("div",{className:"cls"}),g,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black_Click.bind(this,a)},"\u4fdd\u5b58\u5e76\u8fd4\u56de"),React.createElement(AMR_Button,{amSize:"xs",className:b,amStyle:"secondary",onClick:this.buttion_LestGo.bind(this)},"\u4fdd\u5b58\u7ee7\u7eed\u4e0a\u4f20"))))}}),d=React.createClass({displayName:"KDphoto_Img_canDel",deleteImg:function(a,b){$.AMUI.progress.start();$.ajax({type:"POST",url:hostUrl+"rest/kDPhotoItem/delete.json?uuid\x3d"+b,dataType:"json",async:!0,success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?$("#"+a).remove():alert(b.ResMsg.message)},rror:G_ajax_error_fn})},render:function(){var a=this.props.uuid;return React.createElement("div",{className:"G_cookplan_Img"},React.createElement("img",{className:"G_cookplan_Img_img",src:this.props.url,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this,this.props.parentDivId,a)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}});return f}(),KDClassNewPhotoItem=function(r,t,u){var f={callback:null,queryForSelect:function(b,c,d,a){var n;n||(n="");f.callback=a;d=Store.getGroup();b=b?b:d[0].uuid;a=Store.getMyByClassList(b);c=c?c:a&&0!=a.length?a[0].uuid:null;React.render(React.createElement(q,{groupuuid:b,label:n,group_List:G_selected_dataModelArray_byArray(d,"uuid","brand_name"),classList:G_selected_dataModelArray_byArray(a,"uuid","name"),classuuid:c}),G_get_div_second())}},k=React.createClass({displayName:"KDClassNewsPhotoItem_Img_canDel",deleteImg:function(b,c){var d=$("#"+c);$("#"+b).remove();d.removeClass("G_ch_cook_item_checked")},render:function(){return React.createElement("div",{className:"G_cookplan_Img"},React.createElement("img",{name:"KDClassNewsPhotoItem_Img_select",className:"G_cookplan_Img_img",src:this.props.url,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this,this.props.parentDivId,this.props.trid)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}}),p=React.createClass({displayName:"Common_mg_Classnew_big_fn",div_onClick:function(b,c){var d=$("#"+b),a="Common_mg_Class_big_fn_"+c.uuid;0<=d.attr("class").indexOf("G_ch_classNews_item_checked")?(d.removeClass("G_ch_classNews_item_checked"),$("#"+a).remove()):(d.addClass("G_ch_classNews_item_checked"),$("#abc").append("\x3cdiv id\x3d'"+a+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e"),React.render(React.createElement(k,{url:c.path,parentDivId:a,trid:b}),document.getElementById(a)))},render:function(){var b=this;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(c){var d=c.path,a=c.label;a||(a="\u65e0");return React.createElement("li",{id:"Common_mg_Class_big_fn_item_"+c.uuid,className:"G_class_phtoto_Img  G_ch_classNews_item ",title:c.uuid,onClick:b.div_onClick.bind(this,"Common_mg_Class_big_fn_item_"+c.uuid,c)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:d}),React.createElement("label",null,"\u6807\u7b7e\uff1a\u3010"+a+"\u3011")))})))}}),q=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.getStateByPropes(this.props)},getStateByPropes:function(b){b=this.query_Label();return{query_My_All_list:1,groupList:this.props.group_List,classList:this.props.classList,queryForm:{groupuuid:this.props.groupuuid,label:this.props.label,classuuid:this.props.classuuid},label_list:b,pageNo:1,show_list:[],list:[]}},componentWillReceiveProps:function(b){this.setState(this.getStateByPropes(b))},componentDidMount:function(){this.ajax_list()},handle_onKeyDown:function(b){if(G_isKeyDown_enter(b))return this.handleClick_query(),!1},handleClick_query:function(b){this.state.pageNo=1;this.ajax_list()},query_Label:function(b,c){var d=[];$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryLabel.json",data:{group_uuid:b?this.state.queryForm.groupuuid:this.props.groupuuid,class_uuid:c?this.state.queryForm.classuuid:this.props.classuuid},dataType:"json",async:!1,success:function(a){"success"==a.ResMsg.status?(d=a.list,d.push({value:"",label:"\u6240\u6709"}),d.slice(0,-1)):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return d},ajax_list:function(){var b=this.state.queryForm;"\u6240\u6709"==b.label&&(b.label="");b.pageNo=this.state.pageNo;$.AMUI.progress.start();var c=this;$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryMy.json",data:b,dataType:"json",success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?c.ajax_callback(b.list):(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn})},ajax_callback:function(b){var c=this.query_Label(this.state.queryForm.groupuuid,this.state.queryForm.classuuid);this.state.label_list=c;this.state.list=null==b?[]:b.data;this.state.pageSize=b.pageSize;"1"==this.state.pageNo&&(this.state.totalCount=b.totalCount);this.setState(this.state)},handleChange_selectgroup:function(b){var c,d;c=1==this.state.query_My_All_list?Store.getMyByClassList(b):Store.getChooseClass(b);d||(d=c&&0!=c.length?c[0].uuid:null);this.state.pageNo=1;this.state.queryForm.groupuuid=b;this.state.queryForm.classuuid=d;this.state.classList=G_selected_dataModelArray_byArray(c,"uuid","name");this.ajax_list()},handleChange_label:function(b){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());b=$("#queryForm").serializeJson();this.state.pageNo=1;this.state.queryForm=b;this.ajax_list()},handleChange:function(b){1==this.state.query_My_All_list&&(G_photo_classuuid=$("input[name\x3d'classuuid']").val());this.state.pageNo=1;this.state.queryForm.label="";this.state.queryForm.classuuid=b;this.ajax_list()},handleClick_selectbtn:function(b){var c=[];$("img[name\x3d'KDClassNewsPhotoItem_Img_select']").each(function(){c.push($(this).attr("src"))});f.callback&&f.callback(c);G_get_div_body()},pageClick:function(b,c){var d=this.state,a=d.totalCount%d.pageSize,f=Math.round(d.totalCount/d.pageSize);"pre"==b?2>d.pageNo?G_msg_pop("\u7b2c\u4e00\u9875\u4e86"):(--d.pageNo,this.ajax_list(d)):"next"==b&&(!c||c.length<d.pageSize?G_msg_pop("\u6700\u540e\u4e00\u9875\u4e86"):d.pageNo==f&&0==a?G_msg_pop("\u6700\u540e\u4e00\u9875\u4e86"):(d.pageNo+=1,this.ajax_list(d)))},btn_classPhtotItem:function(){G_photo_groupuuid=this.state.queryForm.groupuuid;G_photo_classuuid=this.state.queryForm.classuuid;KDPhotoItem.query()},All_group_class:function(){var b,c,d,a;c=Store.getGroupNoGroup_wjd();b||(b=c[0].uuid);d=G_selected_dataModelArray_byArray(c,"uuid","brand_name");c=(a=Store.getChooseClass(b))&&0!=a.length?a[0].uuid:null;a=G_selected_dataModelArray_byArray(a,"uuid","name");this.state.groupList=d;this.state.classList=a;this.state.queryForm.groupuuid=b;this.state.queryForm.classuuid=c;this.state.query_My_All_list=2;this.state.pageNo=1;this.ajax_list()},My_group_class:function(){var b,c,d,a;c=Store.getGroup();b||(b=c[0].uuid);d=G_selected_dataModelArray_byArray(c,"uuid","brand_name");c=(a=Store.getMyByClassList(b))&&0!=a.length?a[0].uuid:null;a=G_selected_dataModelArray_byArray(a,"uuid","name");this.state.groupList=d;this.state.classList=a;this.state.queryForm.groupuuid=b;this.state.queryForm.classuuid=c;this.state.query_My_All_list=1;this.state.pageNo=1;this.ajax_list()},render:function(){var b,c,d=this.state.queryForm,a=this.state;b=this.state.list;b.pageNo=this.state.pageNo;for(var f=[],e=[],h=React.createElement("div",null),h=0;h<a.label_list.length;h++)a.label_list[h].label&&(c={value:null,label:null},c.value=a.label_list[h].label,c.label=a.label_list[h].label,e.push(c));this.state.label_list=e;for(h=0;h<b.length;h++)c={path:null,groupuuid:null,classuuid:null,uuid:null,pageNo:null,label:null},c.path=b[h].path,c.groupuuid=a.queryForm.groupuuid,c.classuuid=a.queryForm.classuuid,c.uuid=b[h].uuid,c.pageNo=a.pageNo,c.label=b[h].label,f.push(c);b=0==f.length?"G_Edit_show":"G_Edit_hide";h=1==a.query_My_All_list?React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:"am-margin-top",amStyle:"secondary",onClick:this.All_group_class.bind(this)},"\u67e5\u8be2\u6240\u6709\u73ed\u7ea7")):React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:"am-margin-top",amStyle:"secondary",onClick:this.My_group_class.bind(this)},"\u67e5\u8be2\u6211\u7684\u73ed\u7ea7"));c=G_get_pageSize_number(this.state.pageSize,this.state.totalCount);return React.createElement("div",null,React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",f)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c"+a.pageNo+"/"+c+"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",f)},"\u4e0b\u4e00\u9875"),h)),React.createElement("label",null,"\u56fe\u7247\u603b\u6570\uff1a"+a.totalCount+"\u5f20"),React.createElement(AMUIReact.Form,{id:"queryForm",inline:!0,onKeyDown:this.handle_onKeyDown},React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"groupuuid",name:"groupuuid",onChange:this.handleChange_selectgroup,btnWidth:"200",data:a.groupList,btnStyle:"primary",value:d.groupuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"classuuid",name:"classuuid",placeholder:"\u73ed\u7ea7\u5207\u6362",onChange:this.handleChange,btnWidth:"200",data:a.classList,btnStyle:"primary",value:d.classuuid})),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"label",name:"label",placeholder:"\u6807\u7b7e\u5207\u6362",onChange:this.handleChange_label,btnWidth:"200",data:e,btnStyle:"primary",value:d.label})))),React.createElement("div",{className:b},React.createElement("label",null,"\u8be5\u73ed\u7ea7\u76f8\u518c\u6682\u672a\u4e0a\u4f20\u7167\u7247\uff0c\u8bf7\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c\u4e0a\u4f20\u65b0\u7167\u7247"),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.btn_classPhtotItem.bind(this)},"\u8df3\u8f6c\u73ed\u7ea7\u76f8\u518c"))),React.createElement("div",{className:"am-comment-bd"},React.createElement(p,{imgsList:f,state:this.state})),React.createElement("legend",null),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"pre",f)},"\u4e0a\u4e00\u9875"),React.createElement(AMR_Button,{amStyle:"default",disabled:"false"},"\u7b2c"+a.pageNo+"/"+c+"\u9875"),React.createElement(AMR_Button,{amStyle:"default",onClick:this.pageClick.bind(this,"next",f)},"\u4e0b\u4e00\u9875")),React.createElement("div",{id:"abc"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick_selectbtn.bind(this,a)},"\u786e\u8ba4\u7167\u7247\u9009\u62e9"))))}});return f}();