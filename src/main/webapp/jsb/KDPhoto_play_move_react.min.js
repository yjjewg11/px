var KDPhoto_play_move=function(z){function h(a,b){$("#parent_showDiv").remove();var c=$("\x3cdiv\x3e"+b+"\x3c/div\x3e");c.attr("id","parent_showDiv");c.addClass("G_img_selected_mask");c.appendTo("#"+a)}var g=React.createClass({displayName:"Query_photo_div",load_more_btn_id:"load_playMove_more_",pageNo:1,classnewsreply_list_div:"am-list-playMovePhoto-bd",getInitialState:function(){this.props.formdata.query_My_All_list=1;return this.props.formdata},componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var a=this;r(this.classnewsreply_list_div+this.pageNo,this,this.pageNo,function(b){b&&(b.data.length<b.pageSize?$("#"+a.load_more_btn_id).hide():$("#"+a.load_more_btn_id).show(),a.pageNo++)});this.setState(this.state)},refresh_data:function(){this.pageNo=1;$("#"+this.classnewsreply_list_div).html("");this.load_more_data()},handleClick_PlayMove:function(a){d={status:"0",status_List:[{value:"0",label:"\u53d1\u5e03"},{value:"1",label:"\u4e0d\u53d1\u5e03"}],uuid:"",Mp3Arry:[],imgArry:[],Mp3Name:null,Mp3uuid:null,btn_Letgo:!1,formdata:null,photo_uuids:null,title:null,tenokate:null};var b,c,e=p();e&&0!=e.length?(b=e[0].path,c=e[0].title):(b=null,c="");d.formdata=a;d.Mp3Arry=G_selected_dataModelArray_byArray(e,"path","title");d.Mp3uuid=b;d.Mp3Name=c;React.render(React.createElement(m),G_get_div_body())},All_group_class:function(){this.state.query_My_All_list=2;this.refresh_data()},My_group_class:function(){this.state.query_My_All_list=1;this.refresh_data()},phtot_class_Click:function(){KDPhotoItem.query()},render:function(){this.load_more_btn_id="load_playMove_more_"+this.props.uuid;var a,b,c,e=this.state;1==e.query_My_All_list?(c="G_Edit_show",b="G_Edit_hide"):(c="G_Edit_hide",b="G_Edit_show");a=0==e.list.length?"G_Edit_show":"G_Edit_hide";return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.phtot_class_Click.bind(this,e)},"\u73ed\u7ea7\u76f8\u518c"))),React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:c,amStyle:"secondary",onClick:this.All_group_class.bind(this)},"\u67e5\u8be2\u6240\u6709\u7cbe\u54c1\u76f8\u518c"),React.createElement(AMR_Button,{className:b,amStyle:"secondary",onClick:this.My_group_class.bind(this)},"\u67e5\u8be2\u6211\u7684\u7cbe\u54c1\u76f8\u518c"),React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick_PlayMove.bind(this,e)},"\u5236\u4f5c\u7cbe\u54c1\u76f8\u518c"))),React.createElement("div",{className:a},React.createElement("label",null,"\u8fd9\u91cc\u7a7a\u7a7a\u5982\u4e5f\uff0c\u5feb\u53bb\u5236\u4f5c\u81ea\u5df1\u7684\u7cbe\u54c1\u76f8\u518c\u5427")),React.createElement("div",{id:this.classnewsreply_list_div,className:"am-list-playMovePhoto-bd"}),React.createElement("div",{className:"am-list-news-ft"},React.createElement("a",{className:"am-list-news-more am-btn am-btn-default ",id:this.load_more_btn_id,onClick:this.load_more_data.bind(this)},"\u67e5\u770b\u66f4\u591a \u00bb")))}}),r=function(a,b,c,e){var d;d=1==b.state.query_My_All_list?hostUrl+"rest/kdMovie/queryMy.json":hostUrl+"rest/kdMovie/query.json";$.AMUI.progress.start();$.ajax({type:"GET",url:d,dataType:"json",async:!1,data:{pageNo:c},success:function(c){$.AMUI.progress.done();"success"==c.ResMsg.status?(b.state.list=c.list.data,React.render(React.createElement(t,{events:c.list,obj:b.state,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(a)),"function"==typeof e&&e(c.list)):(alert(c.ResMsg.message),G_resMsg_filter(c.ResMsg))},error:G_ajax_error_fn})},t=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.props.events},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},render:function(){return React.createElement("div",{className:"am-comment-bd"},React.createElement(u,{imgsList:this.state.data,obj:this.props.obj}))}}),u=React.createClass({displayName:"Common_mg_Classnew_big_fn",div_onClick:function(a){var b,c,e,k,f=p(),l=q(a.photo_uuids);b=a.create_useruuid;c=Store.getUserinfo().uuid;if(b==c){if(a.mp3)for(b=0;b<f.length;b++)a.mp3==f[b].path&&(e=f[b].path,k=f[b].title);else f&&0!=f.length?(e=f[0].path,k=f[0].title):(e=null,k="");c=n().data;for(b=0;b<c.length;b++)a.template_key==c[b].key&&(d.tenokate=c[b]);d.status=a.status+"";d.status_List=[{value:"0",label:"\u53d1\u5e03"},{value:"1",label:"\u4e0d\u53d1\u5e03"}];d.uuid=a.uuid;d.imgArry=l;d.herald=a.herald;d.formdata=this.props.obj;d.Mp3Arry=G_selected_dataModelArray_byArray(f,"path","title");d.Mp3uuid=e;d.Mp3Name=k;d.title=a.title;React.render(React.createElement(m),G_get_div_body())}else{if(a.mp3)for(b=0;b<f.length;b++)a.mp3==f[b].path&&(k=f[b].title);else k=f&&0!=f.length?f[0].title:"";c=n().data;for(b=0;b<c.length;b++)a.template_key==c[b].key&&(d.tenokate=c[b]);d.imgArry=l;d.herald=a.herald;d.formdata=this.props.obj;d.Mp3Name=k;d.title=a.title;React.render(React.createElement(Img_lookinfo_rect),G_get_div_body())}},fx_Photo_move:function(a,b){var c,e=a.uuid;$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/kdMovie/get.json?uuid\x3d"+e,dataType:"json",async:!0,success:function(e){$.AMUI.progress.done();"success"==e.ResMsg.status?0==b?(c={classuuid:"",url:e.share_url,content:a.title},React.render(React.createElement(Classnews_edit,{formdata:c,mycalsslist:G_selected_dataModelArray_byArray(Store.getMyClassList(),"uuid","name")}),G_get_div_body())):(c={groupuuid:Store.getCurGroup().uuid,type:3,url:e.share_url,title:a.title},React.render(React.createElement(Announcements_goodedit,{formdata:c,group_list:G_selected_dataModelArray_byArray(Store.getGroup(),"uuid","brand_name")}),G_get_div_body())):alert(e.ResMsg.message)},rror:G_ajax_error_fn})},Look_img_photo:function(a){a=a.uuid;$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/kdMovie/get.json?uuid\x3d"+a,dataType:"json",async:!0,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?G_CallPhoneFN.openNewWindowUrl(a.data.title,a.data.title,null,a.share_url)||React.render(React.createElement(v,{share_url:a.share_url}),G_get_div_second()):alert(a.ResMsg.message)},rror:G_ajax_error_fn})},render:function(){var a=this,b=[{value:"0",label:"\u73ed\u7ea7\u4e92\u52a8"},{value:"1",label:"\u7cbe\u54c1\u6587\u7ae0"}],c=Store.getUserinfo().uuid;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(e){var d,f,l=e.herald,h=e.create_time,g=e.title;d=e.create_useruuid;g||(g="\u65e0");d=d==c?"G_Edit_show":"G_Edit_hide";f=0==e.status?"":"-\u3010\u672a\u53d1\u5e03\u3011";return React.createElement("li",{id:"Common_mg_ClassNew_big_fn_item_"+e.uuid,className:"G_class_phtoto_Img  G_ch_classNews_item "},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMUIReact.Selected,{amSize:"xs",name:"uuid",placeholder:"\u5206\u4eab",onChange:a.fx_Photo_move.bind(this,e),btnWidth:"100",btnStyle:"primary",data:b})),React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:l}),React.createElement("label",null,"\u76f8\u518c\u540d\u79f0\uff1a"+g+"\u3010"+h+"\u3011"+f),React.createElement("br",null),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:a.Look_img_photo.bind(this,e)},"\u9884\u89c8"),React.createElement(AMR_Button,{amSize:"xs",className:d,amStyle:"secondary",onClick:a.div_onClick.bind(this,e)},"\u7f16\u8f91"))))})))}}),v=React.createClass({displayName:"Photo_move_div",render:function(){return React.createElement("div",{id:"list_div"},React.createElement("iframe",{id:"t_iframe",onLoad:G_iFrameHeight.bind(this,"t_iframe"),frameborder:"0",scrolling:"auto",marginheight:"0",marginwidth:"0",width:"100%",height:"600px",src:this.props.share_url}),React.createElement("p",null,"\u5206\u4eab\u5730\u5740:"),React.createElement("p",null,this.props.share_url))}}),m=React.createClass({displayName:"Img_photo_rect",getInitialState:function(){return d},buttion_black_Click:function(a){var b="";$(".G_cookplan_Img_img").each(function(){b+=$(this).attr("id")+","});b=b.substring(0,b.length-1);$("#photo_uuids").val(b);if($("#KdPhotoForm").serializeJson().photo_uuids){var c={formName:"KdPhotoForm",url:hostUrl+"rest/kdMovie/save.json",cbFN:null};$.AMUI.progress.start();c.jsonString||(formObject=$("#"+c.formName).serializeJson(),c.jsonString=JSON.stringify(formObject));var e=!0;!1===c.async&&(e=c.async);$.ajax({type:"POST",url:c.url,processData:!1,data:c.jsonString,dataType:"json",contentType:!1,async:e,success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?React.render(React.createElement(g,{formdata:a.formdata}),document.getElementById("div_body")):G_msg_pop(b.ResMsg.message)},error:G_ajax_error_fn})}else G_msg_pop("\u56fe\u7247\u81f3\u5c11\u9009\u62e9\u4e00\u5f20.")},addShowImg:function(a,b){var c="Img_photo_rect_"+b;$("#show_imgList").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");this.setState(this.state);React.render(React.createElement(w,{prx_divid:"Img_photo_rect_",url:a,uuid:b,paThat:this}),document.getElementById(c))},componentDidMount:function(){var a=d.imgArry;if(0!=a.length)for(var b=0;b<a.length;b++)this.addShowImg(a[b].path,a[b].uuid)},bg_Class_fn:function(){for(var a=this,b=d.imgArry,c=0;c<b.length;c++)G_photo_urlsSelectArry.push(b[c].uuid);b=Store.getGroupBymyclassList(this.state.formdata.classuuid);$("#show_imgList").html("");KDClassNewPhotoItem.queryForSelect(b,this.state.formdata.classuuid,1,function(b){$("#show_imgList").html("");for(var c=[],d=0;d<b.length;d++)c.push(b[d].uuid);for(var g,d=0;d<c.length;d++)g=0==d?c[d]:g+(","+c[d]);c=q(g);for(d=0;d<c.length;d++)a.addShowImg(c[d].path,c[d].uuid)})},handleChange:function(){this.setState(this.state);this.setState($("#KdPhotoForm").serializeJson())},handleChange_selectMp3:function(a){this.state.Mp3uuid=a;this.setState(this.state)},Look_status:function(a){this.state.status=a;this.setState(this.state)},buttion_delete:function(a){if(confirm("\u786e\u5b9a\u8981\u5220\u9664\u8be5\u76f8\u518c\u5417?")){var b=a.uuid;$.AMUI.progress.start();$.ajax({type:"POST",url:hostUrl+"rest/kdMovie/delete.json?uuid\x3d"+b,dataType:"json",async:!0,success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?React.render(React.createElement(g,{formdata:a.formdata}),document.getElementById("div_body")):alert(b.ResMsg.message)},rror:G_ajax_error_fn})}},buttion_black:function(a){React.render(React.createElement(g,{formdata:a.formdata}),document.getElementById("div_body"))},buttion_fpmove:function(){var a=n();React.render(React.createElement(x,{evens:a}),G_get_div_body())},render:function(){var a=this.state,b,c=React.createElement("div",null);d=this.state;b=a.uuid?"G_Edit_show":"G_Edit_hide";c=a.tenokate?a.tenokate.title:"\u9009\u62e9\u6a21\u677f";a.herald||(a.herald="");a.tenokate||(a.tenokate="");a.Mp3uuid||(a.Mp3uuid="");a.photo_uuids||(a.photo_uuids="");return React.createElement("div",{id:"KdPhotoForm_list_div"},React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement("div",{className:"am-g  am-u-md-6 am-u-sm-12"},React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black.bind(this,a)},"\u8fd4\u56de\u76f8\u518c\u5899"),React.createElement(AMR_Button,{className:b,amSize:"xs",amStyle:"secondary",onClick:this.buttion_delete.bind(this,a)},"\u5220\u9664\u8be5\u76f8\u518c")),React.createElement("label",null,"\u76f8\u518c\u540d\u79f0\uff1a"),React.createElement("br",null),React.createElement("form",{id:"KdPhotoForm",method:"post",className:"am-form"},React.createElement("input",{type:"hidden",name:"photo_count",value:a.imgArry.length}),React.createElement("input",{type:"hidden",name:"uuid",value:a.uuid}),React.createElement("input",{type:"hidden",name:"herald",value:a.herald}),React.createElement("input",{type:"hidden",name:"template_key",value:a.tenokate.key}),React.createElement("input",{type:"hidden",name:"photo_uuids",id:"photo_uuids",value:a.photo_uuids}),React.createElement("input",{type:"hidden",name:"mp3",value:a.Mp3uuid}),React.createElement("input",{type:"hidden",name:"status",value:a.status}),React.createElement("input",{type:"text",name:"title",id:"title",value:a.title,onChange:this.handleChange,maxlength:"256"}),React.createElement("br",null),React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.bg_Class_fn.bind(this)},"\u9009\u62e9\u56fe\u7247")),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_fpmove.bind(this,a)},c)),React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"mp3uuid",name:"mp3uuid",onChange:this.handleChange_selectMp3,btnWidth:"200",data:a.Mp3Arry,btnStyle:"primary",value:a.Mp3uuid})),React.createElement("div",{className:"am-fl am-margin-bottom-sm am-margin-left-xs"},React.createElement(AMUIReact.Selected,{btnStyle:"secondary",id:"status",name:"status",onChange:this.Look_status.bind(this),btnWidth:"200",value:a.status,data:a.status_List})))),React.createElement("br",null),React.createElement("div",{id:"show_imgList"}),React.createElement("br",null),React.createElement("div",{className:"cls"}),React.createElement("br",null),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black_Click.bind(this,a)},"\u4fdd\u5b58\u5e76\u8fd4\u56de"))))}}),w=React.createClass({displayName:"KDphoto_Img_canDel",deleteImg:function(){var a=this.props.uuid,b=[];$("#"+this.props.prx_divid+a).remove();for(var c=d.imgArry,e=0;e<c.length;e++)a!=c[e].uuid&&b.push(c[e]);d.imgArry=b},div_onClick:function(a){var b=this.props.paThat;h(a,"\u5c01\u9762");d.herald=this.props.url;b.setState(b.state)},componentDidMount:function(){if(d.herald)d.herald==this.props.url&&h("Common_fPMovieTemplate_"+this.props.uuid,"\u5c01\u9762");else if(0!=d.imgArry.length){var a=d.imgArry[0].uuid;d.herald=d.imgArry[0].path;h("Common_fPMovieTemplate_"+a,"\u5c01\u9762")}},render:function(){var a=this.props.url,b=this.props.uuid;return React.createElement("div",{id:"Common_fPMovieTemplate_"+b,onClick:this.div_onClick.bind(this,"Common_fPMovieTemplate_"+b),className:"G_cookplan_Img"},React.createElement("img",{id:b,className:"G_cookplan_Img_img",src:a,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}}),x=React.createClass({displayName:"Img_fPMovieTemplate_rect",getInitialState:function(){return this.props.evens},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},render:function(){return React.createElement("div",{className:"am-comment-bd"},React.createElement(y,{imgsList:this.state.data}))}}),y=React.createClass({displayName:"Common_fPMovieTemplate_fn",div_onClick:function(a,b){this.is_Checked=!0;objfPMovieTemplate=b;h(a,"\u5df2\u9009\u62e9\u8be5\u6a21\u677f")},buttion_black_Click:function(){0==this.is_Checked?G_msg_pop("\u8bf7\u9009\u62e9\u4e00\u4e2a\u6a21\u677f"):(d.tenokate=objfPMovieTemplate,React.render(React.createElement(m),G_get_div_body()))},componentDidMount:function(){for(var a=this.props.imgsList,b=0;b<a.length;b++)d.tenokate.key==a[b].key&&(this.is_Checked=!0,objfPMovieTemplate=a[b],h("Common_fPMovieTemplate_fn_item_"+objfPMovieTemplate.key,"\u5df2\u9009\u62e9\u8be5\u6a21\u677f"))},render:function(){var a=this;if(this.props.imgsList)return this.is_Checked=!1,React.createElement("div",null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black_Click.bind(this)},"\u786e\u8ba4\u8be5\u6a21\u677f"),React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(b){var c=b.herald,d=b.title;d||(d="\u65e0");return React.createElement("li",{id:"Common_fPMovieTemplate_fn_item_"+b.key,className:"G_class_phtoto_Img  G_ch_classNews_item ",title:b.key,onClick:a.div_onClick.bind(this,"Common_fPMovieTemplate_fn_item_"+b.key,b)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:c}),React.createElement("label",null,"\u540d\u5b57\uff1a\u3010"+d+"\u3011")))})))}}),d={status:"0",status_List:[{value:"0",label:"\u53d1\u5e03"},{value:"1",label:"\u4e0d\u53d1\u5e03"}],uuid:"",Mp3Arry:[],imgArry:[],Mp3Name:null,Mp3uuid:null,btn_Letgo:!1,formdata:null,herald:null,photo_uuids:null,title:null,tenokate:null},q=function(a){$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryForMoviePhoto_uuids.json",dataType:"json",data:{photo_uuids:a},async:!1,success:function(a){"success"==a.ResMsg.status?(MoveArry=a.list.data,d.imgArry=MoveArry):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return d.imgArry},n=function(){var a=[];$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/fPMovieTemplate/query.json",dataType:"json",async:!1,success:function(b){$.AMUI.progress.done();"success"==b.ResMsg.status?a=b.list:(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn});return a},p=function(){var a=[];$.ajax({type:"GET",url:hostUrl+"rest/mp3/query.json",dataType:"json",async:!1,success:function(b){"success"==b.ResMsg.status?a=b.list.data:(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn});return a};return{queryForPayMove:function(a){React.render(React.createElement(g,{formdata:a}),G_get_div_body())}}}();