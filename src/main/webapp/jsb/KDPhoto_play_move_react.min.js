var KDPhoto_play_move=function(y){function h(b,a){$("#parent_showDiv").remove();var c=$("\x3cdiv\x3e"+a+"\x3c/div\x3e");c.attr("id","parent_showDiv");c.addClass("G_img_selected_mask");c.appendTo("#"+b)}var m=React.createClass({displayName:"Query_photo_div",load_more_btn_id:"load_playMove_more_",pageNo:1,classnewsreply_list_div:"am-list-playMovePhoto-bd",getInitialState:function(){this.props.formdata.query_My_All_list=1;return this.props.formdata},componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var b=this;q(this.classnewsreply_list_div+this.pageNo,this,this.pageNo,function(a){a&&(a.data.length<a.pageSize?$("#"+b.load_more_btn_id).hide():$("#"+b.load_more_btn_id).show(),b.pageNo++)});this.setState(this.state)},refresh_data:function(){this.pageNo=1;$("#"+this.classnewsreply_list_div).html("");this.load_more_data()},handleClick_PlayMove:function(b){d={uuid:"",Mp3Arry:[],imgArry:[],Mp3Name:null,Mp3uuid:null,btn_Letgo:!1,formdata:null,photo_uuids:null,title:null,tenokate:null};var a,c,e=l();e&&0!=e.length?(a=e[0].path,c=e[0].title):(a=null,c="");d.formdata=b;d.Mp3Arry=G_selected_dataModelArray_byArray(e,"path","title");d.Mp3uuid=a;d.Mp3Name=c;React.render(React.createElement(k),G_get_div_body())},All_group_class:function(){this.state.query_My_All_list=2;this.refresh_data()},My_group_class:function(){this.state.query_My_All_list=1;this.refresh_data()},render:function(){this.load_more_btn_id="load_playMove_more_"+this.props.uuid;var b,a,c,e=this.state;1==e.query_My_All_list?(c="G_Edit_show",a="G_Edit_hide"):(c="G_Edit_hide",a="G_Edit_show");b=0==e.list.length?"G_Edit_show":"G_Edit_hide";return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:c,amStyle:"secondary",onClick:this.All_group_class.bind(this)},"\u67e5\u8be2\u6240\u6709\u7cbe\u54c1\u76f8\u518c"),React.createElement(AMR_Button,{className:a,amStyle:"secondary",onClick:this.My_group_class.bind(this)},"\u67e5\u8be2\u6211\u7684\u7cbe\u54c1\u76f8\u518c"),React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick_PlayMove.bind(this,e)},"\u5236\u4f5c\u7cbe\u54c1\u76f8\u518c"))),React.createElement("div",{className:b},React.createElement("label",null,"\u8fd9\u91cc\u7a7a\u7a7a\u5982\u4e5f\uff0c\u5feb\u53bb\u5236\u4f5c\u81ea\u5df1\u7684\u7cbe\u54c1\u76f8\u518c\u5427")),React.createElement("div",{id:this.classnewsreply_list_div,className:"am-list-playMovePhoto-bd"}),React.createElement("div",{className:"am-list-news-ft"},React.createElement("a",{className:"am-list-news-more am-btn am-btn-default ",id:this.load_more_btn_id,onClick:this.load_more_data.bind(this)},"\u67e5\u770b\u66f4\u591a \u00bb")))}}),q=function(b,a,c,e){var d;d=1==a.state.query_My_All_list?hostUrl+"rest/kdMovie/queryMy.json":hostUrl+"rest/kdMovie/query.json";$.AMUI.progress.start();$.ajax({type:"GET",url:d,dataType:"json",async:!1,data:{pageNo:c},success:function(c){$.AMUI.progress.done();"success"==c.ResMsg.status?(a.state.list=c.list.data,React.render(React.createElement(t,{events:c.list,obj:a.state,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(b)),"function"==typeof e&&e(c.list)):(alert(c.ResMsg.message),G_resMsg_filter(c.ResMsg))},error:G_ajax_error_fn})},t=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.props.events},componentWillReceiveProps:function(b){this.setState(this.getStateByPropes(b))},render:function(){return React.createElement("div",{className:"am-comment-bd"},React.createElement(u,{imgsList:this.state.data,obj:this.props.obj}))}}),u=React.createClass({displayName:"Common_mg_Classnew_big_fn",div_onClick:function(b){var a,c,e=l(),r=n(b.photo_uuids);if(b.mp3)for(var f=0;f<e.length;f++)b.mp3==e[f].path&&(a=e[f].path,c=e[f].title);else e&&0!=e.length?(a=e[0].path,c=e[0].title):(a=null,c="");for(var g=p().data,f=0;f<g.length;f++)b.template_key==g[f].key&&(d.tenokate=g[f]);d.uuid=b.uuid;d.imgArry=r;d.herald=b.herald;d.formdata=this.props.obj;d.Mp3Arry=G_selected_dataModelArray_byArray(e,"path","title");d.Mp3uuid=a;d.Mp3Name=c;d.title=b.title;React.render(React.createElement(k),G_get_div_body())},render:function(){var b=this;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(a){var c=a.herald,e=a.create_time,d=a.title;d||(d="\u65e0");return React.createElement("li",{id:"Common_mg_ClassNew_big_fn_item_"+a.uuid,className:"G_class_phtoto_Img  G_ch_classNews_item ",onClick:b.div_onClick.bind(this,a)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:c}),React.createElement("label",null,"\u6807\u9898\uff1a"+d+"\u3010"+e+"\u3011")))})))}}),k=React.createClass({displayName:"Img_photo_rect",getInitialState:function(){return d},buttion_black_Click:function(b){var a="";$(".G_cookplan_Img_img").each(function(){a+=$(this).attr("id")+","});a=a.substring(0,a.length-1);$("#photo_uuids").val(a);$("#KdPhotoForm").serializeJson().photo_uuids?(G_ajax_shouc_save({formName:"KdPhotoForm",url:hostUrl+"rest/kdMovie/save.json",cbFN:null}),React.render(React.createElement(m,{formdata:b.formdata}),document.getElementById("div_body"))):G_msg_pop("\u56fe\u7247\u6216\u5185\u5bb9\u81f3\u5c11\u586b\u5199\u4e00\u9879.")},addShowImg:function(b,a){var c="Img_photo_rect_"+a;$("#show_imgList").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");this.setState(this.state);React.render(React.createElement(v,{prx_divid:"Img_photo_rect_",url:b,uuid:a,paThat:this}),document.getElementById(c))},componentDidMount:function(){var b=d.imgArry;if(0!=b.length)for(var a=0;a<b.length;a++)this.addShowImg(b[a].path,b[a].uuid)},bg_Class_fn:function(){for(var b=this,a=d.imgArry,c=0;c<a.length;c++)G_photo_urlsSelectArry.push(a[c].uuid);a=Store.getGroupBymyclassList(this.state.formdata.classuuid);$("#show_imgList").html("");KDClassNewPhotoItem.queryForSelect(a,this.state.formdata.classuuid,1,function(a){$("#show_imgList").html("");for(var c=[],d=0;d<a.length;d++)c.push(a[d].uuid);for(var g,d=0;d<c.length;d++)g=0==d?c[d]:g+(","+c[d]);c=n(g);for(d=0;d<c.length;d++)b.addShowImg(c[d].path,c[d].uuid)})},handleChange:function(){this.setState(this.state);this.setState($("#KdPhotoForm").serializeJson())},handleChange_selectMp3:function(b){for(var a=this.state.Mp3Arry,c=0;c<a.length;c++)a[c].value==b&&(this.state.Mp3Name=a[c].label);this.state.Mp3uuid=b;this.setState(this.state)},buttion_fpmove:function(){var b=p();React.render(React.createElement(w,{evens:b}),G_get_div_body())},render:function(){var b=this.state,a=React.createElement("div",null);d=this.state;a=b.tenokate?React.createElement("div",null,React.createElement("label",null,"\u80cc\u666f\u6a21\u677f\uff1a"+b.tenokate.title),React.createElement("br",null),React.createElement("img",{src:b.tenokate.herald})):React.createElement("div",null,React.createElement("label",null,"\u80cc\u666f\u6a21\u677f\uff1a\u672a\u9009\u62e9"),React.createElement("br",null));b.herald||(b.herald="");b.tenokate||(b.tenokate="");b.Mp3uuid||(b.Mp3uuid="");b.photo_uuids||(b.photo_uuids="");return React.createElement("div",{id:"KdPhotoForm_list_div"},React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement("div",{className:"am-g  am-u-md-6 am-u-sm-12"},React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"mp3uuid",name:"mp3uuid",onChange:this.handleChange_selectMp3,btnWidth:"200",data:b.Mp3Arry,btnStyle:"primary",value:b.Mp3uuid})),React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_fpmove.bind(this,b)},"\u9009\u62e9\u6a21\u677f")),React.createElement("label",null,"\u6807\u9898\uff1a"),React.createElement("br",null),React.createElement("form",{id:"KdPhotoForm",method:"post",className:"am-form"},React.createElement("input",{type:"hidden",name:"photo_count",value:b.imgArry.length}),React.createElement("input",{type:"hidden",name:"uuid",value:b.uuid}),React.createElement("input",{type:"hidden",name:"herald",value:b.herald}),React.createElement("input",{type:"hidden",name:"template_key",value:b.tenokate.key}),React.createElement("input",{type:"hidden",name:"photo_uuids",id:"photo_uuids",value:b.photo_uuids}),React.createElement("input",{type:"hidden",name:"mp3",value:b.Mp3uuid}),React.createElement("input",{type:"text",name:"title",id:"title",value:b.title,onChange:this.handleChange,maxlength:"256"}),React.createElement("label",null,"\u97f3\u4e50Mp3\uff1a"+b.Mp3Name),React.createElement("br",null),a),React.createElement("br",null),React.createElement("label",null,"\u73ed\u7ea7\u76f8\u518c\u56fe\u7247\uff1a"),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.bg_Class_fn.bind(this)},"\u6d4f\u89c8...")),React.createElement("div",{id:"show_imgList"}),React.createElement("br",null),React.createElement("div",{className:"cls"}),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black_Click.bind(this,b)},"\u4fdd\u5b58\u5e76\u8fd4\u56de"))))}}),v=React.createClass({displayName:"KDphoto_Img_canDel",deleteImg:function(){var b=this.props.uuid,a=[];$("#"+this.props.prx_divid+b).remove();for(var c=d.imgArry,e=0;e<c.length;e++)b!=c[e].uuid&&a.push(c[e]);d.imgArry=a},div_onClick:function(b){var a=this.props.paThat;h(b,"\u5c01\u9762");d.herald=this.props.url;a.setState(a.state)},componentDidMount:function(){d.herald==this.props.url&&h("Common_fPMovieTemplate_"+this.props.uuid,"\u5c01\u9762")},render:function(){var b=this.props.url,a=this.props.uuid;return React.createElement("div",{id:"Common_fPMovieTemplate_"+a,onClick:this.div_onClick.bind(this,"Common_fPMovieTemplate_"+a),className:"G_cookplan_Img"},React.createElement("img",{id:a,className:"G_cookplan_Img_img",src:b,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}}),w=React.createClass({displayName:"Img_fPMovieTemplate_rect",getInitialState:function(){return this.props.evens},componentWillReceiveProps:function(b){this.setState(this.getStateByPropes(b))},render:function(){return React.createElement("div",{className:"am-comment-bd"},React.createElement(x,{imgsList:this.state.data}))}}),x=React.createClass({displayName:"Common_fPMovieTemplate_fn",div_onClick:function(b,a){this.is_Checked=!0;objfPMovieTemplate=a;h(b,"\u5df2\u9009\u62e9\u8be5\u6a21\u677f")},buttion_black_Click:function(){0==this.is_Checked?G_msg_pop("\u8bf7\u9009\u62e9\u4e00\u4e2a\u6a21\u677f"):(d.tenokate=objfPMovieTemplate,React.render(React.createElement(k),G_get_div_body()))},componentDidMount:function(){for(var b=this.props.imgsList,a=0;a<b.length;a++)d.tenokate.key==b[a].key&&(this.is_Checked=!0,objfPMovieTemplate=b[a],h("Common_fPMovieTemplate_fn_item_"+objfPMovieTemplate.key,"\u5df2\u9009\u62e9\u8be5\u6a21\u677f"))},render:function(){var b=this;if(this.props.imgsList)return this.is_Checked=!1,React.createElement("div",null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black_Click.bind(this)},"\u786e\u8ba4\u8be5\u6a21\u677f"),React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(a){var c=a.herald,d=a.title;d||(d="\u65e0");return React.createElement("li",{id:"Common_fPMovieTemplate_fn_item_"+a.key,className:"G_class_phtoto_Img  G_ch_classNews_item ",title:a.key,onClick:b.div_onClick.bind(this,"Common_fPMovieTemplate_fn_item_"+a.key,a)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:c}),React.createElement("label",null,"\u540d\u5b57\uff1a\u3010"+d+"\u3011")))})))}}),d={uuid:"",Mp3Arry:[],imgArry:[],Mp3Name:null,Mp3uuid:null,btn_Letgo:!1,formdata:null,herald:null,photo_uuids:null,title:null,tenokate:null},n=function(b){$.ajax({type:"GET",url:hostUrl+"rest/kDPhotoItem/queryForMoviePhoto_uuids.json",dataType:"json",data:{photo_uuids:b},async:!1,success:function(a){"success"==a.ResMsg.status?(MoveArry=a.list.data,d.imgArry=MoveArry):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return d.imgArry},p=function(){var b=[];$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/fPMovieTemplate/query.json",dataType:"json",async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?b=a.list:(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return b},l=function(){var b=[];$.ajax({type:"GET",url:hostUrl+"rest/mp3/query.json",dataType:"json",async:!1,success:function(a){"success"==a.ResMsg.status?b=a.list.data:(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn});return b};return{queryForPayMove:function(b){React.render(React.createElement(m,{formdata:b}),G_get_div_second())}}}();