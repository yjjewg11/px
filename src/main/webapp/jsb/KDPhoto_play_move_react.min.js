var KDPhoto_play_move=function(v){function g(a,b){$("#parent_showDiv").remove();var c=$("\x3cdiv\x3e"+b+"\x3c/div\x3e");c.attr("id","parent_showDiv");c.addClass("G_img_selected_mask");c.appendTo("#"+a)}var h={queryForPayMove:function(a){React.render(React.createElement(l,{formdata:a}),G_get_div_second())}},l=React.createClass({displayName:"Query_photo_div",load_more_btn_id:"load_playMove_more_",pageNo:1,classnewsreply_list_div:"am-list-playMovePhoto-bd",getInitialState:function(){return this.props.formdata},componentWillReceiveProps:function(){this.load_more_data()},componentDidMount:function(){this.load_more_data()},load_more_data:function(){$("#"+this.classnewsreply_list_div).append("\x3cdiv id\x3d"+this.classnewsreply_list_div+this.pageNo+"\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");var a=this;m(this.classnewsreply_list_div+this.pageNo,this,this.pageNo,function(b){b&&(b.data.length<b.pageSize?$("#"+a.load_more_btn_id).hide():$("#"+a.load_more_btn_id).show(),a.pageNo++)});this.setState(this.state)},refresh_data:function(){this.pageNo=1;$("#"+this.classnewsreply_list_div).html("");this.load_more_data()},handleClick_PlayMove:function(a){var b,c,d=n();d&&0!=d.length?(b=d[0].path,c=d[0].title):(b=null,c="");e.formdata=a;e.Mp3Arry=G_selected_dataModelArray_byArray(d,"path","title");e.Mp3uuid=b;e.Mp3Name=c;React.render(React.createElement(k,{formdata:a,Mp3Arry:e.Mp3Arry,Mp3uuid:b,Mp3Name:c}),G_get_div_body())},All_group_class:function(){this.state.query_My_All_list=2;this.refresh_data()},My_group_class:function(){this.state.query_My_All_list=1;this.refresh_data()},render:function(){this.load_more_btn_id="load_playMove_more_"+this.props.uuid;var a,b,c,d=this.state;1==d.query_My_All_list?(c="G_Edit_show",b="G_Edit_hide"):(c="G_Edit_hide",b="G_Edit_show");a=0==d.list.length?"G_Edit_show":"G_Edit_hide";return React.createElement("div",{"data-am-widget":"list_news",className:"am-list-news am-list-news-default"},React.createElement(AMR_Panel,null,React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{className:c,amStyle:"secondary",onClick:this.All_group_class.bind(this)},"\u67e5\u8be2\u6240\u6709\u7cbe\u54c1\u76f8\u518c"),React.createElement(AMR_Button,{className:b,amStyle:"secondary",onClick:this.My_group_class.bind(this)},"\u67e5\u8be2\u6211\u7684\u7cbe\u54c1\u76f8\u518c"),React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.handleClick_PlayMove.bind(this,d)},"\u5236\u4f5c\u7cbe\u54c1\u76f8\u518c"))),React.createElement("div",{className:a},React.createElement("label",null,"\u8fd9\u91cc\u7a7a\u7a7a\u5982\u4e5f\uff0c\u5feb\u53bb\u5236\u4f5c\u81ea\u5df1\u7684\u7cbe\u54c1\u76f8\u518c\u5427")),React.createElement("div",{id:this.classnewsreply_list_div,className:"am-list-playMovePhoto-bd"}),React.createElement("div",{className:"am-list-news-ft"},React.createElement("a",{className:"am-list-news-more am-btn am-btn-default ",id:this.load_more_btn_id,onClick:this.load_more_data.bind(this)},"\u67e5\u770b\u66f4\u591a \u00bb")))}}),m=function(a,b,c,d){var f;f=1==b.state.query_My_All_list?hostUrl+"rest/kdMovie/queryMy.json":hostUrl+"rest/kdMovie/query.json";$.AMUI.progress.start();$.ajax({type:"GET",url:f,dataType:"json",async:!1,data:{pageNo:c},success:function(c){$.AMUI.progress.done();"success"==c.ResMsg.status?(b.state.list=c.list.data,React.render(React.createElement(p,{events:c.list,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),document.getElementById(a)),"function"==typeof d&&d(c.list)):(alert(c.ResMsg.message),G_resMsg_filter(c.ResMsg))},error:G_ajax_error_fn})},p=React.createClass({displayName:"Query_photo_rect",getInitialState:function(){return this.props.events},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},render:function(){return React.createElement("div",{className:"am-comment-bd"},React.createElement(q,{imgsList:this.state.data}))}}),q=React.createClass({displayName:"Common_mg_Classnew_big_fn",div_onClick:function(){alert("\u8fd9\u4e2a\u903b\u8f91\u8fd8\u6ca1\u5199\uff0c\u76f4\u63a5\u8df3\u5230\u7f16\u8f91\u754c\u9762")},render:function(){var a=this;if(this.props.imgsList)return React.createElement("div",null,React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(b){var c=b.herald,d=b.create_time,f=b.title;f||(f="\u65e0");return React.createElement("li",{id:"Common_mg_ClassNew_big_fn_item_"+b.uuid,className:"G_class_phtoto_Img  G_ch_classNews_item ",onClick:a.div_onClick.bind(this)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:c}),React.createElement("label",null,"\u6807\u9898\uff1a"+f+"\u3010"+d+"\u3011")))})))}}),k=React.createClass({displayName:"Img_photo_rect",getInitialState:function(){return e},buttion_black_Click:function(a){h.queryForPayMove(a)},imgDivNum:0,getNewImgDiv:function(){this.imgDivNum++;return"Classnews_edit_"+this.imgDivNum},addShowImg:function(a,b,c){console.log("uuid",c);c=this.getNewImgDiv();$("#show_imgList").append("\x3cdiv id\x3d'"+c+"'\x3e\u52a0\u8f7d\u4e2d...\x3c/div\x3e");this.state.div_list.push({parentDivId:c});this.state.imgArry.push(a);this.setState(this.state);React.render(React.createElement(r,{url:a,parentDivId:c,uuid:b}),document.getElementById(c))},upload_files_arr:[],componentDidMount:function(){this.editor=$("#classnews_content").xheditor(xhEditor_classnews_emot);var a=this;w_img_upload_nocut.bind_onchange("#file_img_upload",function(b,c){a.addShowImg(b)});if($("#imgs").val())for(var b=$("#imgs").val().split(","),c=0;c<b.length;c++)this.addShowImg(b[c])},bg_Class_fn:function(){var a=this,b=Store.getGroupBymyclassList(this.state.formdata.classuuid);KDClassNewPhotoItem.queryForSelect(b,this.state.formdata.classuuid,1,function(b){for(var d=a.state,f,e=0;e<b.length;e++)f=0==e?b[e]:f+(","+b[e]);d.photo_uuids=f;for(d=0;d<b.length;d++)a.addShowImg(b[d].src,b[d].uuid,d)})},handleChange:function(){this.setState(this.state);this.setState($("#KdPhotoForm").serializeJson())},buttion_LestGo:function(){for(var a=0;a<this.state.div_list.length;a++)$("#"+this.state.div_list[a].parentDivId).remove();this.state.div_list=[];this.state.btn_Letgo=!1;this.setState(this.props.formdata)},handleChange_selectMp3:function(a){for(var b=this.state.Mp3Arry,c=0;c<b.length;c++)b[c].value==a&&(this.state.Mp3Name=b[c].label);this.state.Mp3uuid=a;this.setState(this.state)},buttion_fpmove:function(){$.AMUI.progress.start();$.ajax({type:"GET",url:hostUrl+"rest/fPMovieTemplate/query.json",dataType:"json",async:!1,success:function(a){$.AMUI.progress.done();"success"==a.ResMsg.status?React.render(React.createElement(t,{evens:a.list,responsive:!0,bordered:!0,striped:!0,hover:!0,striped:!0}),G_get_div_body()):(alert(a.ResMsg.message),G_resMsg_filter(a.ResMsg))},error:G_ajax_error_fn})},render:function(){var a=this.state,b,c=React.createElement("div",null);e=this.state;b=0==a.btn_Letgo?"G_Edit_hide":"G_Edit_show";c=a.tenokate?React.createElement("div",null,React.createElement("label",null,"\u80cc\u666f\u6a21\u677f\uff1a"+a.tenokate.title),React.createElement("br",null),React.createElement("img",{src:a.tenokate.herald})):React.createElement("div",null,React.createElement("label",null,"\u80cc\u666f\u6a21\u677f\uff1a\u672a\u9009\u62e9"),React.createElement("br",null));console.log("\u6d4b\u8bd51",this.state);console.log("\u6d4b\u8bd5222",e);return React.createElement("div",{id:"KdPhotoForm_list_div"},React.createElement("div",{className:"header"},React.createElement("hr",null)),React.createElement("div",{className:"am-g  am-u-md-6 am-u-sm-12"},React.createElement(AMR_ButtonToolbar,null,React.createElement("div",{className:"am-fl am-margin-left-sm am-margin-bottom-xs"},React.createElement(AMUIReact.Selected,{id:"mp3uuid",name:"mp3uuid",onChange:this.handleChange_selectMp3,btnWidth:"200",data:a.Mp3Arry,btnStyle:"primary",value:a.Mp3uuid})),React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_fpmove.bind(this,a)},"\u9009\u62e9\u6a21\u677f")),React.createElement("label",null,"\u6807\u9898\uff1a"),React.createElement("br",null),React.createElement("form",{id:"KdPhotoForm",method:"post",className:"am-form"},React.createElement("input",{type:"hidden",name:"photo_uuids",value:a.photo_uuids}),React.createElement("input",{type:"hidden",name:"mp3",value:a.Mp3uuid}),React.createElement("input",{type:"text",name:"title",id:"title",value:a.title,onChange:this.handleChange,maxlength:"256"}),React.createElement("label",null,"\u97f3\u4e50Mp3\uff1a"+a.Mp3Name),React.createElement("br",null),c),React.createElement("br",null),React.createElement("label",null,"\u73ed\u7ea7\u76f8\u518c\u56fe\u7247\uff1a"),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.bg_Class_fn.bind(this)},"\u6d4f\u89c8...")),React.createElement("div",{id:"show_imgList"}),React.createElement("br",null),React.createElement("div",{className:"cls"}),React.createElement(AMR_ButtonToolbar,null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black_Click.bind(this,a)},"\u4fdd\u5b58\u5e76\u8fd4\u56de"),React.createElement(AMR_Button,{amSize:"xs",className:b,amStyle:"secondary",onClick:this.buttion_LestGo.bind(this)},"\u4fdd\u5b58\u7ee7\u7eed\u4e0a\u4f20"))))}}),r=React.createClass({displayName:"KDphoto_Img_canDel",deleteImg:function(a){$("#"+a).remove()},div_onClick:function(a){g(a,"\u5c01\u9762")},render:function(){var a=this.props.url,b=this.props.uuid;return React.createElement("div",{id:"Common_fPMovieTemplate_"+b,title:b,onClick:this.div_onClick.bind(this,"Common_fPMovieTemplate_"+b),className:"G_cookplan_Img"},React.createElement("img",{className:"G_cookplan_Img_img",src:a,alt:"\u56fe\u7247\u4e0d\u5b58\u5728"}),React.createElement("div",{className:"G_cookplan_Img_close",onClick:this.deleteImg.bind(this,this.props.parentDivId)},React.createElement("img",{src:hostUrlCDN+"i/close.png",border:"0"})))}}),t=React.createClass({displayName:"Img_fPMovieTemplate_rect",getInitialState:function(){return this.props.evens},componentWillReceiveProps:function(a){this.setState(this.getStateByPropes(a))},render:function(){return React.createElement("div",{className:"am-comment-bd"},React.createElement(u,{imgsList:this.state.data}))}}),u=React.createClass({displayName:"Common_fPMovieTemplate_fn",div_onClick:function(a,b){this.is_Checked=!0;objfPMovieTemplate=b;g(a,"\u5df2\u9009\u62e9\u8be5\u6a21\u677f")},buttion_black_Click:function(){0==this.is_Checked?G_msg_pop("\u8bf7\u9009\u62e9\u4e00\u4e2a\u6a21\u677f"):(e.tenokate=objfPMovieTemplate,React.render(React.createElement(k),G_get_div_body()))},render:function(){var a=this;if(this.props.imgsList)return this.is_Checked=!1,React.createElement("div",null,React.createElement(AMR_Button,{amSize:"xs",amStyle:"secondary",onClick:this.buttion_black_Click.bind(this)},"\u786e\u8ba4\u8be5\u6a21\u677f"),React.createElement("ul",{className:"am-gallery am-avg-sm-3 am-avg-md-4 am-avg-lg-6 am-gallery-imgbordered"},this.props.imgsList.map(function(b){var c=b.herald,d=b.title;d||(d="\u65e0");return React.createElement("li",{id:"Common_fPMovieTemplate_fn_item_"+b.key,className:"G_class_phtoto_Img  G_ch_classNews_item ",title:b.key,onClick:a.div_onClick.bind(this,"Common_fPMovieTemplate_fn_item_"+b.key,b)},React.createElement("div",{className:"am-gallery-item"},React.createElement("img",{src:c}),React.createElement("label",null,"\u540d\u5b57\uff1a\u3010"+d+"\u3011")))})))}}),e={Mp3Arry:[],div_list:[],imgArry:[],Mp3Name:null,Mp3uuid:null,btn_Letgo:!1,formdata:null,photo_uuids:null,title:null,tenokate:null},n=function(){var a=[];$.ajax({type:"GET",url:hostUrl+"rest/mp3/query.json",dataType:"json",async:!1,success:function(b){"success"==b.ResMsg.status?a=b.list.data:(alert(b.ResMsg.message),G_resMsg_filter(b.ResMsg))},error:G_ajax_error_fn});return a};return h}();